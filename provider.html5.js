"use strict";(self.webpackChunkjwplayer=self.webpackChunkjwplayer||[]).push([[250],{8377:(e,t,r)=>{r.d(t,{M:()=>a,_:()=>i});const a=function(e,t){var r=e.kind||"cc";return e.default||e.defaulttrack?"default":e._id||e.file||r+t},i=function(e,t){let r=e.label||e.name||e.language;return r||(r="Unknown CC",1<(t+=1)&&(r+=` [${t}]`)),{label:r,unknownCount:t}}},6103:(e,t,u)=>{u.d(t,{VS:()=>n,xl:()=>i});var r=u(7477),h=u(2894),a=u(6886),m=u(7941),T=u(7387),g=u(2957),f=u(4446);const v=e=>{throw new f.rG(null,e)},p=function(e){return e.map(e=>new r.Z(e.begin,e.end,e.text))},i=function(l,d,c){l.xhr=(0,a.h)(l.file,function(a){{var i=a,n=l,s=d,o=c;let e,t,r=i.responseXML?i.responseXML.firstChild:null;if(r)for("xml"===(0,m.r1)(r)&&(r=r.nextSibling);r&&r.nodeType===r.COMMENT_NODE;)r=r.nextSibling;try{if(r&&"tt"===(0,m.r1)(r)){if(!i.responseXML)throw new Error("Empty XML response");e=function(t){t||v(306007);var r=[];let a=t.getElementsByTagName("p"),i=30;const n=t.getElementsByTagName("tt");if(null!=n&&n[0]){const t=parseFloat(n[0].getAttribute("ttp:frameRate")||"");isNaN(t)||(i=t)}a||v(306005),a.length||(a=t.getElementsByTagName("tt:p")).length||(a=t.getElementsByTagName("tts:p"));for(let e=0;e<a.length;e++){var s=a[e],o=s.getElementsByTagName("br");for(let e=0;e<o.length;e++){const a=o[e];null!=a&&a.parentNode&&a.parentNode.replaceChild(t.createTextNode("\r\n"),a)}var l=s.innerHTML||s.textContent||s.text||"",l=(0,g.fy)(l).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(l){const t=s.getAttribute("begin")||"",a=s.getAttribute("dur")||"",n=s.getAttribute("end")||"",d={begin:(0,g.m9)(t,i),text:l};n?d.end=(0,g.m9)(n,i):a&&(d.end=(d.begin||0)+(0,g.m9)(a,i)),r.push(d)}}return r.length||v(306005),r}(i.responseXML),t=p(e),delete n.xhr,s(t)}else{const m=i.responseText;0<=m.indexOf("WEBVTT")?u.e(347).then(function(e){return u(2776).default}.bind(null,u)).catch((0,h.Jt)(301131)).then(e=>{e=new e(window);t=[],e.oncue=function(e){t.push(e)},e.onflush=function(){delete n.xhr,s(t)},e.parse(m)}).catch(e=>{delete n.xhr,o((0,f.Mm)(null,f.Y7,e))}):(e=(0,T.Z)(m),t=p(e),delete n.xhr,s(t))}}catch(i){delete n.xhr,o((0,f.Mm)(null,f.Y7,i))}}},(e,t,r,a)=>{c((0,f.l9)(a,f.Y7))})},n=function(e){e&&e.forEach(e=>{var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t)&&t.abort(),delete e.xhr})}},7387:(e,t,r)=>{r.d(t,{Z:()=>function(e){var t=[];let r=(e=(0,n.fy)(e)).split("\r\n\r\n");1===r.length&&(r=e.split("\n\n"));for(let e=0;e<r.length;e++)if("WEBVTT"!==r[e]){const n=a(r[e]);n.text&&t.push(n)}return t}});var n=r(2957);const a=e=>{var t={};let r=e.split("\r\n"),a=1;if(0<(r=1===r.length?e.split("\n"):r)[0].indexOf(" --\x3e ")&&(a=0),r.length>a+1&&r[a+1]){const e=r[a],i=e.indexOf(" --\x3e ");0<i&&(t.begin=(0,n.m9)(e.substr(0,i)),t.end=(0,n.m9)(e.substr(i+5)),t.text=r.slice(a+1).join("\r\n"))}return t}},7477:(v,e,t)=>{t.d(e,{Z:()=>a});let r=window.VTTCue;const p=e=>"string"==typeof e&&!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[e.toLowerCase()]&&e.toLowerCase();if(!r){const v="auto";(r=function(e,t,r){var a=this;a.hasBeenReset=!1;let i="",n=!1,s=e,o=t,l=r,d=null,c="",u=!0,h=v,m="start",T=v,g=100,f="middle";Object.defineProperty(a,"id",{enumerable:!0,get:()=>i,set(e){i=""+e}}),Object.defineProperty(a,"pauseOnExit",{enumerable:!0,get:()=>n,set(e){n=Boolean(e)}}),Object.defineProperty(a,"startTime",{enumerable:!0,get:()=>s,set(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"endTime",{enumerable:!0,get:()=>o,set(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"text",{enumerable:!0,get:()=>l,set(e){l=""+e,this.hasBeenReset=!0}}),Object.defineProperty(a,"region",{enumerable:!0,get:()=>d,set(e){d=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"vertical",{enumerable:!0,get:()=>c,set(e){e="string"==typeof(e=e)&&!!{"":!0,lr:!0,rl:!0}[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");c=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"snapToLines",{enumerable:!0,get:()=>u,set(e){u=Boolean(e),this.hasBeenReset=!0}}),Object.defineProperty(a,"line",{enumerable:!0,get:()=>h,set(e){if("number"!=typeof e&&e!==v)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"lineAlign",{enumerable:!0,get:()=>m,set(e){e=p(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"position",{enumerable:!0,get:()=>T,set(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");T=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"size",{enumerable:!0,get:()=>g,set(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"align",{enumerable:!0,get:()=>f,set(e){e=p(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}}),a.displayState=void 0}).prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}const a=r},4506:(e,t,r)=>{r.d(t,{Z:()=>a});const a=e=>({bitrate:e.bitrate,label:e.label,width:e.width,height:e.height})},3328:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(6103),d=r(8377);const i={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"},c=(e,t)=>{var r=e.length;let a,i,n,s="",o=t||0;for(;o<r;)if(0!==(a=e[o++])&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(a);break;case 12:case 13:i=e[o++],s+=String.fromCharCode((31&a)<<6|63&i);break;case 14:i=e[o++],n=e[o++],s+=String.fromCharCode((15&a)<<12|(63&i)<<6|(63&n)<<0)}return s},u=e=>{e=(t=>{let r="0x";for(let e=0;e<t.length;e++)t[e]<16&&(r+="0"),r+=t[e].toString(16);return parseInt(r,16)})(e);return 127&e|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3};var h=r(8348),m=r(1643),n=r(6042);function T(e){const t=e.target,{activeCues:r,cues:a}=t,i=t._id,n=this._cues,s=this._activeCues;if(null!=a&&a.length){const e=n[i];n[i]=Array.prototype.slice.call(a),this.parseNativeID3Cues(a,e)}else delete n[i];if(null!=r&&r.length){const e=s[i],t=s[i]=Array.prototype.slice.call(r);this.triggerActiveCues(t,e)}else delete s[i]}const s=(r,e,a)=>{null!=e&&e.length&&(0,n.S6)(e,function(t){var e=t._id||"";if(a&&(t._id=void 0),!h.Browser.ie&&!h.Browser.safari||!r||!/^(native|subtitle|cc)/.test(e)){if(h.Browser.ie&&"disabled"===t.mode||(t.mode="disabled",t.mode="hidden"),t.cues)for(let e=t.cues.length;e--;)t.removeCue(t.cues[e]);t.embedded||(t.mode="disabled"),t.inuse=!1}})},g=e=>/^native(?:captions|subtitles)/.test(e),f=e=>"captions"===e||"subtitles"===e,v=(t,r,a)=>{if(h.Browser.ie){let e=a;(t||"metadata"===r.kind)&&(e=new window.TextTrackCue(a.startTime,a.endTime,a.text),a.value)&&(e.value=a.value);var i=r,n=e,s=[],o=i.mode,l=(i.mode="hidden",i.cues);if(l)for(let e=l.length-1;0<=e&&l[e].startTime>n.startTime;e--)s.unshift(l[e]),i.removeCue(l[e]);try{i.addCue(n),s.forEach(e=>i.addCue(e))}catch(i){console.error(i)}i.mode=o}else try{r.addCue(a)}catch(t){console.error(t)}},p=(e,t)=>e.startTime===t.startTime&&e.endTime===t.endTime&&e.text===t.text&&e.data===t.data&&JSON.stringify(e.value)===JSON.stringify(t.value),k=e=>{var t=(n=>{const s={};if(!("value"in n)&&"data"in n&&n.data instanceof ArrayBuffer){const s=new Uint8Array(n.data);let t=s.length,e=(n={value:{key:"",data:""}},10);for(;e<14&&e<s.length&&0!==s[e];)n.value.key+=String.fromCharCode(s[e]),e++;let r=19,a=s[r],i=(3!==a&&0!==a||(a=s[++r],t--),0);if(1!==a&&2!==a)for(let e=r+1;e<t;e++)if(0===s[e]){i=e-r;break}var o,l;0<i?(o=c(s.subarray(r,r+=i),0),"PRIV"===n.value.key?("com.apple.streaming.transportStreamTimestamp"===o?(l=1&u(s.subarray(r,r+=4)),l=u(s.subarray(r,r+=4))+(l?4294967296:0),n.value.data=l):n.value.data=c(s,r+1),n.value.info=o):(n.value.info=o,n.value.data=c(s,r+1))):(l=s[r],n.value.data=(1===l||2===l?(e,t)=>{var r=e.length-1;let a="",i=t||0;for(;i<r;)254===e[i]&&255===e[i+1]||(a+=String.fromCharCode((e[i]<<8)+e[i+1])),i+=2;return a}:c)(s,r+1))}if(function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}(i,n.value.key)&&(s[i[n.value.key]]=n.value.data),n.value.info){let e=s[n.value.key];e!==Object(e)&&(e={},s[n.value.key]=e),e[n.value.info]=n.value.data}else s[n.value.key]=n.value.data;return s})(e);return{metadataType:"id3",metadataTime:e.startTime,metadata:t}},o={_itemTracks:null,_textTracks:null,_currentTextTrackIndex:-1,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_unknownCount:0,_activeCues:null,_cues:null,textTrackChangeHandler:null,addTrackHandler:null,cueChangeHandler:null,renderNatively:!1,_initTextTracks(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._cues={},this._activeCues={},this._unknownCount=0},addTracksListener(e,t,r){e&&(this.removeTracksListener(e,t,r),this.instreamMode||(e.addEventListener?e.addEventListener(t,r):e["on"+t]=r))},removeTracksListener(e,t,r){e&&(e.removeEventListener&&r?e.removeEventListener(t,r):e["on"+t]=null)},clearTracks(){(0,a.VS)(this._itemTracks);const t=this["_tracksById"];if(t&&Object.keys(t).forEach(e=>{0===e.indexOf("nativemetadata")&&(e=t[e],this.cueChangeHandler&&e.removeEventListener("cuechange",this.cueChangeHandler),s(this.renderNatively,[e],!0))}),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCues={},this._cues={},this.renderNatively){const t=this.video.textTracks;this.textTrackChangeHandler&&this.removeTracksListener(t,"change",this.textTrackChangeHandler),s(this.renderNatively,t,!0)}},clearMetaCues(){const{_tracksById:t,_cachedVTTCues:r}=this;t&&r&&Object.keys(t).forEach(e=>{0===e.indexOf("nativemetadata")&&(e=t[e],s(this.renderNatively,[e],!1),e.mode="hidden",e.inuse=!0,e._id)&&(r[e._id]={})})},clearCueData(e){var t=this._cachedVTTCues;null!=t&&t[e]&&(t[e]={},this._tracksById)&&(this._tracksById[e].data=[])},disableTextTrack(){var e,t=this.getCurrentTextTrack();t&&(t.mode="disabled",(e=t._id)&&g(e)||this.renderNatively&&h.OS.iOS)&&(t.mode="hidden")},enableTextTrack(){var e=this.getCurrentTextTrack();e&&(e.mode="showing")},getCurrentTextTrack(){if(this._textTracks)return this._textTracks[this._currentTextTrackIndex]},getSubtitlesTrack(){return this._currentTextTrackIndex},addTextTracks(e){const r=[];return e&&(this._textTracks||this._initTextTracks(),e.forEach(e=>{if(!(e.includedInManifest||e.kind&&!f(e.kind))){const t=this._createTrack(e);this._addTrackToList(t),r.push(t),e.file&&(e.data=[],(0,a.xl)(e,e=>{t.sideloaded=!0,this.addVTTCuesToTrack(t,e)},e=>{this.trigger(m.cM,e)}))}}),null!=this)&&null!=(e=this._textTracks)&&e.length&&this.trigger(m.jt,{tracks:this._textTracks}),r},setTextTracks(r){var e;if(this._currentTextTrackIndex=-1,r){if(this._textTracks){const r=this._tracksById;this._activeCues={},this._cues={},this._unknownCount=0,this._textTracks=this._textTracks.filter(e=>{var t=e._id;return this.renderNatively&&t&&g(t)?(delete r[t],!1):(e.name&&0===e.name.indexOf("Unknown")&&this._unknownCount++,0===t.indexOf("nativemetadata")&&"com.apple.streaming"===e.inBandMetadataTrackDispatchType&&delete r[t],!0)},this)}else this._initTextTracks();if(r.length){let t=0;for(var a=r.length,i=this._tracksById,n=this._cuesByTrackId;t<a;t++){var s,o=r[t];let e=o._id||"";if(!e){if(!1===o.inuse&&f(o.kind)&&this.renderNatively){o._id="native"+o.kind+t;continue}if(f(o.kind)||"metadata"===o.kind){if(e=o._id="native"+o.kind+t,!o.label&&"captions"===o.kind){const r=(0,d._)(o,this._unknownCount);o.name=r.label,this._unknownCount=r.unknownCount}}else e=o._id=(0,d.M)(o,this._textTracks?this._textTracks.length:0);if(i[e])continue;o.inuse=!0}if(o.inuse&&!i[e])if("metadata"===o.kind){o.mode="hidden";const r=this.cueChangeHandler=this.cueChangeHandler||T.bind(this);o.removeEventListener("cuechange",r),o.addEventListener("cuechange",r),i[e]=o}else if(f(o.kind)){const r=o.mode;if(o.mode="hidden",o.cues&&o.cues.length||!o.embedded){if("disabled"===r&&!g(e)||(o.mode=r),n[e]&&!n[e].loaded){for(var l=n[e].cues;s=l.shift();)v(this.renderNatively,o,s);o.mode=r,n[e].loaded=!0}this._addTrackToList(o)}}}}this.renderNatively&&this.addTrackListeners(r),null!=this&&null!=(e=this._textTracks)&&e.length&&this.trigger(m.jt,{tracks:this._textTracks})}},addTrackListeners(e){var t=this.textTrackChangeHandler=this.textTrackChangeHandler||function(){var e=this.video.textTracks,t=(0,n.hX)(e,function(e){return(e.inuse||!e._id)&&f(e.kind)});if(!this._textTracks||function(t){var e=this._textTracks,r=this._tracksById;if(t.length>e.length)return!0;for(let e=0;e<t.length;e++){var a=t[e];if(!a._id||!r[a._id])return!0}return!1}.call(this,t))this.setTextTracks(e);else{let t=-1;for(let e=0;e<this._textTracks.length;e++)if("showing"===this._textTracks[e].mode){t=e;break}t!==this._currentTextTrackIndex&&this.setSubtitlesTrack(t+1)}}.bind(this);this.removeTracksListener(e,"change",t),this.addTracksListener(e,"change",t),(h.Browser.edge&&h.Browser.ie||h.Browser.firefox)&&(t=this.addTrackHandler=this.addTrackHandler||function(e){e=e.track;null!=e&&e._id||this.setTextTracks(this.video.textTracks)}.bind(this),this.removeTracksListener(e,"addtrack",t),this.addTracksListener(e,"addtrack",t))},setupSideloadedTracks(e){var t;this.renderNatively&&((t=(e=e||null)===this._itemTracks)||(0,a.VS)(this._itemTracks),this._itemTracks=e)&&!t&&(this.disableTextTrack(),this._clearSideloadedTextTracks(),this.addTextTracks(e))},setSubtitlesTrack(e){var t;this.renderNatively?this._textTracks&&(0===e&&this._textTracks.forEach(e=>{e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1)&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,(t=this.getCurrentTextTrack())&&(t.mode="showing"),this.trigger(m.UF,{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})):this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1)},createCue:(e,t,r)=>new(window.VTTCue||window.TextTrackCue)(e,Math.max(t||0,e+.25),r),addVTTCue(e,t){this._tracksById||this._initTextTracks();var r=e.track||"native"+e.type;let a=this._tracksById[r];var i="captions"===e.type?"Unknown CC":"ID3 Metadata",n=e.cue;if(!a){const t={kind:e.type,_id:r,label:i,default:!1};this.renderNatively||"metadata"===t.kind?((a=this._createTrack(t)).embedded=!0,this.setTextTracks(this.video.textTracks)):a=this.addTextTracks([t])[0]}if(this._cacheVTTCue(a,n,t)){const e=this.renderNatively||"metadata"===a.kind;return e?v(e,a,n):a.data.push(n),n}return null},addVTTCuesToTrack(t,r){if(this.renderNatively){var t=t._id,a=this._tracksById;let e=this._cuesByTrackId;var i,n=a[t];if(n){if(null==(a=e)||null==(a=a[t])||!a.loaded)for(e[t]={cues:r,loaded:!0};i=r.shift();)v(this.renderNatively,n,i)}else(e=e||(this._cuesByTrackId={}))[t]={cues:r,loaded:!1}}},parseNativeID3Cues(i,n){const s=i[i.length-1];if(!n||n.length!==i.length||!s._parsed&&!p(n[n.length-1],s)){var o=[],l=[];let t=-1,r=-1,a;for(let e=0;e<i.length;e++){const s=i[e];if(!s._extended&&Boolean(s.data||s.value)){if(s.startTime!==r||null===s.endTime){a=r,r=s.startTime;const i=o[t],n=(o[++t]=[],l[t]=[],r-a);if(i&&0<n)for(let e=0;e<i.length;e++){const s=i[e];s.endTime=r,s._extended=!0}}o[t].push(s),s._parsed||(l[t].push(s),s.endTime-r<.25&&(s.endTime=r+.25),s._parsed=!0)}}for(let e=0;e<l.length;e++)l[e].length&&l[e].forEach(e=>{e=k(e);this.trigger(m.O1,e)})}},triggerActiveCues(e,r){e=e.filter(t=>{if(null==r||!r.some(e=>p(t,e))){if(t.data)return!0;var e=t.text?(e=>{let t;try{t=JSON.parse(e.text)}catch(e){return null}var r={metadataType:t.metadataType,metadataTime:e.startTime,metadata:t};return t.programDateTime&&(r.programDateTime=t.programDateTime),r})(t):null;if(e)"emsg"===e.metadataType&&(e.metadata=e.metadata||{},e.metadata.messageData=t.value),this.trigger(m.rx,e);else if(t.value)return!0}return!1});e.length&&e.forEach(e=>{e=k(e);this.trigger(m.rx,e)})},ensureMetaTracksActive(){const t=this.video.textTracks,r=t.length;for(let e=0;e<r;e++){const r=t[e];"metadata"===r.kind&&"disabled"===r.mode&&(r.mode="hidden")}},_cacheVTTCue(e,t,r){const a=e.kind,i=e._id,n=this._cachedVTTCues;n[i]||(n[i]={});var s=n[i];let o;switch(a){case"captions":case"subtitles":{o=r||Math.floor(20*t.startTime);const e="_"+(t.line||"auto"),a=Math.floor(20*t.endTime),i=s[o+e]||s[o+1+e]||s[o-1+e];return!(i&&Math.abs(i-a)<=1||(s[o+e]=a,0))}case"metadata":{const e=t.data?new Uint8Array(t.data).join(""):t.text;return!s[o=r||t.startTime+e]&&(s[o]=t.endTime,!0)}default:return!1}},_addTrackToList(e){this._textTracks.push(e),this._tracksById[e._id]=e},_createTrack(e){let t;const r=(0,d._)(e,this._unknownCount),a=r.label;if(this._unknownCount=r.unknownCount,this.renderNatively||"metadata"===e.kind){const r=this.video.textTracks;(t=(t=(0,n._e)(r,{label:a}))||this.video.addTextTrack(e.kind,a,e.language||"")).default=e.default,t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=(0,d.M)(e,this._textTracks?this._textTracks.length:0)),t},_clearSideloadedTextTracks(){if(this._textTracks){var e=this._textTracks.filter(e=>e.embedded||"subs"===e.groupid);this._initTextTracks();const t=this._tracksById;e.forEach(e=>{t[e._id]=e}),this._textTracks=e}}}},9601:(e,t,r)=>{r.d(t,{E:()=>s,Z:()=>function(e,t,r){let a=e+1e3,i=n.ul;return 0<t?(403===t&&(i=n.H4),a+=s(t)):"http:"===(""+r).substring(0,5)&&"https:"===document.location.protocol?a+=12:0===t&&(a+=11),{code:a,key:i}}});var n=r(4446);const s=e=>400<=e&&e<600?e:6},5099:(e,t,r)=>{r.d(t,{Z:()=>function(n){return new Promise(function(t,r){if(n.paused)return r(s("NotAllowedError",0,"play() failed."));let a;const e=function(e){if(a(),"playing"!==e.type){const t=`The play() request was interrupted by a "${e.type}" event.`;return"error"===e.type?r(s("NotSupportedError",9,t)):r(s("AbortError",20,t))}t()},i=function(){n.addEventListener("playing",e),n.addEventListener("abort",e),n.addEventListener("error",e),n.addEventListener("pause",e)};a=function(){n.removeEventListener("play",i),n.removeEventListener("playing",e),n.removeEventListener("pause",e),n.removeEventListener("abort",e),n.removeEventListener("error",e)},n.addEventListener("play",i)})}});const s=(e,t,r)=>{r=new Error(r);return r.name=e,r.code=t,r}},686:(e,t,r)=>{r.d(t,{s:()=>i,v:()=>n});const a=e=>void 0===e?120:Math.max(e,0),i=(e,t)=>e!==1/0&&Math.abs(e)>=Math.max(a(t),0),n=(e,t)=>{let r="VOD";return e===1/0?r="LIVE":e<0&&(r=i(e,a(t))?"DVR":"LIVE"),r}},3949:(e,t,r)=>{r.d(t,{Z:()=>i});var u=r(8348),h=r(974),a=r(9974);const i={container:null,volume(e){this.video.volume=Math.min(Math.max(0,e/100),1)},mute(e){this.video.muted=Boolean(e),this.video.muted||this.video.removeAttribute("muted")},resize(r,a,i){var n=this["video"],{videoWidth:s,videoHeight:o}=n;if(r&&a&&s&&o){var l={objectFit:"",width:"",height:""},d=r/a,c=s/o;if("uniform"===i&&(c<d?r-r/(d/c):a-a/(c/d))<6&&(l.objectFit="fill",i="exactfit"),u.Browser.ie||u.OS.iOS&&(u.OS.version.major||0)<9||u.Browser.androidNative)if("uniform"!==i){l.objectFit="contain";let e=1,t=1;"none"===i?e=t=c<d?Math.ceil(100*o/a)/100:Math.ceil(100*s/r)/100:"fill"===i?e=t=c<d?d/c:c/d:"exactfit"===i&&(t=c<d?(e=d/c,1):(e=1,c/d)),(0,h.vs)(n,`matrix(${e.toFixed(2)}, 0, 0, ${t.toFixed(2)}, 0, 0)`)}else(l.top=l.left=l.margin="",h.vs)(n,"");(0,h.oB)(n,l)}},getContainer(){return this.container},setContainer(e){this.container=e,this.video.parentNode!==e&&e.appendChild(this.video)},removeFromContainer(){var{container:e,video:t}=this;this.container=null,e&&e===t.parentNode&&e.removeChild(t)},remove(){this.stop(),this.destroy(),this.removeFromContainer()},atEdgeOfLiveStream(){return!!this.isLive()&&(0,a.Z)(this.video.buffered)-this.video.currentTime<=2}}},186:(e,t,r)=>{r.d(t,{Z:()=>a});const a={_eventsOn(){},_eventsOff(){},attachMedia(){this._eventsOn()},detachMedia(){return this._eventsOff()}}},8702:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1643),a=r(1261);const i={canplay(){this.renderNatively&&this.setTextTracks(this.video.textTracks),this.trigger(n.Jl)},play(){this.stallTime=-1,this.video.paused||this.state===n._5||this.state===n.r0||this.setState(n.ik)},loadedmetadata(){var e={metadataType:"media",duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth,seekRange:this.getSeekRange()},t=this.drmUsed;t&&(e.drm=t),this.trigger(n.rx,e)},timeupdate(){const e=this.video.currentTime,t=this.getCurrentTime(),r=this.getDuration();if(!isNaN(r)){this.seeking||this.video.paused||this.state!==n.nQ&&this.state!==n.ik||this.stallTime===e||(this.stallTime=-1,this.setState(n.r0),this.trigger(n.Gj));var a={position:t,duration:r,currentTime:e,seekRange:this.getSeekRange(),metadata:{currentTime:e}},i=this.getLiveLatency();if(null!==i&&(a.latency=i,this.getTargetLatency)){const e=this.getTargetLatency();null!==e&&(a.targetLatency=e)}(this.state===n.r0||this.seeking&&this.state!==n.bc)&&this.trigger(n.R2,a)}},click(e){this.trigger(n.ot,e)},volumechange(){var e=this.video;this.trigger(n.yH,{volume:Math.round(100*e.volume)}),this.trigger(n.gy,{mute:e.muted})},seeking(){if(this.state===n.ik){var e=this.video.buffered.length?this.video.buffered.start(0):-1;if(this.video.currentTime===e)return}else if(this.state===n.bc)return;this.seeking=!0},seeked(){this.seeking&&(this.seeking=!1,this.trigger(n.aQ))},playing(){-1===this.stallTime&&this.setState(n.r0),this.trigger(n.Gj)},pause(){this.state===n.xQ||this.video.ended||this.video.error||this.video.currentTime!==this.video.duration&&this.setState(n._5)},progress(){var e,t=this.getDuration();t<=0||t===1/0||(e=this.video.buffered)&&0!==e.length&&(e=(0,a.v)(e.end(e.length-1)/t,0,1),this.trigger(n.uT,{bufferPercent:100*e,position:this.getCurrentTime(),duration:t,currentTime:this.video.currentTime,seekRange:this.getSeekRange()}))},ratechange(){this.trigger(n.TJ,{playbackRate:this.video.playbackRate})},ended(){this.state!==n.bc&&this.state!==n.xQ&&this.trigger(n.Ms)}}},9974:(e,t,r)=>{r.d(t,{Z:()=>function(e){return e&&e.length?e.end(e.length-1):0}})},3343:(e,t,r)=>{r.d(t,{q:()=>a});var c=r(6042),n=r(1643);const u=(e,t)=>{e=e[t];return(0,c.xV)(e)&&0<=e?e:null},a=function(e,t,r){var a=((r,a,i)=>{let n,s;if(null===(n=(0,c.xV)(i.startPTS)?u(i,"startPTS"):u(i,"start")))return null;switch(r){case"PROGRAM-DATE-TIME":return{metadataType:s="program-date-time",programDateTime:a,start:n,end:n+u(i,"duration")};case"EXT-X-DATERANGE":{const u={},l=a.split(",").map(e=>{var e=e.split("="),t=e[0],e=(e[1]||"").replace(/^"|"$/g,"");return{name:t,value:u[t]=e}}),d=u["START-DATE"];if(!d)return null;var o=u["END-DATE"];let e=n;if((0,c.xV)(i.programDateTime)&&(e+=(new Date(d).getTime()-new Date(i.programDateTime).getTime())/1e3),isNaN(e))return null;let t=parseFloat(u["PLANNED-DURATION"]||u.DURATION)||0;return!t&&o&&(t=(new Date(o).getTime()-new Date(d).getTime())/1e3),{metadataType:s="date-range",tag:r,content:a,attributes:l,start:e,end:e+t,startDate:d,endDate:o,duration:t}}case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT":return{metadataType:s="scte-35",tag:r,content:a,start:n,end:n+(parseFloat(a)||0)};case"DISCONTINUITY":{const c=n+u(i,"duration");let e;return"cc"in i&&(e=i.cc),{metadataType:s="discontinuity",tag:r,discontinuitySequence:e,PTS:a,start:n,end:c}}default:return null}})(e,t,r);if(a&&(0,c.xV)(a.start)){const u=this.createCue(a.start,a.end,JSON.stringify(a)),i=r.sn+`_${e}_`+t;if(this.addVTTCue({type:"metadata",cue:u},i)){const e=a.metadataType;delete a.metadataType,this.trigger(n.O1,{metadataType:e,metadata:a})}}}},9181:(i,e,t)=>{t.r(e),t.d(e,{default:()=>n});var k=t(5140),W=t(1643),G=t(4506),Q=t(8348),K=t(1628),Y=t(8702),$=t(3949),J=t(186),z=t(686),ee=t(974),te=t(2799),e=t(6528),re=t(328),ae=t(3328),ie=t(9974),ne=t(5099),se=t(6042),oe=t(5004),le=t(4446),de=t(1384);function ce(){}function r(A,i,P){const n=this;n.state=W.bc,n.seeking=!1,n.currentTime=-1,n.retries=0,n.maxRetries=3,n.muteToggle=Q.OS.iOS||Q.Browser.safari;var e=i.loadAndParseHlsMetadata;n.loadAndParseHlsMetadata=void 0===e||Boolean(e);let a=i.minDvrWindow;const s=P,o={level:{}};let l,d=!1,c=0,u=null,h=null,m=-1,T=ce,r=null,g=-1,t=-1,f=!1,v=null,p=!1,k=null,y=null,b=0;function x(){var e,t;n.muteToggle&&s.muted&&void 0!==(e=S())&&(t=!s.paused,s.muted=n.muteToggle=!1,e?s.muted=i.mute:(s.muted=!0,t&&s.paused&&s.play()))}function w(){var e;0!==H&&(e=(0,ie.Z)(s.buffered),n.isLive()&&e&&v===e?-1===t&&(t=window.setTimeout(function(){(f=!0)&&n.atEdgeOfLiveStream()&&n.trigger(W.Ew,new le.rG(le.Sp,220001))},H)):(D(),f=!1),v=e)}function _(){var e,t=o.level;t.width===s.videoWidth&&t.height===s.videoHeight||(s.videoWidth||S())&&-1!==m&&(n.ensureMetaTracksActive(),t.width=s.videoWidth,t.height=s.videoHeight,B(),o.reason=o.reason||"auto",e="hls"===l[m].type?"auto":"manual",t.index=m,t.label=l[m].label,n.trigger(W.ug,{reason:o.reason,mode:e,bitrate:0,level:{width:t.width,height:t.height,index:t.index,label:t.label}}),o.reason="")}function E(e){var t=n.getSeekRange();return n.isLive()&&(0,z.s)(t.end-t.start,a)?Math.min(0,e-t.end):e}function j(){s&&(n.disableTextTrack(),s.removeAttribute("preload"),s.removeAttribute("src"),(0,te.EU)(s),(0,ee.oB)(s,{objectFit:""}),m=-1,!Q.Browser.msie)&&"load"in s&&s.load()}function U(){var e;return!Q.Browser.safari||(null==(e=n.getCurrentTextTrack())?void 0:e.sideloaded)}function C(e){n.currentTime=-1,a=e.minDvrWindow,l=e.sources,m=F(l)}function L(){return s.paused&&s.played&&s.played.length&&n.isLive()&&!(0,z.s)(M()-I(),a)&&(n.attachMedia(),s.load()),s.play()||(0,ne.Z)(s)}function V(e){n.currentTime=-1,c=0,D();var t=s.src,r=document.createElement("source");r.src=l[m].file,r.src!==t?(R(l[m]),t&&s.load()):0===e&&0<s.currentTime&&(c=-1,n.seek(e)),0<e&&s.currentTime!==e&&n.seek(e),(r=q(l))&&n.trigger(W.UZ,{levels:r,currentQuality:m}),l.length&&"hls"!==l[0].type&&B()}this.video=s,this.supportsPlaybackRate=!0,this.startDateTime=0;const S=()=>{if(!(s.readyState<2&&0===s.buffered.length))return 0===s.videoHeight},H=null!==i.liveTimeout?1e3*i.liveTimeout:3e4,D=()=>{ue(t),t=-1},N=e=>{h=e},B=function(){var e=S();void 0!==e&&(e=e?"audio":"video",n.trigger(W.oZ,{mediaType:e}))},X=function(e){null!=s&&s.audioTracks&&r&&-1<e&&e<s.audioTracks.length&&e!==g&&(s.audioTracks[g].enabled=!1,g=e,s.audioTracks[g].enabled=!0,n.trigger(W._B,{currentTrack:g,tracks:r}))},Z=()=>{let t=-1;var r=s.audioTracks;for(let e=0;e<r.length;e++)if(r[e].enabled){t=e;break}X(t)},O={progress(){Y.Z.progress.call(n),S()&&x(),w()},timeupdate(){0<=n.currentTime&&(n.retries=0),n.currentTime=s.currentTime,(0,de.If)()&&h!==s.currentTime&&N(s.currentTime),Y.Z.timeupdate.call(n),w(),Q.Browser.ie&&_()},resize:_,ended(){m=-1,D(),Y.Z.ended.call(n)},loadedmetadata(){let e=n.getDuration();var t={metadataType:"media",duration:e=p&&e===1/0?0:e,height:s.videoHeight,width:s.videoWidth,seekRange:n.getSeekRange()};n.fairplay&&(t.drm="fairplay"),n.trigger(W.rx,t),_()},durationchange(){p||Y.Z.progress.call(n)},loadeddata(){(e=s).getStartDate&&(e=(e=e.getStartDate()).getTime?e.getTime():NaN)!==n.startDateTime&&!isNaN(e)&&n.setStartDateTime(e);var e,t=s.audioTracks;if(r=null,t){if(t.length){for(let e=0;e<t.length;e++)if(t[e].enabled){g=e;break}-1===g&&(t[g=0].enabled=!0),r=(0,se.UI)(t,function(e){return{name:e.label||e.language,language:e.language}})}n.addTracksListener(t,"change",Z),r&&n.trigger(W.j0,{currentTrack:g,tracks:r})}e=n.getDuration(),c&&-1!==c&&e&&e!==1/0&&n.seek(c)},canplay(){d||(d=!0,p||B(),_(),Y.Z.canplay.call(n))},seeking(){var e=h,t=null!==u?E(u):n.getCurrentTime(),r=E(e);h=u,u=null,c=0,n.seeking=!0,n.trigger(W.NZ,{position:r,offset:t,duration:n.getDuration(),currentTime:e,seekRange:n.getSeekRange(),metadata:{currentTime:e}})},seeked(){Y.Z.seeked.call(n),n.ensureMetaTracksActive()},waiting(){n.seeking||n.video.seeking?n.setState(W.ik):n.state===W.r0&&(n.atEdgeOfLiveStream()&&n.setPlaybackRate(1),n.stallTime=n.video.currentTime,n.setState(W.nQ))},error(){var r=n["video"],a=r.error,i=(null==a?void 0:a.code)||-1;if((3===i||4===i)&&n.retries<n.maxRetries)n.trigger(W.cM,new le.rG(null,324e3+i-1,a)),n.retries++,s.load(),-1!==n.currentTime&&(d=!1,n.seek(n.currentTime),n.currentTime=-1);else{let e=224e3,t=le.ul;1===i?e+=i:2===i?(t=le.MD,e=221e3):3===i||4===i?(e+=i-1,4===i&&r.src===location.href&&(e=224005)):t=le.ud,j(),n.trigger(W.Ew,new le.rG(t,e,a))}}},F=(Object.keys(Y.Z).forEach(e=>{if(!O[e]){const t=Y.Z[e];O[e]=e=>{t.call(n,e)}}}),t=>{let r=Math.max(0,m);var a=i.qualityLabel;if(t)for(let e=0;e<t.length;e++)if(t[e].default&&(r=e),a&&t[e].label===a)return e;return o.reason="initial choice",o.level.width&&o.level.height||(o.level={}),r}),R=e=>{r=null,g=-1,o.reason||(o.reason="initial choice",o.level={}),d=!1;var t=document.createElement("source");t.src=e.file,s.src!==t.src&&(s.src=e.file)},M=(Object.assign(this,re.ZP,$.Z,J.Z,ae.Z,{renderNatively:(e=i.renderCaptionsNatively,!(!Q.OS.iOS&&!Q.Browser.safari)||e&&Q.Browser.chrome),_eventsOn(){var t=O,r=s;Object.keys(t).forEach(e=>{r.removeEventListener(e,t[e]),r.addEventListener(e,t[e])}),(0,de.Nm)(n,s)},_eventsOff(){he(O,s),(0,de.IP)(s)},detachMedia(){J.Z.detachMedia.call(n),D(),this.removeTracksListener(s.textTracks,"change",this.textTrackChangeHandler),this.removeTracksListener(s.textTracks,"addtrack",this.addTrackHandler),this.videoLoad&&(s.load=this.videoLoad),U()&&this.disableTextTrack()},attachMedia(){if(J.Z.attachMedia.call(n),d=!1,this.seeking=!1,s.loop=Boolean(i.loop),Q.OS.iOS&&!this.videoLoad){const e=this.videoLoad=s.load;s.load=function(){return s.src===location.href?(-1===m&&(m=F(l)),R(l[m]),n.state===W.r0&&s.play(),void n.trigger(W.cM,new le.rG(null,324005,new Error("video.load() was called after setting video.src to empty while playing video")))):e.call(s)}}U()&&this.enableTextTrack(),this.renderNatively&&this.setTextTracks(this.video.textTracks),this.addTracksListener(s.textTracks,"change",this.textTrackChangeHandler)},isLive:()=>s.duration===1/0}),n.setStartDateTime=function(e){n.startDateTime=e;var e=new Date(e).toISOString(),{start:t,end:r}=n.getSeekRange(),e={metadataType:"program-date-time",programDateTime:e,start:t=Math.max(0,t),end:r=Math.max(t,r+10)},t=n.createCue(t,r,JSON.stringify(e));n.addVTTCue({type:"metadata",cue:t})},n.getCurrentTime=function(){return e=s.currentTime,r=n.getSeekRange(),n.isLive()&&((!y||1<Math.abs(k-r.end))&&(t=r,k=t.end,y=Math.min(0,s.currentTime-k),b=(0,oe.z)(),n.ensureMetaTracksActive()),(0,z.s)(r.end-r.start,a))?y:e;var e,t,r},()=>{let a=0;return["buffered","seekable"].forEach(e=>{var t=s[e];let r=t?t.length:0;for(;r--;){const e=Math.max(a,t.end(r));(0,se.xV)(e)&&(a=e)}}),a}),I=()=>{let a=1/0;return["buffered","seekable"].forEach(e=>{var t=s[e];let r=t?t.length:0;for(;r--;){const e=Math.min(a,t.start(r));(0,se.xV)(e)&&(a=e)}}),a},q=(n.getDuration=function(){let e=s.duration;var t;return p&&e===1/0&&0===s.currentTime||isNaN(e)?0:(t=M(),e=n.isLive()&&t&&(t=t-I(),(0,z.s)(t,a))?-t:e)},n.getSeekRange=function(){var e={start:0,end:0};return s.seekable.length?(e.end=M(),e.start=I()):(0,se.xV)(s.duration)&&(e.end=s.duration),e},n.getLiveLatency=function(){let e=null;var t=M();return e=n.isLive()&&t?(t+((0,oe.z)()-b))/1e3-s.currentTime:e},e=>{let t;return t=Array.isArray(e)&&0<e.length?e.map(function(e,t){return{label:e.label||t}}):t});this.stop=function(){D(),j(),this.clearTracks(),Q.Browser.ie&&s.pause(),this.setState(W.bc)},this.destroy=function(){var{addTrackHandler:e,cueChangeHandler:r,textTrackChangeHandler:t}=n,a=s.textTracks;if(n.off(),n.videoLoad&&(s.load=n.videoLoad),T=ce,he(O,s),n.removeTracksListener(s.audioTracks,"change",Z),n.removeTracksListener(a,"change",t),n.removeTracksListener(a,"addtrack",e),r)for(let e=0,t=a.length;e<t;e++)a[e].removeEventListener("cuechange",r)},this.init=function(e){n.retries=0,n.maxRetries=e.adType?0:3,C(e);e=l[m];(p=(0,K.V)(e))&&(n.supportsPlaybackRate=!1,O.waiting=ce),n._eventsOn(),l.length&&"hls"!==l[0].type&&this.sendMediaType(l),o.reason=""},this.preload=function(e){C(e);var e=l[m],t=e.preload||"metadata";"none"!==t&&(s.setAttribute("preload",t),R(e))},this.load=function(e){C(e),s.loop=Boolean(i.loop),V(e.starttime),this.setupSideloadedTracks(e.tracks)},this.play=function(){return T(),L()},this.pause=function(){D(),T=function(){if(s.paused&&s.currentTime&&n.isLive()){const e=M(),t=e-I(),r=!(0,z.s)(t,a),n=e-s.currentTime;r&&e&&(15<n||n<0)&&(u=Math.max(e-10,e-t),(0,se.xV)(u))&&(N(s.currentTime),s.currentTime=u)}},s.pause()},this.seek=function(e){var t=n.getSeekRange();let r=e;if(e<0&&(r+=t.end),d=d||Boolean(M())){x(),c=0;try{n.seeking=!0,n.isLive()&&(0,z.s)(t.end-t.start,a)&&(y=Math.min(0,r-k),e<0)&&(r+=Math.min(12,((0,oe.z)()-b)/1e3)),u=r,N(s.currentTime),s.currentTime=r}catch(e){n.seeking=!1,c=r}}else c=r,Q.Browser.firefox&&s.paused&&L()},this.setVisibility=function(e){(e=Boolean(e))||Q.OS.android?(0,ee.oB)(n.container,{visibility:"visible",opacity:1}):(0,ee.oB)(n.container,{visibility:"",opacity:0})},n.getFullscreen=function(){return(0,de.If)()||Boolean(s.webkitDisplayingFullscreen)},this.setCurrentQuality=function(e){m!==e&&0<=e&&l&&l.length>e&&(m=e,o.reason="api",o.level={},this.trigger(W.aM,{currentQuality:e,levels:q(l)}),i.qualityLabel=l[e].label,V(s.currentTime||0),L())},this.setPlaybackRate=function(e){s.playbackRate=s.defaultPlaybackRate=e},this.getPlaybackRate=function(){return s.playbackRate},this.getCurrentQuality=function(){return m},this.getQualityLevels=function(){return Array.isArray(l)?l.map(e=>(0,G.Z)(e)):[]},this.getName=function(){return{name:"html5"}},this.setCurrentAudioTrack=X,this.getAudioTracks=()=>r||[],this.getCurrentAudioTrack=()=>g}const ue=window.clearTimeout,he=(t,r)=>{Object.keys(t).forEach(e=>{r.removeEventListener(e,t[e])})},y=(Object.assign(r.prototype,e.Z),r.getName=function(){return{name:"html5"}},r);var b=t(6886),L=t(9601),c=t(2957);const g=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/;class f{constructor(){this.relurl=null,this.tagList=[],this.cc=this.sn=this.start=0,this.title=null,this.programDateTime=this.rawProgramDateTime=null}}class p{constructor(e){this.fragments=[],this.url=e,this.live=!0,this.startSN=this.endSN=this.startCC=this.endCC=this.targetduration=this.totalduration=0}get startProgramDateTime(){return this.fragments[0]?this.fragments[0].programDateTime:null}}const u=(e,t)=>{var r,a,i=new p(t);let n,s,o=0,l=0,d=0,c=null,u=new f,h=null;for(g.lastIndex=0;null!==(n=g.exec(e));){const e=n[1];if(e){u.duration=parseFloat(e);const t=(" "+n[2]).slice(1);u.title=t||null,u.tagList.push(t?["INF",e,t]:["INF",e])}else if(n[3]){if((0,se.xV)(u.duration)){const e=o++;u.start=l,u.sn=e,u.cc=d,u.relurl=(" "+n[3]).slice(1),r=u,a=c,r.rawProgramDateTime?r.programDateTime=Date.parse(r.rawProgramDateTime):null!=a&&a.programDateTime&&(r.programDateTime=a.endProgramDateTime),(0,se.xV)(r.programDateTime)||(r.programDateTime=null,r.rawProgramDateTime=null),i.fragments.push(u),c=u,l+=u.duration,u=new f}}else if(n[4])u.rawProgramDateTime=(" "+n[4]).slice(1),u.tagList.push(["PROGRAM-DATE-TIME",u.rawProgramDateTime]),null===h&&(h=i.fragments.length);else{for(n=n[0].match(v),s=1;s<n.length&&void 0===n[s];s++);const e=(" "+n[s+1]).slice(1),t=(" "+n[s+2]).slice(1);switch(n[s]){case"#":u.tagList.push(t?[e,t]:[e]);break;case"MEDIA-SEQUENCE":o=i.startSN=parseInt(e,10);break;case"TARGETDURATION":i.targetduration=parseFloat(e);break;case"ENDLIST":i.live=!1;break;case"DIS":d++,u.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(e,10);break;case"MAP":{const e=u["rawProgramDateTime"];(u=new f).rawProgramDateTime=e;break}}}}if(l){if(c&&!c.relurl&&(i.fragments.pop(),l-=c.duration),i.totalduration=l,i.endSN=o-1,i.startCC=i.fragments[0]?i.fragments[0].cc:0,i.endCC=d,h){var m=i.fragments;var T=h;let t=m[T];for(let e=T-1;0<=e;e--){const T=m[e];T.programDateTime=t.programDateTime-1e3*T.duration,t=T}}return i}throw new Error("Invalid playlist")},x=window.performance,w=window.URL,d=(e,t=0)=>{e.errors++,t&&e.errors>=t&&(e.ignore=!0)};class S{constructor(e,t){this.video=e,this.endTime=0,this.fetchTime=0,this.parsedTime=0,this.matches={},this.parent={src:"",url:null,topDomain:"",origin:"",pathname:""},this.xhr=null,this.onLevelLoaded=t,this.onResourceBufferFull=e=>{this.run(this.endTime),x.clearResourceTimings()},x.addEventListener("resourcetimingbufferfull",this.onResourceBufferFull)}run(a){const{fetchTime:i,parent:t,video:n}=this,s=n["src"];if(s&&s.startsWith("http")&&document.body.contains(n)){if(t.src!==s){this.matches={},t.src=s;const a=t.url=new w(s);t.topDomain=a.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"),t.origin=a.origin,t.pathname=a.pathname}const o=x.getEntriesByType("resource");let e=o.length;for(;e--;){const n=o[e];if(n.responseEnd<=i)break;if("video"===n.initiatorType){const i=n.name;if(i===s){this.fetchTime=Math.max(n.fetchStart,this.fetchTime);break}const o=(0,c.AO)(i);if("ts"!==o&&"aac"!==o&&"vtt"!==o&&"key"!==o&&"mp4"!==o&&"m4s"!==o&&"m4v"!==o&&"m4a"!==o){let r=this.matches[i];if(!r){const a="m3u8"===o,n=i.includes(t.topDomain),s=n&&i.startsWith(t.origin),l=s&&i.startsWith(t.origin+t.pathname);r=this.matches[i]={count:0,ignore:!1,errors:0,onlyVideo:!1,matches:{m3u8:a,topLevelDomain:n,origin:s,path:l}}}r.count++,r.onlyVideo=document.body.querySelectorAll("video audio").length<2,(r.onlyVideo||r.matches.path||r.matches.m3u8&&r.matches.topLevelDomain)&&(this.xhr&&(0,b.E)(this.xhr),this.xhr=(0,b.h)({url:i,responseType:"text",oncomplete:t=>{var t=t.responseText;if(t){let e;try{e=u(t,i)}catch(e){d(r,1)}null!=(t=e)&&null!=(t=t.fragments)&&t.length&&(t=this.parsedTime,this.parsedTime=a,this.onLevelLoaded(e,t,a))}else d(r,3)},onerror(){d(r,3)}})),this.fetchTime=n.responseEnd}}}50<o.length&&(0===this.fetchTime||5e3<x.now()-this.fetchTime)&&x.clearResourceTimings(),this.endTime=a}}destroy(){this.video=null,this.matches=null,this.onLevelLoaded=null,x.removeEventListener("resourcetimingbufferfull",this.onResourceBufferFull),this.onResourceBufferFull=null,this.xhr&&((0,b.E)(this.xhr),this.xhr=null)}}var D=t(3343);function a(e,t,r){y.call(this,e,t,r);const s=this,a=s.init,i=s.load,n=s.destroy,l=s.setStartDateTime,o=s.getSeekRange,d=(this.processPlaylistMetadata=D.q,e=>{var t=s.fairplay.session;let r=e;"string"==typeof r&&(r=(e=>{var t=(0,k.t)(e),r=t.length,a=new Uint8Array(new ArrayBuffer(r));for(let e=0;e<r;e++)a[e]=t.charCodeAt(e);return a})(r)),t.update(r)}),c=e=>{e=s.fairplay.extractKey(e);"function"==typeof e.then?e.then(d):d(e)},u=e=>{const t=s.fairplay,r=e.target,a={},i=((r.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).forEach(e=>{var e=e.split(": "),t=e.shift();a[t]=e.join(": ")}),{data:r.response,headers:a}),n=t.licenseResponseFilter.call(e.target,i,t);n&&"function"==typeof n.then?n.then(()=>{c(i.data)}):c(i.data)},h=e=>{s.trigger(W.Ew,new le.rG(le.H4,226e3+(0,L.E)(e.currentTarget.status),e))},m=t=>{Object.keys(t.headers).forEach(e=>{t.setRequestHeader(e,t.headers[e])}),t.send(t.body)},T=e=>{const t=s.fairplay,r=e.target,a=e.message,i=new XMLHttpRequest;i.responseType=t.licenseResponseType,i.addEventListener("load",u,!1),i.addEventListener("error",h,!1);var n="function"==typeof t.processSpcUrl?t.processSpcUrl(_(t.initData)):t.processSpcUrl,n=(i.open("POST",n,!0),i.body=t.licenseRequestMessage(a,r),i.headers={},[].concat(t.licenseRequestHeaders||[]).forEach(e=>{i.setRequestHeader(e.name,e.value)}),t.licenseRequestFilter.call(e.target,i,t));n&&"function"==typeof n.then?n.then(()=>{m(i)}):m(i)},g=e=>{s.trigger(W.Ew,new le.rG(le.H4,225650,e))},f=(e,t,r,a)=>{a.code+=225e3,a.key=le.H4,s.trigger(W.Ew,a)},v=e=>{const o=e.target,l=e.initData;if(o.webkitKeys||o.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0")),!o.webkitKeys)throw new Error("Could not create MediaKeys");const d=s.fairplay;d.initData=l,(0,b.h)(d.certificateUrl,function(e){e=new Uint8Array(e.response);let t=d.extractContentId(_(l));"string"==typeof t&&(t=(r=>{var e=new ArrayBuffer(2*r.length),a=new Uint16Array(e);for(let e=0,t=r.length;e<t;e++)a[e]=r.charCodeAt(e);return a})(t));s=l,n=t,e=e,r=0,a=new ArrayBuffer(s.byteLength+4+n.byteLength+4+e.byteLength),i=new DataView(a),new Uint8Array(a,0,s.byteLength).set(s),r+=s.byteLength,i.setUint32(r,n.byteLength,!0),r+=4,(s=new Uint16Array(a,r,n.length)).set(n),r+=s.byteLength,i.setUint32(r,e.byteLength,!0),r+=4,new Uint8Array(a,r,e.byteLength).set(e);var r,a,i,n=new Uint8Array(a,0,a.byteLength),s=o.webkitKeys.createSession("video/mp4",n);if(!s)throw new Error("Could not create key session");C(s,"webkitkeymessage",T),C(s,"webkitkeyerror",g),d.session=s},f,{responseType:"arraybuffer"})},p=e=>{var t,e=e.sources[0];s.fairplay&&Object.is(s.fairplay.source,e)||(null!=(t=e.drm)&&t.fairplay?(s.fairplay=Object.assign({},{certificateUrl:"",processSpcUrl:"",licenseResponseType:"arraybuffer",licenseRequestHeaders:[],licenseRequestMessage:e=>e,licenseRequestFilter(){},licenseResponseFilter(){},extractContentId:e=>e.split("skd://")[1],extractKey:e=>new Uint8Array(e)},t.fairplay),s.fairplay.source=e,s.fairplay.destroy=function(){E(s.video,"webkitneedkey",v);var e=this.session;e&&(E(e,"webkitkeymessage",T),E(e,"webkitkeyerror",g))},C(s.video,"webkitneedkey",v)):s.fairplay&&(s.fairplay.destroy(),s.fairplay=null))};this.init=function(e){p(e),a.call(this,e)},this.load=function(e){p(e),i.call(this,e)},this.destroy=function(e){this.fairplay&&(this.fairplay.destroy(),this.fairplay=null),this.metaLoader&&(this.metaLoader.destroy(),this.metaLoader=null),n.call(this,e)},this.setStartDateTime=function(s){const{video:o,loadAndParseHlsMetadata:e}=this;var t;e&&(t=o,Boolean(w&&t&&t.getStartDate&&x&&x.getEntriesByType&&x.clearResourceTimings&&x.addEventListener))&&(t=(t=t.getStartDate()).getTime?t.getTime():NaN,!isNaN(t))&&(this.startDateTime=s,(this.metaLoader=new S(o,(e,a,i)=>{const{fragments:t,startProgramDateTime:r}=e,n=(r-s)/1e3;t.forEach(r=>{const t=r.start=r.startPTS=r.start+n;if(t>=a&&t<i&&r.tagList&&(r.tagList.forEach(([e,t])=>this.processPlaylistMetadata(e,t,r)),o.duration===1/0)&&o.buffered&&o.buffered.start(0)){const r=o.buffered.start(0),t=this._tracksById.nativemetadata;if(null!=t&&t.cues){const o=t.cues;for(let e=0;e<o.length&&o[e].endTime<r;e++)t.removeCue(o[e])}}})})).run(0)),l.call(this,s)},this.getSeekRange=function(){var e=this["metaLoader"],t=o.call(this);return e&&e.endTime!==t.end&&e.run(t.end),t}}const _=e=>{e=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,e)},E=(e,t,r)=>{e&&e.removeEventListener(t,r,!1)},C=(e,t,r)=>{E(e,t,r),e.addEventListener(t,r,!1)},n=(Object.assign(a.prototype,y.prototype),a.getName=y.getName,a)}}]);