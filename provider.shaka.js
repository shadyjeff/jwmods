(self.webpackChunkjwplayer=self.webpackChunkjwplayer||[]).push([[371],{8377:(e,t,n)=>{"use strict";n.d(t,{M:()=>i,_:()=>r});const i=function(e,t){var n=e.kind||"cc";return e.default||e.defaulttrack?"default":e._id||e.file||n+t},r=function(e,t){let n=e.label||e.name||e.language;return n||(n="Unknown CC",1<(t+=1)&&(n+=` [${t}]`)),{label:n,unknownCount:t}}},6103:(e,t,d)=>{"use strict";d.d(t,{VS:()=>a,xl:()=>r});var n=d(7477),h=d(2894),i=d(6886),f=d(7941),p=d(7387),g=d(2957),m=d(4446);const v=e=>{throw new m.rG(null,e)},y=function(e){return e.map(e=>new n.Z(e.begin,e.end,e.text))},r=function(u,l,c){u.xhr=(0,i.h)(u.file,function(i){{var r=i,a=u,o=l,s=c;let e,t,n=r.responseXML?r.responseXML.firstChild:null;if(n)for("xml"===(0,f.r1)(n)&&(n=n.nextSibling);n&&n.nodeType===n.COMMENT_NODE;)n=n.nextSibling;try{if(n&&"tt"===(0,f.r1)(n)){if(!r.responseXML)throw new Error("Empty XML response");e=function(t){t||v(306007);var n=[];let i=t.getElementsByTagName("p"),r=30;const a=t.getElementsByTagName("tt");if(null!=a&&a[0]){const t=parseFloat(a[0].getAttribute("ttp:frameRate")||"");isNaN(t)||(r=t)}i||v(306005),i.length||(i=t.getElementsByTagName("tt:p")).length||(i=t.getElementsByTagName("tts:p"));for(let e=0;e<i.length;e++){var o=i[e],s=o.getElementsByTagName("br");for(let e=0;e<s.length;e++){const i=s[e];null!=i&&i.parentNode&&i.parentNode.replaceChild(t.createTextNode("\r\n"),i)}var u=o.innerHTML||o.textContent||o.text||"",u=(0,g.fy)(u).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(u){const t=o.getAttribute("begin")||"",i=o.getAttribute("dur")||"",a=o.getAttribute("end")||"",l={begin:(0,g.m9)(t,r),text:u};a?l.end=(0,g.m9)(a,r):i&&(l.end=(l.begin||0)+(0,g.m9)(i,r)),n.push(l)}}return n.length||v(306005),n}(r.responseXML),t=y(e),delete a.xhr,o(t)}else{const f=r.responseText;0<=f.indexOf("WEBVTT")?d.e(347).then(function(e){return d(2776).default}.bind(null,d)).catch((0,h.Jt)(301131)).then(e=>{e=new e(window);t=[],e.oncue=function(e){t.push(e)},e.onflush=function(){delete a.xhr,o(t)},e.parse(f)}).catch(e=>{delete a.xhr,s((0,m.Mm)(null,m.Y7,e))}):(e=(0,p.Z)(f),t=y(e),delete a.xhr,o(t))}}catch(r){delete a.xhr,s((0,m.Mm)(null,m.Y7,r))}}},(e,t,n,i)=>{c((0,m.l9)(i,m.Y7))})},a=function(e){e&&e.forEach(e=>{var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t)&&t.abort(),delete e.xhr})}},7387:(e,t,n)=>{"use strict";n.d(t,{Z:()=>function(e){var t=[];let n=(e=(0,a.fy)(e)).split("\r\n\r\n");1===n.length&&(n=e.split("\n\n"));for(let e=0;e<n.length;e++)if("WEBVTT"!==n[e]){const a=i(n[e]);a.text&&t.push(a)}return t}});var a=n(2957);const i=e=>{var t={};let n=e.split("\r\n"),i=1;if(0<(n=1===n.length?e.split("\n"):n)[0].indexOf(" --\x3e ")&&(i=0),n.length>i+1&&n[i+1]){const e=n[i],r=e.indexOf(" --\x3e ");0<r&&(t.begin=(0,a.m9)(e.substr(0,r)),t.end=(0,a.m9)(e.substr(r+5)),t.text=n.slice(i+1).join("\r\n"))}return t}},7477:(v,e,t)=>{"use strict";t.d(e,{Z:()=>i});let n=window.VTTCue;const y=e=>"string"==typeof e&&!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[e.toLowerCase()]&&e.toLowerCase();if(!n){const v="auto";(n=function(e,t,n){var i=this;i.hasBeenReset=!1;let r="",a=!1,o=e,s=t,u=n,l=null,c="",d=!0,h=v,f="start",p=v,g=100,m="middle";Object.defineProperty(i,"id",{enumerable:!0,get:()=>r,set(e){r=""+e}}),Object.defineProperty(i,"pauseOnExit",{enumerable:!0,get:()=>a,set(e){a=Boolean(e)}}),Object.defineProperty(i,"startTime",{enumerable:!0,get:()=>o,set(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"endTime",{enumerable:!0,get:()=>s,set(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"text",{enumerable:!0,get:()=>u,set(e){u=""+e,this.hasBeenReset=!0}}),Object.defineProperty(i,"region",{enumerable:!0,get:()=>l,set(e){l=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"vertical",{enumerable:!0,get:()=>c,set(e){e="string"==typeof(e=e)&&!!{"":!0,lr:!0,rl:!0}[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");c=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"snapToLines",{enumerable:!0,get:()=>d,set(e){d=Boolean(e),this.hasBeenReset=!0}}),Object.defineProperty(i,"line",{enumerable:!0,get:()=>h,set(e){if("number"!=typeof e&&e!==v)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"lineAlign",{enumerable:!0,get:()=>f,set(e){e=y(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"position",{enumerable:!0,get:()=>p,set(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"size",{enumerable:!0,get:()=>g,set(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}}),Object.defineProperty(i,"align",{enumerable:!0,get:()=>m,set(e){e=y(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}}),i.displayState=void 0}).prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}const i=n},2728:(e,t,n)=>{"use strict";n.d(t,{Z:()=>function(t,e){let n,i=e;return{start(){this.stop(),n=window.setInterval(()=>{var e=t.getBandwidthEstimate();(0,a.qh)(e)&&(i=e,t.trigger(r.qG,{bandwidthEstimate:i}))},1e3)},stop(){clearInterval(n)},getEstimate:()=>i}}});var r=n(1643),a=n(6042)},548:(e,t,n)=>{"use strict";n.d(t,{Zv:()=>i,i0:()=>a,pR:()=>r});const i=1,r=i+1,a=25},4506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=e=>({bitrate:e.bitrate,label:e.label,width:e.width,height:e.height})},3328:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(6103),l=n(8377);const r={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"},c=(e,t)=>{var n=e.length;let i,r,a,o="",s=t||0;for(;s<n;)if(0!==(i=e[s++])&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:r=e[s++],o+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e[s++],a=e[s++],o+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&a)<<0)}return o},d=e=>{e=(t=>{let n="0x";for(let e=0;e<t.length;e++)t[e]<16&&(n+="0"),n+=t[e].toString(16);return parseInt(n,16)})(e);return 127&e|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3};var h=n(8348),f=n(1643),a=n(6042);function p(e){const t=e.target,{activeCues:n,cues:i}=t,r=t._id,a=this._cues,o=this._activeCues;if(null!=i&&i.length){const e=a[r];a[r]=Array.prototype.slice.call(i),this.parseNativeID3Cues(i,e)}else delete a[r];if(null!=n&&n.length){const e=o[r],t=o[r]=Array.prototype.slice.call(n);this.triggerActiveCues(t,e)}else delete o[r]}const o=(n,e,i)=>{null!=e&&e.length&&(0,a.S6)(e,function(t){var e=t._id||"";if(i&&(t._id=void 0),!h.Browser.ie&&!h.Browser.safari||!n||!/^(native|subtitle|cc)/.test(e)){if(h.Browser.ie&&"disabled"===t.mode||(t.mode="disabled",t.mode="hidden"),t.cues)for(let e=t.cues.length;e--;)t.removeCue(t.cues[e]);t.embedded||(t.mode="disabled"),t.inuse=!1}})},g=e=>/^native(?:captions|subtitles)/.test(e),m=e=>"captions"===e||"subtitles"===e,v=(t,n,i)=>{if(h.Browser.ie){let e=i;(t||"metadata"===n.kind)&&(e=new window.TextTrackCue(i.startTime,i.endTime,i.text),i.value)&&(e.value=i.value);var r=n,a=e,o=[],s=r.mode,u=(r.mode="hidden",r.cues);if(u)for(let e=u.length-1;0<=e&&u[e].startTime>a.startTime;e--)o.unshift(u[e]),r.removeCue(u[e]);try{r.addCue(a),o.forEach(e=>r.addCue(e))}catch(r){console.error(r)}r.mode=s}else try{n.addCue(i)}catch(t){console.error(t)}},y=(e,t)=>e.startTime===t.startTime&&e.endTime===t.endTime&&e.text===t.text&&e.data===t.data&&JSON.stringify(e.value)===JSON.stringify(t.value),b=e=>{var t=(a=>{const o={};if(!("value"in a)&&"data"in a&&a.data instanceof ArrayBuffer){const o=new Uint8Array(a.data);let t=o.length,e=(a={value:{key:"",data:""}},10);for(;e<14&&e<o.length&&0!==o[e];)a.value.key+=String.fromCharCode(o[e]),e++;let n=19,i=o[n],r=(3!==i&&0!==i||(i=o[++n],t--),0);if(1!==i&&2!==i)for(let e=n+1;e<t;e++)if(0===o[e]){r=e-n;break}var s,u;0<r?(s=c(o.subarray(n,n+=r),0),"PRIV"===a.value.key?("com.apple.streaming.transportStreamTimestamp"===s?(u=1&d(o.subarray(n,n+=4)),u=d(o.subarray(n,n+=4))+(u?4294967296:0),a.value.data=u):a.value.data=c(o,n+1),a.value.info=s):(a.value.info=s,a.value.data=c(o,n+1))):(u=o[n],a.value.data=(1===u||2===u?(e,t)=>{var n=e.length-1;let i="",r=t||0;for(;r<n;)254===e[r]&&255===e[r+1]||(i+=String.fromCharCode((e[r]<<8)+e[r+1])),r+=2;return i}:c)(o,n+1))}if(function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}(r,a.value.key)&&(o[r[a.value.key]]=a.value.data),a.value.info){let e=o[a.value.key];e!==Object(e)&&(e={},o[a.value.key]=e),e[a.value.info]=a.value.data}else o[a.value.key]=a.value.data;return o})(e);return{metadataType:"id3",metadataTime:e.startTime,metadata:t}},s={_itemTracks:null,_textTracks:null,_currentTextTrackIndex:-1,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_unknownCount:0,_activeCues:null,_cues:null,textTrackChangeHandler:null,addTrackHandler:null,cueChangeHandler:null,renderNatively:!1,_initTextTracks(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._cues={},this._activeCues={},this._unknownCount=0},addTracksListener(e,t,n){e&&(this.removeTracksListener(e,t,n),this.instreamMode||(e.addEventListener?e.addEventListener(t,n):e["on"+t]=n))},removeTracksListener(e,t,n){e&&(e.removeEventListener&&n?e.removeEventListener(t,n):e["on"+t]=null)},clearTracks(){(0,i.VS)(this._itemTracks);const t=this["_tracksById"];if(t&&Object.keys(t).forEach(e=>{0===e.indexOf("nativemetadata")&&(e=t[e],this.cueChangeHandler&&e.removeEventListener("cuechange",this.cueChangeHandler),o(this.renderNatively,[e],!0))}),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCues={},this._cues={},this.renderNatively){const t=this.video.textTracks;this.textTrackChangeHandler&&this.removeTracksListener(t,"change",this.textTrackChangeHandler),o(this.renderNatively,t,!0)}},clearMetaCues(){const{_tracksById:t,_cachedVTTCues:n}=this;t&&n&&Object.keys(t).forEach(e=>{0===e.indexOf("nativemetadata")&&(e=t[e],o(this.renderNatively,[e],!1),e.mode="hidden",e.inuse=!0,e._id)&&(n[e._id]={})})},clearCueData(e){var t=this._cachedVTTCues;null!=t&&t[e]&&(t[e]={},this._tracksById)&&(this._tracksById[e].data=[])},disableTextTrack(){var e,t=this.getCurrentTextTrack();t&&(t.mode="disabled",(e=t._id)&&g(e)||this.renderNatively&&h.OS.iOS)&&(t.mode="hidden")},enableTextTrack(){var e=this.getCurrentTextTrack();e&&(e.mode="showing")},getCurrentTextTrack(){if(this._textTracks)return this._textTracks[this._currentTextTrackIndex]},getSubtitlesTrack(){return this._currentTextTrackIndex},addTextTracks(e){const n=[];return e&&(this._textTracks||this._initTextTracks(),e.forEach(e=>{if(!(e.includedInManifest||e.kind&&!m(e.kind))){const t=this._createTrack(e);this._addTrackToList(t),n.push(t),e.file&&(e.data=[],(0,i.xl)(e,e=>{t.sideloaded=!0,this.addVTTCuesToTrack(t,e)},e=>{this.trigger(f.cM,e)}))}}),null!=this)&&null!=(e=this._textTracks)&&e.length&&this.trigger(f.jt,{tracks:this._textTracks}),n},setTextTracks(n){var e;if(this._currentTextTrackIndex=-1,n){if(this._textTracks){const n=this._tracksById;this._activeCues={},this._cues={},this._unknownCount=0,this._textTracks=this._textTracks.filter(e=>{var t=e._id;return this.renderNatively&&t&&g(t)?(delete n[t],!1):(e.name&&0===e.name.indexOf("Unknown")&&this._unknownCount++,0===t.indexOf("nativemetadata")&&"com.apple.streaming"===e.inBandMetadataTrackDispatchType&&delete n[t],!0)},this)}else this._initTextTracks();if(n.length){let t=0;for(var i=n.length,r=this._tracksById,a=this._cuesByTrackId;t<i;t++){var o,s=n[t];let e=s._id||"";if(!e){if(!1===s.inuse&&m(s.kind)&&this.renderNatively){s._id="native"+s.kind+t;continue}if(m(s.kind)||"metadata"===s.kind){if(e=s._id="native"+s.kind+t,!s.label&&"captions"===s.kind){const n=(0,l._)(s,this._unknownCount);s.name=n.label,this._unknownCount=n.unknownCount}}else e=s._id=(0,l.M)(s,this._textTracks?this._textTracks.length:0);if(r[e])continue;s.inuse=!0}if(s.inuse&&!r[e])if("metadata"===s.kind){s.mode="hidden";const n=this.cueChangeHandler=this.cueChangeHandler||p.bind(this);s.removeEventListener("cuechange",n),s.addEventListener("cuechange",n),r[e]=s}else if(m(s.kind)){const n=s.mode;if(s.mode="hidden",s.cues&&s.cues.length||!s.embedded){if("disabled"===n&&!g(e)||(s.mode=n),a[e]&&!a[e].loaded){for(var u=a[e].cues;o=u.shift();)v(this.renderNatively,s,o);s.mode=n,a[e].loaded=!0}this._addTrackToList(s)}}}}this.renderNatively&&this.addTrackListeners(n),null!=this&&null!=(e=this._textTracks)&&e.length&&this.trigger(f.jt,{tracks:this._textTracks})}},addTrackListeners(e){var t=this.textTrackChangeHandler=this.textTrackChangeHandler||function(){var e=this.video.textTracks,t=(0,a.hX)(e,function(e){return(e.inuse||!e._id)&&m(e.kind)});if(!this._textTracks||function(t){var e=this._textTracks,n=this._tracksById;if(t.length>e.length)return!0;for(let e=0;e<t.length;e++){var i=t[e];if(!i._id||!n[i._id])return!0}return!1}.call(this,t))this.setTextTracks(e);else{let t=-1;for(let e=0;e<this._textTracks.length;e++)if("showing"===this._textTracks[e].mode){t=e;break}t!==this._currentTextTrackIndex&&this.setSubtitlesTrack(t+1)}}.bind(this);this.removeTracksListener(e,"change",t),this.addTracksListener(e,"change",t),(h.Browser.edge&&h.Browser.ie||h.Browser.firefox)&&(t=this.addTrackHandler=this.addTrackHandler||function(e){e=e.track;null!=e&&e._id||this.setTextTracks(this.video.textTracks)}.bind(this),this.removeTracksListener(e,"addtrack",t),this.addTracksListener(e,"addtrack",t))},setupSideloadedTracks(e){var t;this.renderNatively&&((t=(e=e||null)===this._itemTracks)||(0,i.VS)(this._itemTracks),this._itemTracks=e)&&!t&&(this.disableTextTrack(),this._clearSideloadedTextTracks(),this.addTextTracks(e))},setSubtitlesTrack(e){var t;this.renderNatively?this._textTracks&&(0===e&&this._textTracks.forEach(e=>{e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1)&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,(t=this.getCurrentTextTrack())&&(t.mode="showing"),this.trigger(f.UF,{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})):this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1)},createCue:(e,t,n)=>new(window.VTTCue||window.TextTrackCue)(e,Math.max(t||0,e+.25),n),addVTTCue(e,t){this._tracksById||this._initTextTracks();var n=e.track||"native"+e.type;let i=this._tracksById[n];var r="captions"===e.type?"Unknown CC":"ID3 Metadata",a=e.cue;if(!i){const t={kind:e.type,_id:n,label:r,default:!1};this.renderNatively||"metadata"===t.kind?((i=this._createTrack(t)).embedded=!0,this.setTextTracks(this.video.textTracks)):i=this.addTextTracks([t])[0]}if(this._cacheVTTCue(i,a,t)){const e=this.renderNatively||"metadata"===i.kind;return e?v(e,i,a):i.data.push(a),a}return null},addVTTCuesToTrack(t,n){if(this.renderNatively){var t=t._id,i=this._tracksById;let e=this._cuesByTrackId;var r,a=i[t];if(a){if(null==(i=e)||null==(i=i[t])||!i.loaded)for(e[t]={cues:n,loaded:!0};r=n.shift();)v(this.renderNatively,a,r)}else(e=e||(this._cuesByTrackId={}))[t]={cues:n,loaded:!1}}},parseNativeID3Cues(r,a){const o=r[r.length-1];if(!a||a.length!==r.length||!o._parsed&&!y(a[a.length-1],o)){var s=[],u=[];let t=-1,n=-1,i;for(let e=0;e<r.length;e++){const o=r[e];if(!o._extended&&Boolean(o.data||o.value)){if(o.startTime!==n||null===o.endTime){i=n,n=o.startTime;const r=s[t],a=(s[++t]=[],u[t]=[],n-i);if(r&&0<a)for(let e=0;e<r.length;e++){const o=r[e];o.endTime=n,o._extended=!0}}s[t].push(o),o._parsed||(u[t].push(o),o.endTime-n<.25&&(o.endTime=n+.25),o._parsed=!0)}}for(let e=0;e<u.length;e++)u[e].length&&u[e].forEach(e=>{e=b(e);this.trigger(f.O1,e)})}},triggerActiveCues(e,n){e=e.filter(t=>{if(null==n||!n.some(e=>y(t,e))){if(t.data)return!0;var e=t.text?(e=>{let t;try{t=JSON.parse(e.text)}catch(e){return null}var n={metadataType:t.metadataType,metadataTime:e.startTime,metadata:t};return t.programDateTime&&(n.programDateTime=t.programDateTime),n})(t):null;if(e)"emsg"===e.metadataType&&(e.metadata=e.metadata||{},e.metadata.messageData=t.value),this.trigger(f.rx,e);else if(t.value)return!0}return!1});e.length&&e.forEach(e=>{e=b(e);this.trigger(f.rx,e)})},ensureMetaTracksActive(){const t=this.video.textTracks,n=t.length;for(let e=0;e<n;e++){const n=t[e];"metadata"===n.kind&&"disabled"===n.mode&&(n.mode="hidden")}},_cacheVTTCue(e,t,n){const i=e.kind,r=e._id,a=this._cachedVTTCues;a[r]||(a[r]={});var o=a[r];let s;switch(i){case"captions":case"subtitles":{s=n||Math.floor(20*t.startTime);const e="_"+(t.line||"auto"),i=Math.floor(20*t.endTime),r=o[s+e]||o[s+1+e]||o[s-1+e];return!(r&&Math.abs(r-i)<=1||(o[s+e]=i,0))}case"metadata":{const e=t.data?new Uint8Array(t.data).join(""):t.text;return!o[s=n||t.startTime+e]&&(o[s]=t.endTime,!0)}default:return!1}},_addTrackToList(e){this._textTracks.push(e),this._tracksById[e._id]=e},_createTrack(e){let t;const n=(0,l._)(e,this._unknownCount),i=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===e.kind){const n=this.video.textTracks;(t=(t=(0,a._e)(n,{label:i}))||this.video.addTextTrack(e.kind,i,e.language||"")).default=e.default,t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=(0,l.M)(e,this._textTracks?this._textTracks.length:0)),t},_clearSideloadedTextTracks(){if(this._textTracks){var e=this._textTracks.filter(e=>e.embedded||"subs"===e.groupid);this._initTextTracks();const t=this._tracksById;e.forEach(e=>{t[e._id]=e}),this._textTracks=e}}}},9601:(e,t,n)=>{"use strict";n.d(t,{E:()=>o,Z:()=>function(e,t,n){let i=e+1e3,r=a.ul;return 0<t?(403===t&&(r=a.H4),i+=o(t)):"http:"===(""+n).substring(0,5)&&"https:"===document.location.protocol?i+=12:0===t&&(i+=11),{code:i,key:r}}});var a=n(4446);const o=e=>400<=e&&e<600?e:6},5099:(e,t,n)=>{"use strict";n.d(t,{Z:()=>function(a){return new Promise(function(t,n){if(a.paused)return n(o("NotAllowedError",0,"play() failed."));let i;const e=function(e){if(i(),"playing"!==e.type){const t=`The play() request was interrupted by a "${e.type}" event.`;return"error"===e.type?n(o("NotSupportedError",9,t)):n(o("AbortError",20,t))}t()},r=function(){a.addEventListener("playing",e),a.addEventListener("abort",e),a.addEventListener("error",e),a.addEventListener("pause",e)};i=function(){a.removeEventListener("play",r),a.removeEventListener("playing",e),a.removeEventListener("pause",e),a.removeEventListener("abort",e),a.removeEventListener("error",e)},a.addEventListener("play",r)})}});const o=(e,t,n)=>{n=new Error(n);return n.name=e,n.code=t,n}},5256:(e,t,n)=>{"use strict";n.d(t,{_T:()=>a,c3:()=>o,ji:()=>r,s_:()=>s});function i(e,i){return e.some(function(t){let n;for(let e=0;e<i.length&&!(n=t[i[e]]);e++);var e;return!!n&&(e=this[n]||!1,this[n]=!0,e)},{})}const a=e=>Math.floor(e/1e3),r=(e,t,n)=>{return e?((e,t)=>{let n=null;var i;return n=t&&e&&(i=Object.keys(e)).length&&(i=((e,t)=>{let n,i=null,r=1/0;return e.forEach(e=>{(n=Math.abs(parseFloat(e)-t))<r&&(i=e,r=n)}),i})(i,a(t)))?e[i]:n})(t,t=e.bitrate||e.bandwidth)||e.label||((e,t,n)=>{if(!e&&!t)return"";let i="",r="";return t&&(r=a(t)+" kbps",i=r),e&&(i=e+"p",t)&&n&&(i+=` (${r})`),i})(e.height,t,n):""},o=e=>!!Array.isArray(e)&&i(e,["height","bitrate","bandwidth"]),s=e=>!!Array.isArray(e)&&i(e,["label"])},686:(e,t,n)=>{"use strict";n.d(t,{s:()=>r,v:()=>a});const i=e=>void 0===e?120:Math.max(e,0),r=(e,t)=>e!==1/0&&Math.abs(e)>=Math.max(i(t),0),a=(e,t)=>{let n="VOD";return e===1/0?n="LIVE":e<0&&(n=r(e,i(t))?"DVR":"LIVE"),n}},3949:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var d=n(8348),h=n(974),i=n(9974);const r={container:null,volume(e){this.video.volume=Math.min(Math.max(0,e/100),1)},mute(e){this.video.muted=Boolean(e),this.video.muted||this.video.removeAttribute("muted")},resize(n,i,r){var a=this["video"],{videoWidth:o,videoHeight:s}=a;if(n&&i&&o&&s){var u={objectFit:"",width:"",height:""},l=n/i,c=o/s;if("uniform"===r&&(c<l?n-n/(l/c):i-i/(c/l))<6&&(u.objectFit="fill",r="exactfit"),d.Browser.ie||d.OS.iOS&&(d.OS.version.major||0)<9||d.Browser.androidNative)if("uniform"!==r){u.objectFit="contain";let e=1,t=1;"none"===r?e=t=c<l?Math.ceil(100*s/i)/100:Math.ceil(100*o/n)/100:"fill"===r?e=t=c<l?l/c:c/l:"exactfit"===r&&(t=c<l?(e=l/c,1):(e=1,c/l)),(0,h.vs)(a,`matrix(${e.toFixed(2)}, 0, 0, ${t.toFixed(2)}, 0, 0)`)}else(u.top=u.left=u.margin="",h.vs)(a,"");(0,h.oB)(a,u)}},getContainer(){return this.container},setContainer(e){this.container=e,this.video.parentNode!==e&&e.appendChild(this.video)},removeFromContainer(){var{container:e,video:t}=this;this.container=null,e&&e===t.parentNode&&e.removeChild(t)},remove(){this.stop(),this.destroy(),this.removeFromContainer()},atEdgeOfLiveStream(){return!!this.isLive()&&(0,i.Z)(this.video.buffered)-this.video.currentTime<=2}}},186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={_eventsOn(){},_eventsOff(){},attachMedia(){this._eventsOn()},detachMedia(){return this._eventsOff()}}},8702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(1643),i=n(1261);const r={canplay(){this.renderNatively&&this.setTextTracks(this.video.textTracks),this.trigger(a.Jl)},play(){this.stallTime=-1,this.video.paused||this.state===a._5||this.state===a.r0||this.setState(a.ik)},loadedmetadata(){var e={metadataType:"media",duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth,seekRange:this.getSeekRange()},t=this.drmUsed;t&&(e.drm=t),this.trigger(a.rx,e)},timeupdate(){const e=this.video.currentTime,t=this.getCurrentTime(),n=this.getDuration();if(!isNaN(n)){this.seeking||this.video.paused||this.state!==a.nQ&&this.state!==a.ik||this.stallTime===e||(this.stallTime=-1,this.setState(a.r0),this.trigger(a.Gj));var i={position:t,duration:n,currentTime:e,seekRange:this.getSeekRange(),metadata:{currentTime:e}},r=this.getLiveLatency();if(null!==r&&(i.latency=r,this.getTargetLatency)){const e=this.getTargetLatency();null!==e&&(i.targetLatency=e)}(this.state===a.r0||this.seeking&&this.state!==a.bc)&&this.trigger(a.R2,i)}},click(e){this.trigger(a.ot,e)},volumechange(){var e=this.video;this.trigger(a.yH,{volume:Math.round(100*e.volume)}),this.trigger(a.gy,{mute:e.muted})},seeking(){if(this.state===a.ik){var e=this.video.buffered.length?this.video.buffered.start(0):-1;if(this.video.currentTime===e)return}else if(this.state===a.bc)return;this.seeking=!0},seeked(){this.seeking&&(this.seeking=!1,this.trigger(a.aQ))},playing(){-1===this.stallTime&&this.setState(a.r0),this.trigger(a.Gj)},pause(){this.state===a.xQ||this.video.ended||this.video.error||this.video.currentTime!==this.video.duration&&this.setState(a._5)},progress(){var e,t=this.getDuration();t<=0||t===1/0||(e=this.video.buffered)&&0!==e.length&&(e=(0,i.v)(e.end(e.length-1)/t,0,1),this.trigger(a.uT,{bufferPercent:100*e,position:this.getCurrentTime(),duration:t,currentTime:this.video.currentTime,seekRange:this.getSeekRange()}))},ratechange(){this.trigger(a.TJ,{playbackRate:this.video.playbackRate})},ended(){this.state!==a.bc&&this.state!==a.xQ&&this.trigger(a.Ms)}}},9974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>function(e){return e&&e.length?e.end(e.length-1):0}})},9738:(i,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>D});var O=t(4506),j=t(548),r=t(7477),U=t(8348);function s(e){this._service=e}const a=(t,n,i)=>{if(t.payload&&t.startTime===n&&i.push(t.payload),t.nestedCues)for(let e=0;e<t.nestedCues.length;e++)i.concat(...a(t.nestedCues[e],n,i));return i};s.prototype.append=function(e){var t;e.length&&(t=null==e||null==(t=e[0])||null==(t=t.nestedCues)?void 0:t.length,(e[0].payload||t)&&(e=e.reduce((e,t)=>{var n,i=a(t,t.startTime,[]);return t.payload=i.join(" "),e.push((i=t,t=U.Browser.safari?"center":"middle",(n=new r.Z(i.startTime,i.endTime,i.payload)).align="center"===i.textAlign?t:i.textAlign,n.lineAlign="center"===i.lineAlign?t:i.lineAlign,n.size=i.size,null!==i.line&&(n.line=i.line),null!==i.position&&(n.position=i.position),n)),e},[])),this._service.trigger("cues",e))},s.prototype.remove=function(){return!0},s.prototype.isTextVisible=function(){return this._service.displayText},s.prototype.setTextVisibility=function(e){this._service.displayText=e},s.prototype.setSequenceMode=function(){},s.prototype.destroy=function(){return Promise.resolve()};var B=t(328),e=t(1123),F=t.n(e),o=t(686),V=t(6042);F().polyfill.installAll();class H extends B.ZP{constructor(e,t){super(),this.shakaPlayer=e,this.displayText=!1,this.videoTag=t,this.loadedItem=null,this.streamType="VOD",U.Browser.safari?(this.preferredVideoCodecs=["av1","hevc","avc1","vp9"],this.preferredAudioCodecs=["mp4a","opus","mp3","vorbis"]):(this.preferredVideoCodecs=[],this.preferredAudioCodecs=[])}setup(e,t,n,i,r=!1){var a=!(0,V.qh)(i),o={};if(!a){const e=this.shakaPlayer.getConfiguration().abr["bandwidthDowngradeTarget"];n=i/e}r&&(o.availabilityWindowOverride=1/0),this.tweakedAvailabilityWindow=!1,this.shakaPlayer.configure({abr:{enabled:a,defaultBandwidthEstimate:n},preferredVideoCodecs:this.preferredVideoCodecs,preferredAudioCodecs:this.preferredAudioCodecs,manifest:o,drm:e,preferredTextLanguage:t,textDisplayFactory:()=>new s(this)})}enableAbr(e){this.shakaPlayer.configure({abr:{enabled:Boolean(e)}})}abrEnabled(){return this.shakaPlayer.getConfiguration().abr.enabled}setMaxBuffer(e){this.shakaPlayer.configure({streaming:{bufferingGoal:e}})}setPlaybackRate(e){this.videoTag.playbackRate=this.videoTag.defaultPlaybackRate=e,this.shakaPlayer&&1<this.shakaPlayer.getLoadMode()&&this.shakaPlayer.trickPlay(e)}seek(e){var t;"LIVE"!==this.streamType&&(t=this.shakaPlayer.seekRange().end,this.videoTag.currentTime=e<0?t+e:e)}getPlaybackRate(){return this.shakaPlayer?this.shakaPlayer.getPlaybackRate()||1:this.videoTag.playbackRate}isLive(){return this.shakaPlayer.isLive()}isDvr(){return"DVR"===this.streamType}getCurrentTime(){let e=this.videoTag.currentTime;return this.shakaPlayer.isLive()&&"DVR"===this.streamType&&(e-=this.shakaPlayer.seekRange().end),e}getDuration(){const{loadedItem:e,shakaPlayer:t,videoTag:n}=this;let i=n.duration;if(e){var r=e.minDvrWindow;if(this.shakaPlayer.isLive()){const e=t.seekRange();i=e.start-e.end,this.tweakedAvailabilityWindow||"hls"!==this.loadedItem.sources[0].type||(t.getManifest().presentationTimeline.setSegmentAvailabilityDuration(Math.abs(i)),this.tweakedAvailabilityWindow=!0),i=(0,o.s)(i,r)?i:1/0}this.streamType=(0,o.v)(i,r)}return i}getLoadedItem(){return this.loadedItem}getSeekRange(){return this.shakaPlayer.seekRange()}getVariantHistory(t){return t=t||0,this.shakaPlayer.getStats().switchHistory.filter(e=>"variant"===e.type&&e.timestamp>t)}setLoadedItem(e){this.loadedItem=e,this.streamType="VOD"}setDisplayText(e){this.displayText=e}unload(){this.loadedItem=null,this.shakaPlayer.unload()}destroy(){return window.VTTCue=r.Z,this.loadedItem=null,this.shakaPlayer.destroy()}}var K=t(1918),G=t(5256),q=t(1643),W=t(974),z=t(8518),X=t(6886),e=t(6528),Y=t(8702),$=t(3949),Q=t(186),J=t(3328),Z=t(5099),ee=t(2728),te=t(4446),ne=t(9601);const{Severity:{RECOVERABLE:ie},Category:{NETWORK:re,MEDIA:ae,MANIFEST:le,PLAYER:ce,DRM:de},Code:{UNSUPPORTED_SCHEME:he,BAD_HTTP_STATUS:fe,HTTP_ERROR:pe,TIMEOUT:u,MP4_SIDX_WRONG_BOX_TYPE:oe,VIDEO_ERROR:ge,DASH_INVALID_XML:l,CONTENT_UNSUPPORTED_BY_BROWSER:me,RESTRICTIONS_CANNOT_BE_MET:c,REQUEST_FILTER_ERROR:d,RESPONSE_FILTER_ERROR:p,NO_RECOGNIZED_KEY_SYSTEMS:g,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:m,FAILED_TO_CREATE_CDM:v,FAILED_TO_ATTACH_TO_VIDEO:y,INVALID_SERVER_CERTIFICATE:b,FAILED_TO_CREATE_SESSION:T,FAILED_TO_GENERATE_LICENSE_REQUEST:w,LICENSE_REQUEST_FAILED:x,LICENSE_RESPONSE_REJECTED:E,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:S,NO_LICENSE_SERVER_GIVEN:k,OFFLINE_SESSION_REMOVED:A,EXPIRED:I,SERVER_CERTIFICATE_REQUIRED:C,INIT_DATA_TRANSFORM_ERROR:M,SERVER_CERTIFICATE_REQUEST_FAILED:R}}=F().util.Error,se=new Map([[u,241001],[oe,244604],[l,242601],[c,242635],[d,241005],[p,241005],[g,246e3],[m,246001],[v,246002],[y,246003],[b,246004],[T,246005],[w,246006],[x,246007],[E,246008],[S,246010],[k,246012],[A,246013],[I,246014],[C,246015],[M,246016],[R,246017]]);var N=t(4742);const h=N.Z.debug?console.warn.bind(console):()=>{},f=e=>{const t=e.getAllResponseHeaders().trim().split("\r\n"),n={};return t.forEach(e=>{e=e.split(": ");n[e[0].toLowerCase()]=e.slice(1).join(": ")}),n},ve=d=>(a,e,o,n,s=()=>{})=>{const u=new XMLHttpRequest;let l=Date.now(),c=0;var t=new Promise((i,r)=>{u.open(e.method,a,!0);try{d(u,a)}catch(e){h(e)}u.responseType="arraybuffer",u.timeout=e.retryParameters.timeout,u.withCredentials=e.allowCrossSiteCredentials;let t=!(u.onabort=()=>{r(new(F().util.Error)(F().util.Error.Severity.RECOVERABLE,F().util.Error.Category.NETWORK,F().util.Error.Code.OPERATION_ABORTED,a,o))});u.onreadystatechange=()=>{var e;2!==u.readyState||t||(e=f(u),s(e),t=!0)},u.onload=()=>{var e=f(u),t=u.response;try{var n=((e,t,n,i,r,a)=>{if(200<=n&&n<=299&&202!==n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:Boolean(e["x-shaka-from-cache"])};let o=null;try{o=F().util.StringUtils.fromBytesAutoDetect(t)}catch(e){h(e)}h("HTTP error text:",o);r=401===n||403===n?F().util.Error.Severity.CRITICAL:F().util.Error.Severity.RECOVERABLE;throw new(F().util.Error)(r,F().util.Error.Category.NETWORK,F().util.Error.Code.BAD_HTTP_STATUS,i,n,o,e,a)})(e,t,u.status,a,u.responseURL,o);i(n)}catch(e){r(e)}},u.onerror=e=>{r(new(F().util.Error)(F().util.Error.Severity.RECOVERABLE,F().util.Error.Category.NETWORK,F().util.Error.Code.HTTP_ERROR,a,e,o))},u.ontimeout=()=>{r(new(F().util.Error)(F().util.Error.Severity.RECOVERABLE,F().util.Error.Category.NETWORK,F().util.Error.Code.TIMEOUT,a,o))},u.onprogress=e=>{var t=Date.now();(100<t-l||e.lengthComputable&&e.loaded===e.total)&&(n(t-l,e.loaded-c,e.total-e.loaded),c=e.loaded,l=t)};for(const d in e.headers)if(function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}(e.headers,d)){const a=d.toLowerCase();u.setRequestHeader(a,e.headers[d])}u.send(e.body)});return new(F().util.AbortableOperation)(t,()=>(u.abort(),Promise.resolve()))};function n(P,r,h){const f=this,n={};let d,i,a=null,p=null;const o=(0,ee.Z)(this,r.bandwidthEstimate);let s=r.bitrateSelection;f.video=h,f.drmUsed=null,f.position=0,f.levels=[],f.currentQuality=-1,f.supportsPlaybackRate=!0,f.service=null,f.adaptationId=-1,f.adaptationTs=-1,f.pollAdaptation=!1,f.livePausedItem=null,f.jwLevels=[],f.state=q.bc,(0,V.S6)(Y.Z,function(e,t){n[t]=e.bind(f)});const u=e=>{var t=new(F().Player)(e);return f.service=new H(t,e),f.adaptationId=-1,f.adaptationTs=-1,t},l=(e,t)=>(0,V.hj)(e)&&!(0,V.i2)(e)&&0<=e&&e<(0,V.dp)(t),c=(e,t)=>(0,G.ji)(e,r.qualityLabels,t),g=e=>{f.shakaLevels=e,f.shakaLevels.sort(function(e,t){return e.height<t.height||e.bandwidth<t.bandwidth?1:-1});const n=(0,G.c3)(f.shakaLevels),i=(0,G.s_)(f.shakaLevels);f.jwLevels=f.shakaLevels.reduce(function(e,t){return i&&(t.label=null),e.push({shakaId:t.id,bitrate:t.bandwidth,label:c(t,n),height:t.height,width:t.width}),e},[]),1<f.shakaLevels.length&&f.jwLevels.unshift({label:"Auto",shakaId:"auto"})},m=e=>{if(l(e,f.jwLevels)){f.service.enableAbr(!1);const t=f.jwLevels[e].shakaId,n=(0,V._e)(f.shakaLevels,{id:t});if(n){const e=n.bandwidth>s,t=!i||n.audioId!==i.audioId;s=n.bandwidth,p.selectVariantTrack(n,e||t)}e=0===e;f.service.enableAbr(e),e||(f.pollAdaptation=!0)}},v=e=>{f.tracksByLabel&&f.tracksByLang&&f.audioTracks&&Object.keys(f.tracksByLabel).length!==Object.keys(f.tracksByLang).length?g(f.tracksByLabel[f.audioTracks[f.currentAudioIndex].name]):f.tracksByLang&&f.audioTracks&&g(f.tracksByLang[f.audioTracks[f.currentAudioIndex].language]),m(e),f.currentQuality=e};let y;const b=()=>{y(),f.service&&(f.service.setLoadedItem(null),f.service.unload()),a=null},T=e=>{if(h.src||null!=h&&null!=(t=h.played)&&t.length){var t=e.detail||e,{key:e,code:n,fatal:i,changeLevel:r}=(e=>{var{category:t,code:n,data:i,severity:r}=e,r=r!==ie,a=n===oe;let o=r?24e4:34e4,s=r?te.ul:null;a={key:s,code:o,fatal:r,changeLevel:a};return r?se.has(n)?Object.assign(a,{code:se.get(n)}):(n===he?o=241004:n===fe?{code:o,key:s}=(0,ne.Z)(24e4,i[1],i[0]):n===pe?{code:o,key:s}=(0,ne.Z)(24e4,0,i[0]):n===ge?(o=244e3,1<i[0]&&i[0]<5&&(o+=i[0]-1)):n===me?(s=te.zO,o=242632):U.Browser.ie&&e.message&&0===e.message.indexOf("Access is denied.")?o=241012:t===le?o=242600:t===re?o=241e3:t===ae?o=244e3:t===ce?o=249e3:t===de&&(o=246e3),Object.assign(a,{code:o,key:s})):a})(t);if(i){if(r){const e=(()=>{var t=(0,V._e)(f.shakaLevels,{active:!0});if(t)for(let e=0;e<f.jwLevels.length;e+=1)if(t.id===f.jwLevels[e].shakaId)return e;return null})();if(l(e,f.jwLevels))return void v(e)}f.service&&f.service.unload(),b(),f.trigger(q.Ew,new te.rG(e,n,t))}else f.trigger(q.cM,new te.rG(null,n,t))}else f.destroy(),p=u(h)},w=()=>{let e;return l(f.currentAudioIndex,f.audioTracks)?f.currentAudioIndex:(e=!(e=(0,V.sE)(f.audioTracks,function(e){return e.defaulttrack&&"dv"!==e.language&&"und"!==e.language}))&&f.audioTracks?f.audioTracks[0]:e)?e.shakaIndex:0},x=e=>{var o;Array.isArray(e)&&(f.shakaAudioTracks=e,f.audioTracks=(o=e).map(function(e,t){var n=e.language,i=1<(0,V.ar)(o,{language:n}).length,r=!!e.label&&1<(0,V.ar)(o,{label:e.label}).length;let a=(0,z.id)(n);return"und"===n?a="Unknown":"dv"===n&&(a="Audio Description"),i&&!r?a=e.label||(0,z.id)(n):i&&r&&(a+=` (${(0,G._T)(e.bandwidth)} kbps)`),{autoselect:!1,defaulttrack:Boolean(e.active),groupid:e.primary?"default":"",language:e.language,name:a,shakaIndex:t,shakaId:e.id}}),f.currentAudioIndex=w(),i=f.shakaAudioTracks[f.currentAudioIndex])},E=()=>l(f.currentAudioIndex,f.audioTracks)?f.currentAudioIndex:-1,S=(e,t=!1)=>{var e=f.audioTracks[e||E()];!e||!(e=f.shakaAudioTracks[e.shakaIndex])||i&&i.audioId===e.audioId&&!t||(f.service.enableAbr(!1),i=e,p.selectVariantTrack(e,!0),f.service.enableAbr(!0),v(f.currentQuality))},k=()=>{let t=p.getTextTracks(),n=(f._tracksById&&t.length===Object.keys(f._tracksById).length||(t=t.filter(e=>"Shaka Player TextTrack"!==e.label).map(e=>{return e.kind=(e.kind||"subtitles").replace(/^(.+[^s])$/,"$1s"),e.embedded=!0,e.label=e.label||(0,z.id)(e.language),e.source="currentTime",e}),f.addTextTracks(t)),p.getVariantTracks());n=n.map(e=>(e.label||(e.label=(0,z.id)(e.language)),e));const i=(0,V._e)(n,{active:!0}),r=(0,V.vM)(n,"language"),a=(0,V.vM)(n,"label");let o="video";if(f.tracksByLang=r,f.tracksByLabel=a,(0,V.dp)(r)&&i){Object.keys(a).length!==Object.keys(r).length?g(a[i.label]):g(r[i.language]);let e=0;if(!f.service.abrEnabled()){const t=f.service.getVariantHistory();if(t.length){const n=t[0]["id"],i=(0,V._e)(f.jwLevels,{shakaId:n});e=f.jwLevels.indexOf(i)}}f.currentQuality=Math.max(0,e),m(f.currentQuality),f.trigger(q.UZ,{levels:f.jwLevels,currentQuality:f.currentQuality});{var s=a;var u=(0,z.id)(i.language);const l=(0,V.sE)(s[u],e=>e.active),c=[];Object.keys(s).forEach(function(e){e===u?c.push(l):c.push(s[e][0])}),Array.isArray(c)&&x(c),f.trigger(q.j0,{tracks:f.audioTracks,currentTrack:f.currentAudioIndex})}S(f.currentAudioIndex,f.replay),-1<i.mimeType.indexOf("audio")&&(o="audio"),f.trigger(q.oZ,{mediaType:o})}},e=e=>{var{startTime:e,endTime:t,id:n,schemeIdUri:i,timescale:r,presentationTimeDelta:a,eventDuration:o,messageData:s}=e.detail,i={metadataType:"emsg",id:n,schemeIdUri:i,timescale:r,presentationTimeOffset:a,duration:o,start:e,end:t},r=f.createCue(e,t,JSON.stringify(i));r.value=s,r._parsed=!0,f.addVTTCue({type:"metadata",cue:r},n+`_${a}_${e}_`+t)&&(delete i.metadataType,i.messageData=s,f.trigger(q.O1,{metadataType:"emsg",metadata:i}))},t=e=>{var n=p.getTextTracks();let i=f.getSubtitlesTrack();if(i<0){const e=(0,V._e)(n,{active:!0});i=(0,V.cq)(n,e)}const r=n[i];if(r){let t;n=(0,V._e)(f._tracksById,{id:r.id});t=n?n._id:r.kind+"s"+i,e.forEach(e=>{U.Browser.ie?e.align="middle":e.align="center",f.addVTTCue({type:r.kind+"s",cue:e,track:t})})}return[]},A=e=>{f.trigger(q.rx,{metadataType:"dai-dash",metadata:{messageData:e.detail.eventElement.attributes.messageData.value,start:e.detail.startTime,type:e.detail.schemeIdUri}})},I=(y=()=>{p&&(p.removeEventListener("error",T),p.removeEventListener("trackschanged",k),p.removeEventListener("emsg",e),p.removeEventListener("timelineregionenter",A)),(0,V.S6)(n,function(e,t){h.removeEventListener(t,e)}),(0,ue.IP)(h),f.service&&f.service.off("cues",t),o.stop()},()=>{p.addEventListener("error",T),p.addEventListener("trackschanged",k),p.addEventListener("adaptation",()=>{f.pollAdaptation=!0}),p.addEventListener("emsg",e),p.addEventListener("timelineregionenter",A),(0,V.S6)(n,function(e,t){h.addEventListener(t,e)}),(0,ue.Nm)(f,h),f.service.on("cues",t),o.start()}),C=(f.checkAdaptation=function(){const{videoWidth:i,videoHeight:r}=h,t=p.getStats(),{width:n,height:a}=t,e=(f.shakaLevels||k(),f.service.getVariantHistory(f.adaptationTs));if(e.length){var o=-1===f.adaptationTs,s=(0,V.sE)(f.jwLevels,n=>e.some(e=>{var t=e.id===n.shakaId&&(n.width===i&&n.height===r||null===n.width);return t&&(f.adaptationTs=e.timestamp),t}));if(s&&s.shakaId!==f.adaptationId){f.adaptationId=s.shakaId,f.pollAdaptation=!1;var u=f.jwLevels.indexOf(s),{label:s,bitrate:l}=s,c=f.service.abrEnabled(),d=c?"auto":"manual";let e=o?"initial choice":c?"auto":"api";f.trigger(q.ug,{level:{index:u,label:s,bitrate:l,width:n,height:a},bandwidth:t.estimatedBandwidth,mode:d,reason:e})}}else f.pollAdaptation=!1},()=>{var e;if(a=null,y(),p&&((e=p.getNetworkingEngine()).clearAllRequestFilters(),e.clearAllResponseFilters(),p=null),f.service)return e=f.service.destroy(),f.service=null,e}),M=()=>{f.livePausedItem=f.service.loadedItem,f.service.unload()},R=(e={sources:[]},t={})=>{let n=null;var i="hls"===e.sources[0].type,t=(t.response&&(n=new Uint8Array(t.response)),o.getEstimate()),t=(f.service.setup(((e=null)=>{var t={};let n,r,i="";if(d.clearkey&&(0,K.Gb)("clearkey"))(r=d.clearkey).keyId=r.keyId?r.keyId.replace(/-/g,""):null,t.clearKeys={},t.clearKeys[r.keyId]=r.key;else{if(d.widevine&&(0,K.Gb)("widevine"))f.drmUsed="widevine",n="com.widevine.alpha",i="http://widevine-proxy.appspot.com/proxy";else{if(!d.playready||!(0,K.Gb)("playready"))return t;f.drmUsed="playready",n="com.microsoft.playready",i="http://microsoft-proxy.appspot.com/proxy"}if(r=d[f.drmUsed]){var{audioRobustness:a="",videoRobustness:o=""}=r;(e||a||o)&&(t.advanced={},t.advanced[n]={serverCertificate:e,audioRobustness:a,videoRobustness:o}),t.servers=t.servers||{},t.servers[n]=r.url||i;const s=p.getNetworkingEngine(),u=F().net.NetworkingEngine.RequestType.LICENSE,{licenseRequestFilter:l,licenseResponseFilter:c}=r;s.registerRequestFilter(function(e,n){if(e===u){try{Object.defineProperties(n,{open:{get:()=>function(e,t){n.uris=[e],n.method=t},enumerable:!0},setRequestHeader:{get:()=>function(e,t){n.headers[e]=t},enumerable:!0},withCredentials:{get:()=>n.allowCrossSiteCredentials,set(e){n.allowCrossSiteCredentials=e},enumerable:!0}})}catch(e){}var t=r,i=n;return[].concat(t.headers||[]).concat(t.licenseRequestHeaders||[]).forEach(e=>{i.headers[e.name]=e.value}),(t=t.customData)&&(i.headers.customData=t),"function"==typeof l?l.call(p,n,p.drmInfo()):void 0}}),s.registerResponseFilter(function(e,t){return e===u&&"function"==typeof c?c.call(p,t,p.drmInfo()):void 0})}}return t})(n),r.selectedCaptionCode||(0,z.Cq)(r.captionLabel),t,s,i),e.sources[0].file);return(e.starttime?p.load(t,e.starttime):p.load(t)).then(()=>{f.livePausedItem=null,a=null,f.state===q.bc&&p&&p.isLive()&&M()}).catch(T)},N=(e,t)=>{t.allowCrossSiteCredentials=!0},D=n=>{d=n.sources[0].drm||{},f.service.setLoadedItem(n),f.clearTracks(),f.setupSideloadedTracks(n.tracks),f.on(q.uT,function(){h&&1===h.readyState&&0<h.buffered.length&&h.currentTime<h.buffered.start(0)&&setTimeout(()=>{h.currentTime=h.buffered.start(0)},0)});var e=p.getNetworkingEngine();e.clearAllRequestFilters(),e.clearAllResponseFilters(),(n.withCredentials||r.withCredentials)&&e.registerRequestFilter(N);const i=d.widevine?d.widevine.serverCertificateUrl:void 0;return i?new Promise((t,r)=>{(0,X.h)({url:i,responseType:"arraybuffer"},e=>R(n,e).then(t),(e,t,n,i)=>r(i))}):R(n)};var _;Object.assign(f,B.ZP,$.Z,Q.Z,J.Z,{seeking:!1,_eventsOn(){p=p||u(h),I()},_eventsOff(){if(!d||!U.Browser.firefox)return C();f.remove(),f.setContainer(f.container)},init:t=>{{var[n=null]=[t.sources[0].onXhrOpen];let e=F().net.HttpXHRPlugin.parse;n&&"function"==typeof n&&(e=ve(n)),F().net.NetworkingEngine.registerScheme("http",e,F().net.NetworkingEngine.PluginPriority.APPLICATION,!0),F().net.NetworkingEngine.registerScheme("https",e,F().net.NetworkingEngine.PluginPriority.APPLICATION,!0),F().net.NetworkingEngine.registerScheme("blob",e,F().net.NetworkingEngine.PluginPriority.APPLICATION,!0)}f.playlistItem_&&t===f.playlistItem_?f.replay=!0:(f.currentAudioIndex=-1,f.replay=!1),f.playlistItem_=t,f.currentAudioIndex=w(),f.adaptationId=-1,f.adaptationTs=-1},preload:e=>{var t="auto"===e.preload?j.i0:j.pR;p=p||u(h),f.service.setMaxBuffer(t),y(),I(),a=D(e)},load:e=>{return y(),p&&h.src||(f.destroy(),p=u(h),f.service.setLoadedItem(null)),I(),f.service.setMaxBuffer(j.i0),f.setState(q.ik),f.service.getLoadedItem()!==e?(f.adaptationId=-1,f.adaptationTs=-1,f.drmUsed=null,a=D(e),h.play()):(e=e.tracks,h.textTracks&&(null!=e&&e.length&&f.setupSideloadedTracks(e),f.setTextTracks(h.textTracks))),a},pause:()=>{var e;null==(e=p)||null==e.isLive||!e.isLive()||f.service.isDvr()||f.livePausedItem||(M(),f.setState(q._5)),h.pause()},getQualityLevels:()=>(0,V.UI)(f.jwLevels,e=>(0,O.Z)(e)),getCurrentQuality:()=>f.currentQuality,getAudioTracks:()=>Array.isArray(f.audioTracks)?f.audioTracks:[],getCurrentAudioTrack:E,play:()=>{var e=f["livePausedItem"];return e&&(f.livePausedItem=null,f.load(e)),h.play()||(0,Z.Z)(h)},seek:e=>{if(f.service){var t=f.getSeekRange(),n=t.end,i=t.start,n=e<0?n-i+e:e,i=f.getDuration(),r=f.video.currentTime;if(f.trigger(q.NZ,{position:f.getCurrentTime(),offset:n,duration:i,currentTime:r,seekRange:t,metadata:{currentTime:r}}),f.seeking=!0,f.service.seek(e),0!==i&&i!==1/0&&(0,V.qh)(i)){const e=f.video.currentTime;f.trigger(q.R2,{position:f.getCurrentTime(),duration:i,currentTime:e,seekRange:t,metadata:{currentTime:e}})}}},setCurrentQuality(e){l(e,f.jwLevels)&&e!==f.currentQuality&&(v(e),f.trigger(q.aM,{currentQuality:e,levels:f.jwLevels}))},setAudioTracks(e){Array.isArray(e)&&(x(e),f.trigger(q.j0,{tracks:f.audioTracks,currentTrack:f.currentAudioIndex}))},setCurrentAudioTrack(e){var t;l(e,f.audioTracks)&&(t=e,f.currentAudioIndex=t,l(t,f.audioTracks)&&S(f.currentAudioIndex,f.replay),f.trigger(q.j0,{tracks:f.audioTracks,currentTrack:e}),f.trigger(q._B,{tracks:f.audioTracks,currentTrack:e}))},setPlaybackRate(e){f.service&&f.service.setPlaybackRate(e)},getPlaybackRate:()=>f.service?f.service.getPlaybackRate():1,isLive:()=>!!f.service&&f.service.isLive(),getCurrentTime:()=>f.service?f.service.getCurrentTime():0,getDuration:()=>f.service?f.service.getDuration():0,getSeekRange:()=>f.service?f.service.getSeekRange():{start:0,end:0},getLiveLatency(){let e=null;var t=this.service.getSeekRange().end;return e=f.isLive()&&t?t-h.currentTime:e},setVisibility:e=>{(e=Boolean(e))?(0,W.oB)(f.container,{visibility:"visible",opacity:1}):(0,W.oB)(f.container,{visibility:"",opacity:0})},stop:()=>{b(),h.pause(),f.setState(q.bc)},setShakaPlayer:e=>{p=e},destroy:C,supportsFullscreen:(0,V.a9)(!0),getName:(0,V.a9)({name:"shaka"}),renderNatively:(_=r.renderCaptionsNatively,U.Browser.chrome&&_),setSubtitlesTrack:e=>{J.Z.setSubtitlesTrack.call(f,e);var t=p.getTextTracks()[e-1];f.renderNatively||(f._currentTextTrackIndex=e-1),t?(p.selectTextTrack(t),f.service.setDisplayText(!0),r.selectedCaptionCode=t.language):f.service.setDisplayText(!1),v(f.currentQuality)},getBandwidthEstimate:()=>p?p.getStats().estimatedBandwidth:null}),n.loadeddata=function(){f.checkAdaptation(),[].forEach.call(h.textTracks,function(e){"Shaka Player TextTrack"===e.label&&(e.inuse=!1,e.mode="hidden",e.embedded=!0)})},n.timeupdate=function(){f.pollAdaptation&&f.checkAdaptation(),Y.Z.timeupdate.call(f)};const L=()=>{f.seeking?f.setState(q.ik):f.state!==q.r0&&f.state!==q.ik||(f.stallTime=h.currentTime,f.setState(q.nQ))};n.waiting=L,n.ratechange=function(){0===h.playbackRate&&0!==h.defaultPlaybackRate?h.duration-h.currentTime<.4?Y.Z.ended.call(f):L():Y.Z.ratechange.call(f)}}var ue=t(1384);Object.assign(n.prototype,e.Z),n.getName=(0,V.a9)({name:"shaka"});const D=n},1123:function(e,t){var n="undefined"!=typeof window?window:global,i={};if(function(N,o,s){function u(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var l="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value),e},c=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof N&&N,"object"==typeof self&&self,"object"==typeof o&&o];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function e(e,t){if(t)e:{for(var n=c,i=e.split("."),r=0;r<i.length-1;r++){var a=i[r];if(!(a in n))break e;n=n[a]}(a=t(r=n[i=i[i.length-1]]))!=r&&null!=a&&l(n,i,{configurable:!0,writable:!0,value:a})}}function d(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function Se(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:u(e)}}function te(e){if(!(e instanceof Array)){e=Se(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}e("Symbol",function(e){function n(e,t){this.g=e,l(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(i+(t||"")+"_"+r++,t)}}),e("Symbol.iterator",function(e){if(!e){e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=c[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&l(i.prototype,e,{configurable:!0,writable:!0,value:function(){return d(u(this))}})}}return e});var p,g="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{e:{var v={};try{v.__proto__={a:!0},p=v.a;break e}catch(N){}p=!1}n=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=n;function T(e,t){if(e.prototype=g(t.prototype),e.prototype.constructor=e,y)y(e,t);else for(var n in t){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(t,n))&&Object.defineProperty(e,n,i):e[n]=t[n])}e.gh=t.prototype}function w(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function x(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function E(e,t){e.i={te:t,Be:!0},e.g=e.m||e.j}function ke(e,t,n){return e.g=n,{value:t}}function Ae(e){e.g=0}function Ie(e,t,n){e.m=t,null!=n&&(e.j=n)}function S(e){e.m=0,e.j=2}function Ce(e,t){e.g=t,e.m=0}function Me(e){e.m=0;var t=e.i.te;return e.i=null,t}function De(e){e.u=[e.i],e.m=0,e.j=0}function _e(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Be?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function k(e){this.g=new w,this.h=e}function U(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,E(e.g,t),B(e)}return e.g.l=null,i.call(e.g,a),B(e)}function B(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,E(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Be)throw t.te;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function F(i){this.next=function(e){return x(i.g),e=i.g.l?U(i,i.g.l.next,e,i.g.s):(i.g.s(e),B(i))},this.throw=function(e){return x(i.g),e=i.g.l?U(i,i.g.l.throw,e,i.g.s):(E(i.g,e),B(i))},this.return=function(e){return e=e,x((t=i).g),(n=t.g.l)?U(t,"return"in n?n.return:function(e){return{value:e,done:!0}},e,t.g.return):(t.g.return(e),B(t));var t,n},this[Symbol.iterator]=function(){return this}}function Re(e){return t=new F(new k(e)),new Promise(function(n,i){!function e(t){t.done?n(t.value):Promise.resolve(t.value).then(r,a).then(e,i)}(t.next())});function r(e){return t.next(e)}function a(e){return t.throw(e)}var t}function V(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t,n){for(var i=(e=e instanceof String?String(e):e).length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{ze:r,v:a}}return{ze:-1,v:void 0}}function G(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function q(t,n){t instanceof String&&(t+="");var i=0,r=!1,e={next:function(){var e;return!r&&i<t.length?(e=i++,{value:n(e,t[e]),done:!1}):{done:r=!0,value:void 0}}};return e[Symbol.iterator]=function(){return e},e}w.prototype.s=function(e){this.h=e},w.prototype.return=function(e){this.i={return:e},this.g=this.j},w.prototype.A=function(e){this.g=e},e("Promise",function(e){function o(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.g=null}function s(t){return t instanceof o?t:new o(function(e){e(t)})}if(e)return e;t.prototype.h=function(e){var t;null==this.g&&(this.g=[],(t=this).i(function(){t.l()})),this.g.push(e)};var n=c.setTimeout,r=(t.prototype.i=function(e){n(e,0)},t.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},t.prototype.j=function(e){this.i(function(){throw e})},o.prototype.j=function(){function e(t){return function(e){i||(i=!0,t.call(n,e))}}var n=this,i=!1;return{resolve:e(this.F),reject:e(this.l)}},o.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.I(e);else{switch(typeof e){case"object":var t=null!=e;break;case"function":t=!0;break;default:t=!1}t?this.D(e):this.m(e)}},o.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.L(t,e):this.m(e)},o.prototype.l=function(e){this.s(2,e)},o.prototype.m=function(e){this.s(1,e)},o.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},o.prototype.G=function(){var t=this;n(function(){var e;t.C()&&void 0!==(e=c.console)&&e.error(t.i)},1)},o.prototype.C=function(){var e,t,n;return!this.o&&(e=c.CustomEvent,t=c.Event,void 0===(n=c.dispatchEvent)||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e)))},o.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)r.h(this.g[e]);this.g=null}},new t);return o.prototype.I=function(e){var t=this.j();e.Gc(t.resolve,t.reject)},o.prototype.L=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},o.prototype.then=function(e,t){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){r(e)}}:e}var i,r,a=new o(function(e,t){i=e,r=t});return this.Gc(n(e,i),n(t,r)),a},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.Gc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?r.h(n):this.g.push(n),this.o=!0},o.resolve=s,o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(r){return new o(function(e,t){for(var n=Se(r),i=n.next();!i.done;i=n.next())s(i.value).Gc(e,t)})},o.all=function(e){var t=Se(e),a=t.next();return a.done?s([]):new o(function(n,e){for(var i=[],r=0;i.push(void 0),r++,s(a.value).Gc(function(t){return function(e){i[t]=e,0==--r&&n(i)}}(i.length-1),e),!(a=t.next()).done;);})},o}),e("WeakMap",function(i){function e(e){if(this.g=(s+=Math.random()+1).toString(),e){e=Se(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"==t&&null!==e||"function"==t}function a(e){var t;H(e,o)||(t=new n,l(e,o,{value:t}))}function t(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&a(e),t(e))})}var o,s;return function(){if(i&&Object.seal)try{var e=Object.seal({}),t=Object.seal({}),n=new i([[e,2],[t,3]]);return 2==n.get(e)&&3==n.get(t)&&(n.delete(e),n.set(t,4),!n.has(e))&&4==n.get(t)}catch(e){}}()?i:(o="$jscomp_hidden_"+Math.random(),t("freeze"),t("preventExtensions"),t("seal"),s=0,e.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(a(e),H(e,o))return e[o][this.g]=t,this;throw Error("WeakMap key fail: "+e)},e.prototype.get=function(e){return r(e)&&H(e,o)?e[o][this.g]:void 0},e.prototype.has=function(e){return r(e)&&H(e,o)&&H(e[o],this.g)},e.prototype.delete=function(e){return!!(r(e)&&H(e,o)&&H(e[o],this.g))&&delete e[o][this.g]},e)}),e("Map",function(r){function n(){var e={};return e.Qa=e.next=e.head=e}function e(e,t){var n=e.g;return d(function(){if(n){for(;n.head!=e.g;)n=n.Qa;if(n.next!=n.head)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function i(e,t){var n=t&&typeof t,i=("object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t,e.h[n]);if(i&&H(e.h,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,fa:a}}return{id:n,list:i,index:-1,fa:void 0}}function t(e){if(this.h={},this.g=n(),this.size=0,e){e=Se(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}var o,s;return function(){if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{var e,t,n=Object.seal({x:4}),i=new r(Se([[n,"s"]]));if("s"==i.get(n)&&1==i.size&&!i.get({x:4})&&i.set({x:4},"t")==i&&2==i.size)return!(t=(e=i.entries()).next()).done&&t.value[0]==n&&"s"==t.value[1]&&!(t=e.next()).done&&4==t.value[0].x&&"t"==t.value[1]&&e.next().done}catch(e){}}()?r:(o=new WeakMap,t.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},t.prototype.delete=function(e){return!(!(e=i(this,e)).fa||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,0))},t.prototype.clear=function(){this.h={},this.g=this.g.Qa=n(),this.size=0},t.prototype.has=function(e){return!!i(this,e).fa},t.prototype.get=function(e){return(e=i(this,e).fa)&&e.value},t.prototype.entries=function(){return e(this,function(e){return[e.key,e.value]})},t.prototype.keys=function(){return e(this,function(e){return e.key})},t.prototype.values=function(){return e(this,function(e){return e.value})},t.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},t.prototype[Symbol.iterator]=t.prototype.entries,s=0,t)}),e("Set",function(r){function e(e){if(this.g=new Map,e){e=Se(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{var e,t,n=Object.seal({x:4}),i=new r(Se([n]));if(i.has(n)&&1==i.size&&i.add(n)==i&&1==i.size&&i.add({x:4})==i&&2==i.size)return!(t=(e=i.entries()).next()).done&&t.value[0]==n&&t.value[1]==n&&!(t=e.next()).done&&t.value[0]!=n&&4==t.value[0].x&&t.value[1]==t.value[0]&&e.next().done}catch(e){}}()?r:(e.prototype.add=function(e){return this.g.set(e=0===e?0:e,e),this.size=this.g.size,this},e.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},e.prototype.clear=function(){this.g.clear(),this.size=0},e.prototype.has=function(e){return this.g.has(e)},e.prototype.entries=function(){return this.g.entries()},e.prototype.keys=e.prototype.values=function(){return this.g.values()},e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,n){var i=this;this.g.forEach(function(e){return t.call(n,e,e,i)})},e)}),e("Array.prototype.findIndex",function(e){return e||function(e,t){return K(this,e,t).ze}}),e("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),e("Array.prototype.includes",function(e){return e||function(e,t){var n=this,i=(n=n instanceof String?String(n):n).length,r=t||0;for(r<0&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}}),e("String.prototype.includes",function(e){return e||function(e,t){return-1!==G(this,e,"includes").indexOf(e,t||0)}}),e("Array.prototype.find",function(e){return e||function(e,t){return K(this,e,t).v}}),e("String.prototype.startsWith",function(e){return e||function(e,t){for(var n=G(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return r<=o}}),e("Array.prototype.keys",function(e){return e||function(){return q(this,function(e){return e})}});var W="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)H(i,r)&&(e[r]=i[r])}return e},z=(e("Object.assign",function(e){return e||W}),e("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}}),e("Array.prototype.values",function(e){return e||function(){return q(this,function(e,t){return t})}}),e("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}}),e("Array.prototype.entries",function(e){return e||function(){return q(this,function(e,t){return[e,t]})}}),e("String.prototype.repeat",function(e){return e||function(e){var t=G(this,null,"repeat");if(e<0||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),e("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),e("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)H(e,t)&&n.push(e[t]);return n}}),e("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),e("Math.trunc",function(e){return e||function(e){var t;return e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e?e:(t=Math.floor(Math.abs(e)),e<0?-t:t)}}),e("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)H(e,t)&&n.push([t,e[t]]);return n}}),this||self);function t(e,t){var n,i=e.split("."),r=z;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function X(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function Y(e){return e.h/(1-Math.pow(e.g,e.i))}function $(){this.h=new X(2),this.j=new X(5),this.g=0,this.i=128e3,this.l=16e3}function Q(){}function Te(){}function J(){}function Z(e){var t=V.apply(1,arguments);ie.has(e)||(ie.add(e),J.apply(Q,te(t)))}function ee(){}X.prototype.sample=function(e,t){t=t*(1-(t=Math.pow(this.g,e)))+t*this.h;isNaN(t)||(this.h=t,this.i+=e)},$.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},$.prototype.sample=function(e,t){var n;t<this.l||(n=8e3*t/e,e=e/1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n))},$.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Y(this.h),Y(this.j))};var n,ie=new Set;function re(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Le(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function le(e,t,n){if(n=n||re,e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=Se(e)).next();!r.done;i={jd:i.jd},r=e.next()){if(i.jd=r.value,-1==(r=t.findIndex(function(t){return function(e){return n(t.jd,e)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ae(e,t,n){if(n=n||re,e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function M(e,t,n){this.startTime=e,this.direction=fe,this.endTime=t,this.payload=n,this.region=new Be,this.position=null,this.positionAlign=se,this.size=0,this.textAlign=ue,this.writingMode=pe,this.lineInterpretation=ge,this.line=null,this.lineHeight="",this.lineAlign=we,this.displayAlign=de,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Oe,this.fontStyle=je,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function oe(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ae(e.nestedCues,t.nestedCues,oe))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!ae(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}N.console&&N.console.log.bind&&((n={})[1]=console.error.bind(console),n[2]=console.warn.bind(console),n[3]=console.info.bind(console),n[4]=console.log.bind(console),n[5]=console.debug.bind(console),n[6]=console.debug.bind(console),J=n[2],Te=n[1]),M.prototype.clone=function(){var e,t=new M(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},t("shaka.text.Cue",M);var se="auto",ue=(M.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:se},"center"),ce={LEFT:"left",RIGHT:"right",CENTER:ue,START:"start",END:"end"},de=(M.textAlign=ce,"after"),he={BEFORE:"before",CENTER:"center",AFTER:de},fe=(M.displayAlign=he,"ltr"),pe=(M.direction={HORIZONTAL_LEFT_TO_RIGHT:fe,HORIZONTAL_RIGHT_TO_LEFT:"rtl"},"horizontal-tb"),ge=(M.writingMode={HORIZONTAL_TOP_TO_BOTTOM:pe,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},0),we=(M.lineInterpretation={LINE_NUMBER:ge,PERCENTAGE:1},"start"),xe={CENTER:"center",START:we,END:"end"},Ee=(M.lineAlign=xe,{white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"}),Pe=(M.defaultTextColor=Ee,{bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"}),Oe=(M.defaultTextBackgroundColor=Pe,400),je=(M.fontWeight={NORMAL:Oe,BOLD:700},"normal"),Ue={NORMAL:je,ITALIC:"italic",OBLIQUE:"oblique"};function Be(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Fe,this.scroll=Ve}M.fontStyle=Ue,M.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},t("shaka.text.CueRegion",Be);var Fe=1,Ve=(Be.units={PX:0,PERCENTAGE:Fe,LINES:2},"");function He(){}function Ke(e,t){if(e||t){if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ge(e)!=Ge(t)||(e.byteOffset||0)!=(t.byteOffset||0))for(var n=D(e),i=D(t),r=0;r<e.byteLength;r++)if(n[r]!=i[r])return!1}return!0}function Ge(e){return e instanceof ArrayBuffer?e:e.buffer}function qe(e){return e instanceof ArrayBuffer?e:(0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e:new Uint8Array(e)).buffer}function D(e,t,n){return ze(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function We(e,t,n){return ze(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function ze(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Ge(e),t,Math.min(t+Math.max(n,0),r)-t)}function Xe(){}Be.scrollMode={NONE:Ve,UP:"up"},t("shaka.util.BufferUtils",He),He.toDataView=We,He.toUint8=D,He.toArrayBuffer=qe,He.equal=Ke,t("shaka.dependencies",Xe),Xe.has=function(e){return $e.has(e)},Xe.add=function(e,t){if(!Ye[e])throw Error(e+" is not supported");$e.set(e,function(){return t})};var Ye={muxjs:"muxjs"},$e=(Xe.Allowed=Ye,new Map([["muxjs",function(){return N.muxjs}]]));function Ne(e,t,n){var i=V.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}Ne.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},t("shaka.util.Error",Ne),Ne.Severity={RECOVERABLE:1,CRITICAL:2},Ne.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ne.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Je(e){e instanceof Je?(Ze(this,e.Fa),this.ob=e.ob,this.Ga=e.Ga,et(this,e.Ib),this.ua=e.ua,tt(this,e.g.clone()),this.fb=e.fb):e&&(e=String(e).match(Qe))?(Ze(this,e[1]||"",!0),this.ob=nt(e[2]||""),this.Ga=nt(e[3]||"",!0),et(this,e[4]),this.ua=nt(e[5]||"",!0),tt(this,e[6]||"",!0),this.fb=nt(e[7]||"")):this.g=new ct(null)}function Ze(e,t,n){e.Fa=n?nt(t,!0):t,e.Fa&&(e.Fa=e.Fa.replace(/:$/,""))}function et(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ib=t}else e.Ib=null}function tt(e,t,n){t instanceof ct?e.g=t:(n||(t=it(t,ut)),e.g=new ct(t))}function nt(e,t){return e?(t?decodeURI:decodeURIComponent)(e):""}function it(e,t,n){return null!=e?(e=encodeURI(e).replace(t,rt),e=n?e.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):e):null}function rt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=Je.prototype).Fa="",n.ob="",n.Ga="",n.Ib=null,n.ua="",n.fb="",n.toString=function(){var e,t=[],n=this.Fa;return n&&t.push(it(n,at,!0),":"),(n=this.Ga)&&(t.push("//"),(e=this.ob)&&t.push(it(e,at,!0),"@"),t.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ib))&&t.push(":",String(n)),(n=this.ua)&&(this.Ga&&"/"!=n.charAt(0)&&t.push("/"),t.push(it(n,"/"==n.charAt(0)?st:ot,!0))),(n=this.g.toString())&&t.push("?",n),(n=this.fb)&&t.push("#",it(n,lt)),t.join("")},n.resolve=function(e){var t=this.clone(),n=("data"===t.Fa&&(t=new Je),!!e.Fa),i=(n?Ze(t,e.Fa):n=!!e.ob,n?t.ob=e.ob:n=!!e.Ga,n?t.Ga=e.Ga:n=null!=e.Ib,e.ua);if(n)et(t,e.Ib);else if(n=!!e.ua)if("/"!=i.charAt(0)&&(this.Ga&&!this.ua?i="/"+i:-1!=(r=t.ua.lastIndexOf("/"))&&(i=t.ua.substr(0,r+1)+i)),".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}return n?t.ua=i:n=""!==e.g.toString(),n?tt(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},n.clone=function(){return new Je(this)};var at=/[#\/\?@]/g,ot=/[#\?:]/g,st=/[#\?]/g,ut=/[#\?@]/g,lt=/#/g;function ct(e){this.g=e||null}function dt(e){if(!e.na&&(e.na={},e.Ic=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i,r=t[n].indexOf("="),a=null;0<=r?(i=t[n].substring(0,r),a=t[n].substring(r+1)):i=t[n],i=decodeURIComponent(i.replace(/\+/g," ")),a=a||"",e.add(i,decodeURIComponent(a.replace(/\+/g," ")))}}function ht(e,t){return e.concat(t)}function ft(){}function pt(e){return null!=e}function gt(e,t){var n;return 0==t.length?e:(n=t.map(function(e){return new Je(e)}),e.map(function(e){return new Je(e)}).map(function(t){return n.map(function(e){return t.resolve(e)})}).reduce(ht,[]).map(function(e){return e.toString()}))}function mt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function vt(e,t){if(1==t.length)return t[0];e=yt(e,t);if(null!=e)return e;throw new Ne(2,4,4025,t)}function yt(e,t){for(var n=Se(Tt[e]),i=n.next();!i.done;i=n.next())for(var i=i.value,r=Se(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim();return e==me?"":null}(n=ct.prototype).na=null,n.Ic=null,n.add=function(e,t){dt(this),this.g=null;var n=this.na.hasOwnProperty(e)&&this.na[e];return n||(this.na[e]=n=[]),n.push(t),this.Ic++,this},n.set=function(e,t){return dt(this),this.g=null,this.na.hasOwnProperty(e)?this.na[e]=[t]:this.add(e,t),this},n.toString=function(){if(this.g)return this.g;if(!this.na)return"";var e,t=[];for(e in this.na)for(var n=encodeURIComponent(e),i=this.na[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},n.clone=function(){var e=new ct;if(e.g=this.g,this.na){var t,n={};for(t in this.na)n[t]=this.na[t].concat();e.na=n,e.Ic=this.Ic}return e};var me="text",bt={ra:"video",cb:"audio",X:me,Ub:"image",sg:"application"},Tt={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function R(){var n,i,e=new Promise(function(e,t){n=e,i=t});return e.resolve=n,e.reject=i,e}function wt(e){this.h=e,this.g=void 0}function xt(e){this.h=e,this.g=null}function A(e){this.h=e,this.g=null}function Et(){return N.MediaSource&&MediaSource.isTypeSupported}function St(e){return""!=Nt().canPlayType(e)}function kt(){return m("Xbox One")}function At(){return m("Tizen")}function It(){return m("Web0S")&&m("Chrome/38.0.2125.122 Safari/537.36")}function Ct(){return navigator.vendor&&navigator.vendor.includes("Apple")&&!At()&&!m("PC=EOS")&&!Mt()&&!m("AFT")}function Mt(){return m("PlayStation 4")}function Rt(){var e;return Ct()&&(e=(e=navigator.userAgent.match(/Version\/(\d+)/))||navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function m(e){return(navigator.userAgent||"").includes(e)}function Nt(){return _t||(Dt=Dt||new A(function(){_t=null}),_t=(_t=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||document.createElement("video"),Dt.R(1),_t)}R.prototype.resolve=function(){},R.prototype.reject=function(){},wt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},xt.prototype.R=function(e){var t=this,n=(this.stop(),!0),i=null;return this.g=function(){N.clearTimeout(i),n=!1},i=N.setTimeout(function(){n&&t.h()},1e3*e),this},xt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},A.prototype.Lb=function(){return this.stop(),this.h(),this},A.prototype.R=function(e){var t=this;return this.stop(),this.g=new xt(function(){t.h()}).R(e),this},A.prototype.Da=function(e){var t=this;return this.stop(),this.g=new xt(function(){t.g.R(e),t.h()}).R(e),this},A.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},t("shaka.util.Timer",A),A.prototype.tickEvery=A.prototype.Da,A.prototype.tickAfter=A.prototype.R,A.prototype.tickNow=A.prototype.Lb;var Dt=null,_t=null;function Lt(){}function Pt(e){if(!e)return"";if(239==(e=D(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),N.TextDecoder&&!Mt())return(e=(new TextDecoder).decode(e)).includes("")&&Te('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i,r=65533;0==(128&e[n])?r=e[n]:e.length>=n+2&&192==(224&e[n])&&128==(192&e[n+1])?(r=(31&e[n])<<6|63&e[n+1],n+=1):e.length>=n+3&&224==(240&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])?(r=(15&e[n])<<12|(63&e[n+1])<<6|63&e[n+2],n+=2):e.length>=n+4&&240==(241&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])&&128==(192&e[n+3])&&(r=(7&e[n])<<18|(63&e[n+1])<<12|(63&e[n+2])<<6|63&e[n+3],n+=3),r<=65535?t+=String.fromCharCode(r):(i=1023&(r-=65536),t=(t+=String.fromCharCode(55296+(r>>10)))+String.fromCharCode(56320+i))}return t}function Ot(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Ne(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=We(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Ft.value()(i)}function jt(e){function t(e){return n.byteLength<=e||32<=n[e]&&n[e]<=126}if(!e)return"";var n=D(e);if(239==n[0]&&187==n[1]&&191==n[2])return Pt(n);if(254==n[0]&&255==n[1])return Ot(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ot(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ot(e,!1);if(0==n[1]&&0==n[3])return Ot(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Pt(e);throw new Ne(2,2,2003)}function Ut(e){if(N.TextEncoder&&!Mt())return qe((t=new TextEncoder).encode(e));e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return qe(t)}function Bt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}t("shaka.util.StringUtils",Lt),Lt.resetFromCharCode=function(){Ft.g=void 0},Lt.toUTF16=Bt,Lt.toUTF8=Ut,Lt.fromBytesAutoDetect=jt,Lt.fromUTF16=Ot,Lt.fromUTF8=Pt;var Ft=new wt(function(){for(var e={Ua:65536};0<e.Ua;(e={Ua:e.Ua}).Ua/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){}}(e.Ua)){var i=e;return function(e){for(var t="",n=0;n<e.length;n+=i.Ua)t+=String.fromCharCode.apply(null,e.subarray(n,n+i.Ua));return t};return}return null});function Vt(){}function Ht(e){return e=D(e),e=Ft.value()(e),btoa(e)}function Kt(e,t){t=null==t||t;e=Ht(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")}function Gt(e){e=N.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function qt(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=N.parseInt(e.substr(2*i,2),16);return n}function Wt(e){var t=D(e);e="";for(var n=(t=Se(t)).next();!n.done;n=t.next())e+=n=1==(n=(n=n.value).toString(16)).length?"0"+n:n;return e}function zt(){for(var e=V.apply(0,arguments),t=0,n=Se(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=Se(e)).next();!i.done;i=e.next())i=i.value,t.set(D(i),n),n+=i.byteLength;return t}function Xt(){var t=this;this.o=$e.get("muxjs")(),this.g=new this.o.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.m=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",function(e){t.j=e.captions,t.i=e.metadata,t.m.push(zt(e.initSegment,e.data))}),this.g.on("done",function(){var e={data:zt.apply(Vt,te(t.m)),captions:t.j,metadata:t.i};t.h.resolve(e),t.l=!1})}function Yt(e,t){return!(!$e.get("muxjs")()||!$t(e))&&(t?MediaSource.isTypeSupported(Qt(t,e)):(t=Qt("audio",e),e=Qt("video",e),MediaSource.isTypeSupported(t)||MediaSource.isTypeSupported(e)))}function $t(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Qt(e,t){var n,i,t=t.replace(/mp2t/i,"mp4"),e=("audio"==e&&(t=t.replace("video","audio")),/avc1\.(66|77|100)\.(\d+)/.exec(t));return e&&(i="avc1.",i=("66"==(n=e[1])?i+"4200":"77"==n?i+"4d00":i+"6400")+((n=Number(e[2]))>>4).toString(16),i+=(15&n).toString(16),t=t.replace(e[0],i)),t}function Jt(){}function Zt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function en(e,t,n){if($t(e=Zt(e,t))){if($e.get("muxjs")())return Qt(n,e)}else if("audio"==n)return e.replace("video","audio");return e}function tn(e){var t=rn(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function nn(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function rn(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function an(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.o=new Map}function on(e){return!(!ln[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function sn(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=Se(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(e){return e.endTime<=n}))&&e.i.append(r)}function un(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=Se(t)).next();!s.done;s=t.next()){var s=(u=s.value).stream,u=u.cue;o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),function e(t,n,i){n.startTime+=i,n.endTime+=i;for(var r=(n=Se(n.nestedCues)).next();!r.done;r=n.next())e(t,r.value,i)}(e,u,r),u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.C)&&e.i.append([u])}for(a=(r=Se(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),s=(t=Se(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}t("shaka.util.Uint8ArrayUtils",Vt),Vt.concat=zt,Vt.toHex=Wt,Vt.fromHex=qt,Vt.fromBase64=Gt,Vt.toBase64=Kt,Vt.toStandardBase64=Ht,Xt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},t("shaka.util.MimeUtils",Jt),Jt.getFullType=Zt,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),an.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},an.prototype.remove=function(t,n){var i=this;return Re(function(e){if(1==e.g)return ke(e,Promise.resolve(),2);!i.i||!i.i.remove(t,n)||null==i.g||n<=i.g||t>=i.h||(t<=i.g&&n>=i.h?i.g=i.h=null:t<=i.g&&n<i.h?i.g=n:t>i.g&&n>=i.h&&(i.h=t)),Ae(e)})},t("shaka.text.TextEngine",an),an.findParser=function(e){return ln[e]},an.unregisterParser=function(e){delete ln[e]},an.registerParser=function(e,t){ln[e]=t};var ln={};function cn(){}function dn(e,t){return e=I(e),t=I(t),e.split("-")[0]==t.split("-")[0]}function hn(e,t){e=I(e),t=I(t);e=e.split("-"),t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function fn(e,t){e=I(e),t=I(t);e=e.split("-"),t=t.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function I(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=yn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function pn(e,t){return e=I(e),(t=I(t))==e?4:hn(t,e)?3:fn(t,e)?2:hn(e,t)?1:0}function gn(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),yn.get(e)||e}function mn(e){return e.language?I(e.language):e.audio&&e.audio.language?I(e.audio.language):e.video&&e.video.language?I(e.video.language):"und"}function vn(e,t){for(var n=I(e),i=new Set,r=Se(t),a=r.next();!a.done;a=r.next())i.add(I(a.value));for(a=(r=Se(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=Se(i)).next();!a.done;a=r.next())if(hn(a=a.value,n))return a;for(a=(r=Se(i)).next();!a.done;a=r.next())if(fn(a=a.value,n))return a;for(a=(i=Se(i)).next();!a.done;a=i.next())if(hn(n,a=a.value))return a;return null}t("shaka.util.LanguageUtils",cn),cn.findClosestLocale=vn,cn.getLocaleForVariant=mn,cn.getLocaleForText=function(e){return I(e.language||"und")},cn.getBase=gn,cn.relatedness=pn,cn.areSiblings=function(e,t){var n=gn(e),i=gn(t);return e!=n&&t!=i&&n==i},cn.normalize=I,cn.isSiblingOf=fn,cn.isParentOf=hn,cn.areLanguageCompatible=dn,cn.areLocaleCompatible=function(e,t){return(e=I(e))==I(t)};var yn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function bn(){this.g={}}function Tn(e,t){for(var n in e.g)t(n,e.g[n])}function wn(e,t,n,i,r){var o,s,u,a=e.variants,l=(t=function(e){for(var t=new bn,n=(e=Se(e)).next();!n.done;n=e.next()){var i=xn(n=n.value);t.push(i,n)}return t}(a=Fn(a=t.length||n.length?function(e,t,n){for(var i={},r=(t=Se(t)).next();!r.done;i={ud:i.ud},r=t.next())if(i.ud=r.value,(r=e.filter(function(t){return function(e){return e.video&&e.video.codecs.startsWith(t.ud)}}(i))).length){e=r;break}for(i={},t=(n=Se(n)).next();!t.done;i={fd:i.fd},t=n.next())if(i.fd=t.value,(t=e.filter(function(t){return function(e){return e.audio&&e.audio.codecs.startsWith(t.fd)}}(i))).length){e=t;break}return e}(a,t,n):a,i)),n=t,o=0,s=new Map,u=n.size(),Tn(n,function(e,t){for(var n=Se(t),i=n.next();!i.done;i=n.next()){var r,a=(i=i.value).video;a&&a.width&&a.height&&(a=a.width*a.height*(a.frameRate||1),s.has(a)||s.set(a,new bn),(r=s.get(a)).push(e,i),r.size()===u)&&(o=Math.max(o,a))}}),function(e){for(var o,s,t=Se(r),n=t.next();!n.done;n=t.next())if((n=n.value)==Wn||n==zn){if(1==(e=function(e,o){var s=0,u=new bn;return Tn(e,function(e,t){for(var n=0,i=0,r=Se(t),a=r.next();!a.done;a=r.next())(a=a.value).decodingInfos.length&&(n+=a.decodingInfos[0][o]?1:0,i++);(n/=i)>s?(u.g={},u.push(e,t),s=n):n==s&&u.push(e,t)}),u}(e,n)).size())return e.keys()[0]}else if(n==Xn)break;return o="",s=1/0,Tn(e,function(e,t){for(var n=0,i=0,r=Se(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;(n/=i)<s&&(o=e,s=n)}),o}(t=o?s.get(o):n));e.variants=e.variants.filter(function(e){return xn(e)==l})}function xn(e){var t="",n="";return(t=e.video?tn(e.video.codecs):t)+"-"+(n=e.audio?tn(e.audio.codecs):n)}function En(e,t,n){function i(e,t,n){return t<=e&&e<=n}var r=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Sn(e,t,n){for(var i=!1,r=(e=Se(e)).next();!r.done;r=e.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=En(r,t,n),a!=r.allowedByApplication&&(i=!0)}return i}function kn(n,l){return Re(function(e){return 1==e.g?ke(e,An(l,0<l.offlineSessionIds.length),2):(Rn(n,l),l.textStreams=l.textStreams.filter(function(e){return on(Zt(e.mimeType,e.codecs))}),ke(e,(t=l,Re(function(e){switch(e.g){case 1:i=[],r=Se(t.imageStreams),a=r.next();case 2:if(a.done)e.A(4);else{if(o=a.value,s=o.mimeType,!Yn.has(s)){if(u=$n.get(s))return ke(e,(n=u,new Promise(function(e){var t=new Image;t.src=n,"decode"in t?t.decode().then(function(){e(!0)}).catch(function(){e(!1)}):t.onload=t.onerror=function(){e(2===t.height)}})),7);Yn.set(s,!1)}e.A(5)}break;case 7:u=e.h,Yn.set(s,u);case 5:Yn.get(s)&&i.push(o),a=r.next(),e.A(2);break;case 4:t.imageStreams=i,Ae(e)}var n})),0));var t,i,r,a,o,s,u})}function An(t,n){return Re(function(e){if(1==e.g)return ke(e,In(t.variants,n,!1),2);t.variants=t.variants.filter(function(e){var t=e.video;if(t){var n=Mn(t.codecs);if(t.codecs.includes(",")){var n=vt("video",i=t.codecs.split(",")),i=vt("audio",i);if(i=en(t.mimeType,i,"audio"),!MediaSource.isTypeSupported(i))return!1}if(n=en(t.mimeType,n,"video"),!MediaSource.isTypeSupported(n))return!1}return!((n=e.audio)&&(i=Cn(n.codecs),n=en(n.mimeType,i,"audio"),!MediaSource.isTypeSupported(n)))&&(kt()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(Kn(e),!1):((t=e.decodingInfos.some(function(e){return e.supported}))||Kn(e),t))}),Ae(e)})}function In(t,n,i){var r,a,o,s,u,l,c,d,h,f;return Re(function(e){if(t.some(function(e){return e.decodingInfos.length}))return e.return();for(r=navigator.mediaCapabilities,a=[],o=function(t,n){var i;return Re(function(e){return 1==e.g?(Ie(e,2),ke(e,r.decodingInfo(n),4)):2!=e.g?(i=e.h,t.decodingInfos.push(i),Ce(e,0)):(Me(e),JSON.stringify(n),void Ae(e))})},s=Se(t),u=s.next();!u.done;u=s.next())for(l=u.value,c=function(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a,o=r.codecs;if(r.codecs.includes(",")&&(a=r.codecs.split(","),o=Mn(o=vt("video",a)),a=vt("audio",a),a=en(r.mimeType,a,"audio"),n.audio={contentType:a,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}),o=Mn(o),o=en(r.mimeType,o,"video"),n.video={contentType:o,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(o=Cn(i.codecs),o=en(i.mimeType,o,"audio"),n.audio={contentType:o,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],o=new Map;for(var s=(a=Se(a)).next();!s.done;s=a.next()){var u=s.value;o.get(u.keySystem)||o.set(u.keySystem,[]),o.get(u.keySystem).push(u)}a=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var l=(u=Se(o.keys())).next();!l.done;l=u.next()){var c=l.value,d=(l=Object.assign({},n),o.get(c));for(c={keySystem:c,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},s=(d=Se(d)).next();!s.done;s=d.next()){if((s=s.value).initData&&s.initData.length){for(var h=new Set,f=Se(s.initData),p=f.next();!p.done;p=f.next())h.add(p.value.initDataType);c.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),s.persistentStateRequired&&(c.persistentState="required"),s.sessionType&&(c.sessionTypes=[s.sessionType]),i&&(c.audio?c.audio.robustness=c.audio.robustness||s.audioRobustness:c.audio={robustness:s.audioRobustness}),r&&(c.video?c.video.robustness=c.video.robustness||s.videoRobustness:c.video={robustness:s.videoRobustness})}l.keySystemConfiguration=c,e.push(l)}return e}(l,n,i),d=Se(c),h=d.next();!h.done;h=d.next())f=h.value,a.push(o(l,f));return ke(e,Promise.all(a),0)})}function Cn(e){return At()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Mn(e){return"vp9"==e?"vp09.00.41.08":e}function Rn(n,e){e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&n&&n.audio&&!Nn(t,n.audio)||e&&n&&n.video&&!Nn(e,n.video))})}function Nn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Dn(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[],u=(o&&s.push(o),a&&s.push(a),[]),l=(n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null,[]),c=(t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null,new Set);if(t)for(var d=Se(t.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(n)for(h=(d=Se(n.roles)).next();!h.done;h=d.next())c.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function _n(e){return{id:e.id,active:!1,type:me,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Ln(e){var t=e.width||null,n=e.height||null,i=null,r=(e.segmentIndex&&(i=e.segmentIndex.get(0)),e.tilesLayout);return(r=i?i.tilesLayout||r:r)&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Pn(e){return e.__shaka_id||(e.__shaka_id=qn++),e.__shaka_id}function On(e){var t=Un(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function jn(e){var t=Un(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Un(e){return{id:Pn(e),active:!1,type:"",bandwidth:0,language:I(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Bn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Fn(e,t){for(var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),i=new Map,r=(n=Se(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter(function(e){return e<=t})).length?i.get(Math.max.apply(Math,te(r))):i.get(Math.min.apply(Math,te(n)))}function Vn(e,t,n,i){var r,a=e,o=e.filter(function(e){return e.primary}),s=(a=o.length?o:a).length?a[0].language:"",a=a.filter(function(e){return e.language==s});if(a=(a=t&&(r=vn(I(t),e.map(function(e){return e.language})))?e.filter(function(e){return I(e.language)==r}):a).filter(function(e){return e.forced==i}),n){if((e=Hn(a,n)).length)return e}else if((e=a.filter(function(e){return 0==e.roles.length})).length)return e;return(e=a.map(function(e){return e.roles}).reduce(ht,[])).length?Hn(a,e[0]):a}function Hn(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Kn(e){var t=[];e.audio&&t.push(Gn(e.audio)),e.video&&t.push(Gn(e.video)),t.join(", ")}function Gn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(n=bn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},n.get=function(e){return(e=this.g[e])?e.slice():null},n.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length)&&delete this.g[e]},n.size=function(){return Object.keys(this.g).length},n.keys=function(){return Object.keys(this.g)};var qn=0,Wn="smooth",zn="powerEfficient",Xn="bandwidth",Yn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),$n=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Qn(){var t=this;this.l=null,this.o=!1,this.i=new $,navigator.connection&&navigator.connection.addEventListener("change",function(){var e;t.g.useNetworkInformation&&t.o&&(t.i=new $,t.g&&t.i.configure(t.g.advanced),e=t.chooseVariant())&&t.l(e)}),this.m=[],this.u=1,this.C=!1,this.h=this.j=this.g=this.s=null,this.D=new A(function(){var e;t.g.restrictToElementSize&&(e=t.chooseVariant())&&t.l(e)})}function Jn(e){var t=e.g.defaultBandwidthEstimate;return t=navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation?1e6*navigator.connection.downlink:t}function Zn(t,e,n,i){return(e=t?e.filter(function(e){return En(e,t,{width:i,height:n})}):e).sort(function(e,t){return e.bandwidth-t.bandwidth})}(n=Qn.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},n.init=function(e){this.l=e},n.chooseVariant=function(){var e=1/0,t=1/0;this.h&&this.g.restrictToElementSize&&(t=this.g.ignoreDevicePixelRatio?1:N.devicePixelRatio,e=this.j.clientWidth*t,t*=this.j.clientHeight);for(var e=Zn(this.g.restrictions,this.m,e,t),t=this.i.getBandwidthEstimate(Jn(this)),n=(e=this.m.length&&!e.length?[(e=Zn(null,this.m,1/0,1/0))[0]]:e)[0]||null,i=0;i<e.length;i++){for(var r=e[i],a=isNaN(this.u)?1:Math.abs(this.u),o=a*r.bandwidth/this.g.bandwidthDowngradeTarget,s={bandwidth:1/0},u=i+1;u<e.length;u++)if(r.bandwidth!=e[u].bandwidth){s=e[u];break}a=a*s.bandwidth/this.g.bandwidthUpgradeTarget,o<=t&&t<=a&&n.bandwidth!=r.bandwidth&&(n=r)}return this.s=Date.now(),n},n.enable=function(){this.o=!0},n.disable=function(){this.o=!1},n.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.C){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{var n=this.i;if(!(n.g>=n.i))break e;this.C=!0}n=this.chooseVariant(),this.i.getBandwidthEstimate(Jn(this)),n&&this.l(n)}},n.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Jn(this))},n.setVariants=function(e){this.m=e},n.playbackRateChanged=function(e){this.u=e},n.setMediaElement=function(e){var t=this;this.j=e,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in N&&(this.h=new ResizeObserver(function(){t.D.R(ei)}),this.h.observe(this.j))},n.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},t("shaka.abr.SimpleAbrManager",Qn);var ei=1;function ti(e,t){this.g=e,this.h=t}function ni(e,t,n,i){J([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function ii(e,t,n,i){Te([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}ti.prototype.toString=function(){return"v"+this.g+"."+this.h};var ri=null;function ai(e,t){this.h=e,this.g=new Set([e]);for(var n=Se(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function oi(e,t){var n,i;return!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)&&(n=e.audio,i=t.audio,n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&si(n,i)&&ui(n.roles,i.roles))),!(n=n?n:(n=e.video&&t.video)&&!(si(n=e.video,i=t.video)&&ui(n.roles,i.roles)))}function si(e,t){if(e.mimeType==t.mimeType){var n=e.codecs.split(",").map(function(e){return rn(e)[0]}),i=t.codecs.split(",").map(function(e){return rn(e)[0]});if(n.length==i.length){n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return;return 1}}}function ui(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size==i.size){for(var r=(n=Se(n)).next();!r.done;r=n.next())if(!i.has(r.value))return;return 1}}function li(e){this.g=e,this.h=new ci(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ci(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function di(){this.g=pi,this.h=(new Map).set(pi,2).set(fi,1)}function hi(e,t,n){e.h.set(pi,n).set(fi,t)}ai.prototype.add=function(e){return!!oi(this.h,e)&&(this.g.add(e),!0)},ai.prototype.values=function(){return this.g.values()},li.prototype.create=function(e){var t=this,n=e.filter(function(e){return oi(t.g,e)});return n.length?new ai(n[0],n):this.h.create(e)},ci.prototype.create=function(e){var t,n,i,r,a,o=[],s=(n=e,r=this.i,o=(t=vn(I(r),n.map(mn)))?n.filter(function(e){return t==mn(e)}):[],e.filter(function(e){return e.primary}));for(r=o=o.length?o:s.length?s:e,a=this.j,(e=r.filter(function(e){return!!e.audio&&(a?e.audio.roles.includes(a):0==e.audio.roles.length)})).length&&(o=e),this.g&&(e=Fn(o,this.g)).length&&(o=e),e=new ai((o=this.h&&(n=o,i=this.h,(e=n.filter(function(e){return!!e.audio&&e.audio.label.toLowerCase()==i.toLowerCase()})).length)?e:o)[0]),s=(o=Se(o)).next();!s.done;s=o.next())s=s.value,oi(e.h,s)&&e.add(s);return e};var fi=0,pi=1;function gi(e,t){var n=2,i=1e3,r=2,a=.5;this.l=null==e.maxAttempts?n:e.maxAttempts,this.j=null==e.baseDelay?i:e.baseDelay,this.o=null==e.fuzzFactor?a:e.fuzzFactor,this.m=null==e.backoffFactor?r:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function mi(t){var n,i;return Re(function(e){if(1==e.g){if(t.g>=t.l){if(!t.i)throw new Ne(2,7,1010);t.g=1,t.h=t.j}return n=t.g,t.g++,0==n?e.return():(i=t.h*(1+(2*Math.random()-1)*t.o),ke(e,new Promise(function(e){new A(e).R(i/1e3)}),2))}t.h*=t.m,Ae(e)})}function C(e,t){this.promise=e,this.i=t,this.g=!1}function vi(e){return new C(Promise.reject(e),function(){return Promise.resolve()})}function yi(){var e=Promise.reject(new Ne(2,7,7001));return e.catch(function(){}),new C(e,function(){return Promise.resolve()})}function bi(e){return new C(Promise.resolve(e),function(){return Promise.resolve()})}function Ti(e){return new C(e,function(){return e.catch(function(){})})}function wi(e){return new C(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function ve(e,t){if(t)if(t instanceof Map)for(var n=Se(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=(N.performance&&N.performance.now?N.performance:Date).now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function xi(e){var t,n=new ve(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}C.prototype.abort=function(){return this.g=!0,this.i()},C.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},C.prototype.Z=function(i,r){function e(n){return function(e){var t;o.g&&n?s.reject(u):(t=n?i:r)?a=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(t,e,s):(n?s.resolve:s.reject)(e)}}function a(){return s.reject(u),o.abort()}var o=this,s=new R,u=new Ne(2,7,7001);return this.promise.then(e(!0),e(!1)),new C(s,function(){return a()})},t("shaka.util.AbortableOperation",C),C.prototype.chain=C.prototype.Z,C.all=wi,C.notAbortable=Ti,C.completed=bi,C.aborted=yi,C.failed=vi,ve.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ve.prototype.stopImmediatePropagation=function(){this.g=!0},ve.prototype.stopPropagation=function(){},t("shaka.util.FakeEvent",ve);var Ei={ug:"abrstatuschanged",vg:"adaptation",wg:"buffering",yg:"downloadfailed",zg:"downloadheadersreceived",Ag:"drmsessionupdate",Cg:"emsg",Error:"error",Dg:"expirationupdated",Eg:"gapjumped",Gg:"loaded",Hg:"loading",Jg:"manifestparsed",Kg:"mediaqualitychanged",Metadata:"metadata",Mg:"onstatechange",Ng:"onstateidle",Og:"ratechange",Qg:"sessiondata",Rg:"stalldetected",Sg:"streaming",Tg:"textchanged",Ug:"texttrackvisibility",Vg:"timelineregionadded",Wg:"timelineregionenter",Xg:"timelineregionexit",Yg:"trackschanged",$g:"unloading",ah:"variantchanged"};function h(){this.da=new bn,this.Lc=this}function Si(e){var a=new Set;return function e(t){switch(typeof t){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t||t.buffer&&t.buffer.constructor==ArrayBuffer)return t;if(a.has(t))return null;var n=t.constructor==Array;if(t.constructor!=Object&&!n)return null;a.add(t);var i,r=n?[]:{};for(i in t)r[i]=e(t[i]);return n&&(r.length=t.length),r}}(e)}function ki(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ai(){this.g=[]}function Ii(e,t){e.g.push(t.finally(function(){Le(e.g,t)}))}function a(e,t,n){h.call(this),this.i=!1,this.m=new Ai,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function Ci(e,t,n,i){n=n||_i;var r=Li[e];(!r||n>=r.priority)&&(Li[e]={priority:n,Vf:t,Wf:void 0!==i&&i})}function Mi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Ri(){this.g=0}function Ni(e,t,n){C.call(this,e,t),this.h=n}h.prototype.addEventListener=function(e,t){this.da&&this.da.push(e,t)},h.prototype.removeEventListener=function(e,t){this.da&&this.da.remove(e,t)},h.prototype.dispatchEvent=function(e){if(!this.da)return!0;for(var t=this.da.get(e.type)||[],n=(t=Se(t=(n=this.da.get("All"))?t.concat(n):t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Lc,e.currentTarget=this.Lc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},h.prototype.release=function(){this.da=null},Ai.prototype.destroy=function(){for(var e=[],t=Se(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},T(a,h),(n=a.prototype).$d=function(e){this.o=e},n.Xf=function(e){this.g.add(e)},n.ng=function(e){this.g.delete(e)},n.df=function(){this.g.clear()},n.Yf=function(e){this.h.add(e)},n.og=function(e){this.h.delete(e)},n.ef=function(){this.h.clear()},n.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),h.prototype.release.call(this),this.m.destroy()},n.request=function(s,e){var u=this,t=new Ri;if(this.i)return(n=Promise.reject(new Ne(2,7,7001))).catch(function(){}),new Ni(n,function(){return Promise.resolve()},t);e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?Si(e.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},e.uris=Si(e.uris);var n,i=(n=function(e,t,n){for(var i=bi(void 0),r={},a=(e=Se(e.g)).next();!a.done;r={pd:r.pd},a=e.next())r.pd=a.value,i=i.Z(function(e){return function(){return n.body&&(n.body=qe(n.body)),e.pd(t,n)}}(r));return i.Z(void 0,function(e){if(e instanceof Ne&&7001==e.code)throw e;throw new Ne(2,1,1006,e)})}(this,s,e)).Z(function(){return function i(r,a,o,s,u,l,c){r.o&&(o.uris[u]=o.uris[u].replace("http://","https://"));var n,d,h,f,p,g,e=new Je(o.uris[u]),t=e.Fa,m=!1,v=(t||(Ze(e,t=(t=location.protocol).slice(0,-1)),o.uris[u]=e.toString()),t=t.toLowerCase(),(t=Li[t])?t.Vf:null);return v?(d=t.Wf,f=h=null,g=p=!1,Ti(mi(s)).Z(function(){if(r.i)return yi();n=Date.now();var e,i,t=v(o.uris[u],o,a,function(e,t,n){h&&h.stop(),f&&f.R(i/1e3),r.l&&a==Di&&(r.l(e,t),m=!0,c.g=n)},function(e){r.j&&r.j(e,o,a),g=!0});return d&&((e=o.retryParameters.connectionTimeout)&&(h=new A(function(){p=!0,t.abort()})).R(e/1e3),i=o.retryParameters.stallTimeout)&&(f=new A(function(){p=!0,t.abort()})),t}).Z(function(e){h&&h.stop(),f&&f.stop(),null==e.timeMs&&(e.timeMs=Date.now()-n);var t={response:e,Kf:m};return!g&&r.j&&r.j(e.headers,o,a),t},function(e){var t,n;if(h&&h.stop(),f&&f.stop(),r.s&&(t=null,n=0,e instanceof Ne&&1001==(t=e).code&&(n=e.data[1]),r.s(o,t,n,p)),r.i)return yi();if((e=p?new Ne(1,1,1003,o.uris[u],a):e)instanceof Ne){if(7001==e.code)throw e;if(1010==e.code)throw l;if(1==e.severity)return t=new ve("retry",t=(new Map).set("error",e)),r.dispatchEvent(t),u=(u+1)%o.uris.length,i(r,a,o,s,u,e,c)}throw e})):vi(new Ne(2,1,1e3,e))}(u,s,e,new gi(e.retryParameters,!1),0,null,t)}),r=i.Z(function(e){for(var t=u,n=s,i=e,r=bi(void 0),a={},o=(t=Se(t.h)).next();!o.done;a={qd:a.qd},o=t.next())a.qd=o.value,r=r.Z(function(t){return function(){var e=i.response;return e.data&&(e.data=qe(e.data)),t.qd(n,e)}}(a));return r.Z(function(){return i},function(e){var t=2;if(e instanceof Ne){if(7001==e.code)throw e;t=e.severity}throw new Ne(t,1,1007,e)})}),a=Date.now(),o=0,l=(n.promise.then(function(){o=Date.now()-a},function(){}),0),c=(i.promise.then(function(){l=Date.now()},function(){}),r.Z(function(e){var t=Date.now()-l,n=e.response;return n.timeMs+=o,n.timeMs+=t,e.Kf||!u.l||n.fromCache||s!=Di||u.l(n.timeMs,n.data.byteLength),n},function(e){throw e&&(e.severity=2),e}));return n=new Ni(c.promise,function(){return c.abort()},t),Ii(this.m,n),n},t("shaka.net.NetworkingEngine",a),a.makeRequest=Mi,a.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},a.prototype.clearAllResponseFilters=a.prototype.ef,a.prototype.unregisterResponseFilter=a.prototype.og,a.prototype.registerResponseFilter=a.prototype.Yf,a.prototype.clearAllRequestFilters=a.prototype.df,a.prototype.unregisterRequestFilter=a.prototype.ng,a.prototype.registerRequestFilter=a.prototype.Xf,a.unregisterScheme=function(e){delete Li[e]},a.registerScheme=Ci,a.prototype.setForceHTTPS=a.prototype.$d,a.NumBytesRemainingClass=Ri,T(Ni,C),a.PendingRequest=Ni;var Di=1,_i=(a.RequestType={MANIFEST:0,SEGMENT:Di,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6},3),Li=(a.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:_i},{});function Pi(e){this.g=!1,this.h=new R,this.i=e}function O(e,t){if(e.g){if(t instanceof Ne&&7003==t.code)throw t;throw new Ne(2,7,7003,t)}}function f(){this.g=new bn}function Oi(e,t,n,i){var r;this.target=e,this.type=t,this.listener=n,this.g=(e=e,null!=(i=i)&&("boolean"==typeof i||(r=new Set(["passive","capture"]),Object.keys(i).filter(function(e){return!r.has(e)}),function(e){var t=ji;if(null==t){t=!1;try{var n={},i={get:function(){return!(t=!0)}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}ji=t}return t}(e))?i:i.capture||!1)),this.target.addEventListener(t,n,this.g)}Pi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(n=f.prototype).release=function(){this.mb(),this.g=null},n.B=function(e,t,n,i){this.g&&(e=new Oi(e,t,n,i),this.g.push(t,e))},n.oa=function(n,i,r,e){var a=this;this.B(n,i,function e(t){a.xc(n,i,e),r(t)},e)},n.xc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=Se(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.xc(),this.g.remove(t,r))},n.mb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,te(t.g[e]));for(n=(t=Se(n)).next();!n.done;n=t.next())n.value.xc();this.g.g={}}},t("shaka.util.EventManager",f),f.prototype.removeAll=f.prototype.mb,f.prototype.unlisten=f.prototype.xc,f.prototype.listenOnce=f.prototype.oa,f.prototype.listen=f.prototype.B,Oi.prototype.xc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var ji=void 0;function Ui(e,t){for(var n=[],i=Se(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function Bi(e){for(var t=new Map,n=Se(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Fi(e){var n={};return e.forEach(function(e,t){n[t]=e}),n}function b(e,t){this.S=We(e),this.h=t==Hi,this.g=0}function Vi(){return new Ne(2,3,3e3)}(n=b.prototype).ma=function(){return this.g<this.S.byteLength},n.$=function(){return this.g},n.tf=function(){return this.S.byteLength},n.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){throw Vi()}},n.Rd=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw Vi()}},n.N=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw Vi()}},n.Ie=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw Vi()}},n.Jb=function(){try{var e,t;this.h?(e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0)):(t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1))}catch(e){throw Vi()}if(2097151<t)throw new Ne(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},n.Za=function(e){if(this.g+e>this.S.byteLength)throw Vi();var t=D(this.S,this.g,e);return this.g+=e,t},n.skip=function(e){if(this.g+e>this.S.byteLength)throw Vi();this.g+=e},n.dg=function(e){if(this.g<e)throw Vi();this.g-=e},n.seek=function(e){if(e<0||e>this.S.byteLength)throw Vi();this.g=e},n.qc=function(){for(var e=this.g;this.ma()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=D(this.S,e,this.g-e),this.g+=1,Pt(e)},t("shaka.util.DataViewReader",b),b.prototype.readTerminatedString=b.prototype.qc,b.prototype.rewind=b.prototype.dg,b.prototype.readBytes=b.prototype.Za,b.prototype.readUint64=b.prototype.Jb,b.prototype.readInt32=b.prototype.Ie,b.prototype.readUint32=b.prototype.N,b.prototype.readUint16=b.prototype.Rd,b.prototype.readUint8=b.prototype.Ra,b.prototype.getLength=b.prototype.tf,b.prototype.getPosition=b.prototype.$,b.prototype.hasMoreData=b.prototype.ma;var Hi=1;function _(){this.i=[],this.h=[],this.g=!1}function Ki(e){for(var t=Xi(e);e.reader.ma()&&!e.parser.g;)e.parser.Zc(e.start+t,e.reader,e.partialOkay)}function Gi(e){for(var t=Xi(e),n=e.reader.N(),i=0;i<n&&(e.parser.Zc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function qi(t){return function(e){t(e.reader.Za(e.reader.S.byteLength-e.reader.$()))}}function Wi(e){for(var t=0,n=(e=Se(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function zi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Xi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}b.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Hi},(n=_.prototype).box=function(e,t){e=Wi(e);return this.i[e]=Yi,this.h[e]=t,this},n.U=function(e,t){e=Wi(e);return this.i[e]=$i,this.h[e]=t,this},n.stop=function(){this.g=!0},n.parse=function(e,t,n){for(e=new b(e,0),this.g=!1;e.ma()&&!this.g;)this.Zc(0,e,t,n)},n.Zc=function(e,t,n,i){var r=t.$();if(i&&r+8>t.S.byteLength)this.g=!0;else{var a=t.N(),o=t.N(),s=!1;switch(a){case 0:a=t.S.byteLength-r;break;case 1:if(i&&t.$()+8>t.S.byteLength)return void(this.g=!0);a=t.Jb(),s=!0}var u=this.h[o];if(u){var l=null,c=null;if(this.i[o]==$i){if(i&&t.$()+4>t.S.byteLength)return void(this.g=!0);l=(c=t.N())>>>24,c&=16777215}o=r+a,n&&o>t.S.byteLength&&(o=t.S.byteLength),i&&o>t.S.byteLength?this.g=!0:u({parser:this,partialOkay:n||!1,version:l,flags:c,reader:t=new b(t=0<(i=o-t.$())?t.Za(i):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:s})}else t.skip(Math.min(r+a-t.$(),t.S.byteLength-t.$()))}},t("shaka.util.Mp4Parser",_),_.headerSize=Xi,_.typeToString=zi,_.allData=qi,_.sampleDescription=Gi,_.children=Ki,_.prototype.parseNext=_.prototype.Zc,_.prototype.fullBox=_.prototype.U;var Yi=0,$i=1;function Qi(e){var r=this;this.g=[],this.h=[],this.data=[],(new _).box("moov",Ki).box("moof",Ki).U("pssh",function(e){if(!(1<e.version)){var t=D(e.reader.S,-12,e.size);if(r.data.push(t),r.g.push(Wt(e.reader.Za(16))),0<e.version)for(var t=e.reader.N(),n=0;n<t;n++){var i=Wt(e.reader.Za(16));r.h.push(i)}}}).parse(e)}function Ji(e,t,n,i){var r=e.length,a=t.length+16+r,o=(0<i&&(a+=4+16*n.size),new Uint8Array(a)),s=We(o),u=0;if(s.setUint32(u,a),s.setUint32(u+=4,1886614376),u+=4,i<1?s.setUint32(u,0):s.setUint32(u,16777216),o.set(t,u+=4),u+=t.length,0<i)for(s.setUint32(u,n.size),u+=4,n=(t=Se(n)).next();!n.done;n=t.next())n=qt(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,r),o.set(e,u+4),o}function Zi(t,e){var i=this;e=void 0===e?1:e,this.D=t,this.G=new Set,this.l=this.u=null,this.ha=this.ca=!1,this.I=0,this.g=null,this.s=new f,this.i=new Map,this.C=[],this.o=new R,this.h=null,this.m=function(e){i.o.reject(e),t.onError(e)},this.ia=new Map,this.da=new Map,this.T=new A(function(){return t=(e=i).ia,(n=e.da).clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.m(new Ne(2,6,6014)),void e.D.Xc(Fi(n));var e,t,n}),this.M=!1,this.L=[],this.O=!1,this.ea=new A(function(){var r;(r=i).i.forEach(function(e,t){var n=e.Od,i=t.expiration;(i=isNaN(i)?1/0:i)!=n&&(r.D.onExpirationUpdated(t.sessionId,i),e.Od=i)})}).Da(e),this.o.catch(function(){}),this.j=new Pi(function(){return t=i,Re(function(e){switch(e.g){case 1:return t.s.release(),t.s=null,t.o.reject(),t.ea.stop(),t.ea=null,t.T.stop(),t.T=null,ke(e,hr(t),2);case 2:if(t.l)return Ie(e,4),ke(e,t.l.setMediaKeys(null),6);e.A(3);break;case 6:Ce(e,5);break;case 4:Me(e);case 5:t.l=null;case 3:t.g=null,t.G.clear(),t.u=null,t.C=[],t.h=null,t.m=function(){},t.D=null,t.Y=!1,t.F=null,Ae(e)}});var t}),this.Y=!1,this.F=null}function er(e,t,n){return e.C=n,e.M=0<n.length,tr(e,t)}function tr(c,d){var h,f,p,g,m,v,y,b,T,w;return Re(function(e){if(1==e.g){if(h=function(e){if(0==(e=Bi(e.h.clearKeys)).size)return null;var n=[],i=[];e.forEach(function(e,t){t=qt(t),e=qt(e),t={kty:"oct",kid:Kt(t,!1),k:Kt(e,!1)};n.push(t),i.push(t.kid)}),e=JSON.stringify({keys:n});var t=[{initData:D(Ut(JSON.stringify({kids:i}))),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+N.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t,keyIds:new Set(i)}}(c))for(f=Se(d),p=f.next();!p.done;p=f.next())(g=p.value).video&&(g.video.drmInfos=[h]),g.audio&&(g.audio.drmInfos=[h]);if(!(m=d.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}))){w=Bi(c.h.servers);{var t=d;var n=[];w.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})});for(var i=Se(t),r=i.next();!r.done;r=i.next())(r=r.value).video&&(r.video.drmInfos=n),r.audio&&(r.audio.drmInfos=n)}}for(v=Se(d),p=v.next();!p.done;p=v.next())for(y=p.value,y=pr(y),b=Se(y),T=b.next();!T.done;T=b.next())a=T.value,o=Bi(c.h.servers),s=Bi(c.h.advanced||{}),u=c.h.keySystemsMapping,l=void 0,!(l=a.keySystem)||"org.w3.clearkey"==l&&a.licenseServerUri||(o.size&&(o=o.get(l)||"",a.licenseServerUri=o),a.keyIds||(a.keyIds=new Set),(s=s.get(l))&&(a.distinctiveIdentifierRequired||(a.distinctiveIdentifierRequired=s.distinctiveIdentifierRequired),a.persistentStateRequired||(a.persistentStateRequired=s.persistentStateRequired),a.videoRobustness||(a.videoRobustness=s.videoRobustness),a.audioRobustness||(a.audioRobustness=s.audioRobustness),a.serverCertificate||(a.serverCertificate=s.serverCertificate),s.sessionType&&(a.sessionType=s.sessionType),a.serverCertificateUri||(a.serverCertificateUri=s.serverCertificateUri)),u[l]&&(a.keySystem=u[l]),N.cast&&N.cast.__platform__&&"com.microsoft.playready"==l&&(a.keySystem="com.chromecast.playready"));return ke(e,In(d,c.M,c.Y),2)}var a,o,s,u,l;return m||Object.keys(c.h.servers).length?(w=ur(c,void 0,d),e.return(m?w:w.catch(function(){}))):(c.ca=!0,e.return(Promise.resolve()))})}function nr(t){var n;return Re(function(e){switch(e.g){case 1:if(t.l.mediaKeys)return e.return();if(t.F)return ke(e,t.F,3);e.A(2);break;case 3:return e.return();case 2:return Ie(e,4),t.F=t.l.setMediaKeys(t.u),ke(e,t.F,6);case 6:Ce(e,5);break;case 4:n=Me(e),t.m(new Ne(2,6,6003,n.message));case 5:O(t.j),Ae(e)}})}function ir(t){var n;return Re(function(e){switch(e.g){case 1:if(!t.u||!t.g)return e.return();if(!t.g.serverCertificateUri||t.g.serverCertificate&&t.g.serverCertificate.length){e.A(2);break}return n=Mi([t.g.serverCertificateUri],t.h.retryParameters),Ie(e,3),ke(e,t.D.kb.request(5,n).promise,5);case 5:n=e.h,t.g.serverCertificate=D(n.data),Ce(e,4);break;case 3:throw new Ne(2,6,6017,Me(e));case 4:if(t.j.g)return e.return();case 2:return t.g.serverCertificate&&t.g.serverCertificate.length?(Ie(e,6),ke(e,t.u.setServerCertificate(t.g.serverCertificate),8)):e.return();case 8:Ce(e,0);break;case 6:throw new Ne(2,6,6004,Me(e).message)}})}function rr(e){for(var t=(e.g?e.g.initData:[])||[],n=Se(t),i=n.next();!i.done;i=n.next())ar(e,(i=i.value).initDataType,i.initData);for(i=(n=Se(e.C)).next();!i.done;i=n.next())lr(e,i.value);return t.length||e.C.length||e.o.resolve(),e.o}function ar(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=Se(i)).next();!r.done;r=i.next())if(Ke(n,r.value.initData)&&!m("Tizen 2"))return;0<e.i.size&&gr(e)&&(e.o.resolve(),e.o=new R,e.o.catch(function(){}));var a=e,o=t,s=n,t=e.g.sessionType;try{var u=a.u.createSession(t)}catch(o){return void a.m(new Ne(2,6,6005,o.message))}a.s.B(u,"message",function(e){a.l&&a.h.delayLicenseRequestUntilPlayed&&a.l.paused&&!a.O?a.L.push(e):cr(a,e)}),a.s.B(u,"keystatuseschange",function(e){return dr(a,e)}),a.i.set(u,{initData:s,initDataType:o,loaded:!1,Od:1/0,Ja:null,type:t});try{s=a.h.initDataTransform(s,o,a.g)}catch(s){return void((o=s)instanceof Ne||(o=new Ne(2,6,6016,s)),a.m(o))}a.h.logLicenseExchange&&Kt(s),u.generateRequest(o,s).catch(function(e){var t,n;a.j.g||(a.i.delete(u),(t=e.errorCode)&&t.systemCode&&((n=t.systemCode)<0&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)),a.m(new Ne(2,6,6006,e.message,e,n)))})}}function or(e){return e&&e.match(/^com\.(microsoft|chromecast)\.playready/)}function sr(e){return e=Ui(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function ur(E,S,k){var A,I,C,M,R,N,D,_,L,P;return Re(function(e){switch(e.g){case 1:if(A=new Map,k.length){I=function(e,t,n){for(var i=Se(t),r=i.next();!r.done;r=i.next())for(var a=Se(pr(r.value)),r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r);if(1==n.size&&n.has(""))throw new Ne(2,6,6e3);for(i={},r=(e=Se(e.h.preferredKeySystems)).next();!r.done;i={nd:i.nd},r=e.next())for(i.nd=r.value,r=(a=Se(t)).next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(t){return function(e){return e.supported&&null!=e.keySystemAccess&&e.keySystemAccess.keySystem==t.nd}}(i)))return r.keySystemAccess;for(r=(e=Se([!0,!1])).next();!r.done;r=e.next())for(i=r.value,r=(a=Se(t)).next();!r.done;r=a.next()){var o=Se(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){var u=Se(r=n.get(s.keySystemAccess.keySystem));for(r=u.next();!r.done;r=u.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}(E,k,A),e.A(2);break}return ke(e,(l=E,c=S,Re(function(e){switch(e.g){case 1:if(1==c.size&&c.has(""))throw new Ne(2,6,6e3);for(h=Se(c.values()),f=h.next();!f.done;f=h.next())0==(p=f.value).audioCapabilities.length&&delete p.audioCapabilities,0==p.videoCapabilities.length&&delete p.videoCapabilities;g=Se(l.h.preferredKeySystems),m=g.next();case 2:if(m.done)e.A(4);else{if(w=m.value,c.has(w))return x=c.get(w),Ie(e,6),ke(e,navigator.requestMediaKeySystemAccess(w,[x]),8);e.A(3)}break;case 8:return d=e.h,e.return(d);case 6:Me(e);case 7:O(l.j);case 3:m=g.next(),e.A(2);break;case 4:v=Se([!0,!1]),y=v.next();case 9:if(y.done){e.A(11);break}b=y.value,T=Se(c.keys()),m=T.next();case 12:if(m.done)y=v.next(),e.A(9);else{if(w=m.value,x=c.get(w),x.drmInfos.some(function(e){return!!e.licenseServerUri})==b)return Ie(e,15),ke(e,navigator.requestMediaKeySystemAccess(w,[x]),17);e.A(13)}break;case 17:return d=e.h,e.return(d);case 15:Me(e);case 16:O(l.j);case 13:m=T.next(),e.A(12);break;case 11:return e.return(d)}})),3);case 3:I=e.h;case 2:if(!(C=I))throw new Ne(2,6,6001);for(O(E.j),Ie(e,4),E.G.clear(),P=C.getConfiguration(),L=P.audioCapabilities||[],P=P.videoCapabilities||[],M=Se(L),R=M.next();!R.done;R=M.next())N=R.value,E.G.add(N.contentType.toLowerCase());for(D=Se(P),R=D.next();!R.done;R=D.next())_=R.value,E.G.add(_.contentType.toLowerCase());if(k.length){for(var t=C.keySystem,n=A.get(C.keySystem),i=[],r=[],a=[],o=[],s=new Set,u=(mr(n,i,a,r,o,s),E.M?"persistent-license":"temporary"),t={keySystem:t,licenseServerUri:i[0],distinctiveIdentifierRequired:n[0].distinctiveIdentifierRequired,persistentStateRequired:n[0].persistentStateRequired,sessionType:n[0].sessionType||u,audioRobustness:n[0].audioRobustness||"",videoRobustness:n[0].videoRobustness||"",serverCertificate:a[0],serverCertificateUri:r[0],initData:o,keyIds:s},i=(n=Se(n)).next();!i.done;i=n.next())(i=i.value).distinctiveIdentifierRequired&&(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),i.persistentStateRequired&&(t.persistentStateRequired=i.persistentStateRequired);n=t}else n=C.keySystem,t=S.get(C.keySystem),i=[],r=[],a=[],o=[],s=new Set,mr(t.drmInfos,i,a,r,o,s),n={keySystem:n,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,sessionType:t.sessionTypes[0]||"temporary",audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:a[0],serverCertificateUri:r[0],initData:o,keyIds:s};if(E.g=n,E.g.licenseServerUri)return ke(e,C.createMediaKeys(),6);throw new Ne(2,6,6012,E.g.keySystem);case 6:return L=e.h,O(E.j),E.u=L,E.ca=!0,ke(e,ir(E),7);case 7:O(E.j),Ce(e,0);break;case 4:if(P=Me(e),O(E.j,P),E.g=null,E.G.clear(),P instanceof Ne)throw P;throw new Ne(2,6,6002,P.message)}var l,c,d,h,f,p,g,m,v,y,b,T,w,x})}function lr(n,e){var i,r,a;return Re(function(t){switch(t.g){case 1:try{i=n.u.createSession("persistent-license")}catch(e){return r=new Ne(2,6,6005,e.message),n.m(r),t.return(Promise.reject(r))}return n.s.B(i,"message",function(e){n.l&&n.h.delayLicenseRequestUntilPlayed&&n.l.paused&&!n.O?n.L.push(e):cr(n,e)}),n.s.B(i,"keystatuseschange",function(e){return dr(n,e)}),r={initData:null,initDataType:null,loaded:!1,Od:1/0,Ja:null,type:"persistent-license"},n.i.set(i,r),Ie(t,2),ke(t,i.load(e),4);case 4:return a=t.h,O(n.j),a?(r.loaded=!0,gr(n)&&n.o.resolve(),t.return(i)):(n.i.delete(i),n.m(new Ne(2,6,6013)),t.return(Promise.resolve()));case 2:a=Me(t),O(n.j,a),n.i.delete(i),n.m(new Ne(2,6,6005,a.message));case 3:return t.return(Promise.resolve())}})}function cr(a,o){var s,u,l,c,d,h,f;Re(function(e){switch(e.g){case 1:if(s=o.target,a.h.logLicenseExchange&&Kt(o.message),u=a.i.get(s),l=a.g.licenseServerUri,d=a.h.advanced[a.g.keySystem],"individualization-request"==o.messageType&&d&&d.individualizationServer&&(l=d.individualizationServer),(d=Mi([l],a.h.retryParameters)).body=o.message,d.method="POST",d.licenseRequestType=o.messageType,d.sessionId=s.sessionId,d.drmInfo=a.g,u&&(d.initData=u.initData,d.initDataType=u.initDataType),or(a.g.keySystem)){var t=d;var n=Ot(t.body,!0,!0);if(n.includes("PlayReadyKeyMessage")){for(var i=Se((n=(new DOMParser).parseFromString(n,"application/xml")).getElementsByTagName("HttpHeader")),r=i.next();!r.done;r=i.next())r=r.value,t.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;t.body=Gt(n.getElementsByTagName("Challenge")[0].textContent)}else t.headers["Content-Type"]="text/xml; charset=utf-8"}return l=Date.now(),Ie(e,2),ke(e,a.D.kb.request(2,d).promise,4);case 4:c=e.h,Ce(e,3);break;case 2:return d=Me(e),h=new Ne(2,6,6007,d),a.m(h),u&&u.Ja&&u.Ja.reject(h),e.return();case 3:return a.j.g?e.return():(a.I+=(Date.now()-l)/1e3,a.h.logLicenseExchange&&Kt(c.data),Ie(e,5),ke(e,s.update(c.data),7));case 7:Ce(e,6);break;case 5:return h=Me(e),f=new Ne(2,6,6008,h.message),a.m(f),u&&u.Ja&&u.Ja.reject(f),e.return();case 6:if(a.j.g)return e.return();f=new ve("drmsessionupdate"),a.D.onEvent(f),u&&(u.Ja&&u.Ja.resolve(),new A(function(){u.loaded=!0,gr(a)&&a.o.resolve()}).R(yr)),Ae(e)}})}function dr(o,e){var e=e.target,s=o.i.get(e),u=!1,t=(e.keyStatuses.forEach(function(e,t){var n,i,r,a;"string"==typeof t&&(n=t,t=e,e=n),or(o.g.keySystem)&&16==t.byteLength&&(navigator.userAgent.match(/Edge?\//)||Mt())&&(i=(n=We(t)).getUint32(0,!0),r=n.getUint16(4,!0),a=n.getUint16(6,!0),n.setUint32(0,i,!1),n.setUint16(4,r,!1),n.setUint16(6,a,!1)),"status-pending"!=e&&(s.loaded=!0),"expired"==e&&(u=!0),n=Wt(t),o.ia.set(n,e)}),e.expiration-Date.now());(t<0||u&&t<1e3)&&s&&!s.Ja&&(o.i.delete(e),e.close().catch(function(){})),gr(o)&&(o.o.resolve(),o.T.R(br))}function hr(a){var t;return Re(function(e){return t=Array.from(a.i.entries()),a.i.clear(),ke(e,Promise.all(t.map(function(e){var i=(e=Se(e)).next().value,r=e.next().value;return Re(function(e){return 1==e.g?(Ie(e,2),a.ha||a.C.includes(i.sessionId)||"persistent-license"!==r.type?ke(e,(t=i,Re(function(e){return 1==e.g?(n=new Promise(function(e,t){new A(t).R(vr)}),Ie(e,2),ke(e,Promise.race([Promise.all([t.close(),t.closed]),n]),4)):2!=e.g?Ce(e,0):(Me(e),void Ae(e))})),5):ke(e,i.remove(),5)):2!=e.g?Ce(e,0):(Me(e),void Ae(e));var t,n})})),0)})}function fr(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=Se(e),r=i.next();!r.done;r=i.next())for(var r=r.value,a={},o=Se(t),s=o.next();!s.done;a={Ea:a.Ea},s=o.next())if(s=s.value,r.keySystem==s.keySystem){a.Ea=[],a.Ea=a.Ea.concat(r.initData||[]),a.Ea=a.Ea.concat(s.initData||[]),a.Ea=a.Ea.filter(function(n){return function(t,e){return void 0===t.keyId||e===n.Ea.findIndex(function(e){return e.keyId===t.keyId})}}(a)),o=r.keyIds&&s.keyIds?new Set([].concat(te(r.keyIds),te(s.keyIds))):r.keyIds||s.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||s.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||s.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||s.persistentStateRequired,videoRobustness:r.videoRobustness||s.videoRobustness,audioRobustness:r.audioRobustness||s.audioRobustness,serverCertificate:r.serverCertificate||s.serverCertificate,serverCertificateUri:r.serverCertificateUri||s.serverCertificateUri,initData:a.Ea,keyIds:o});break}return n}function pr(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function gr(e){for(var t=Se(e=e.i.values()),n=t.next();!n.done;n=t.next())if(!n.value.loaded)return;return 1}function mr(e,t,n,i,r,a){for(var o={},s=(e=Se(e)).next();!s.done;o={qa:o.qa},s=e.next()){if(o.qa=s.value,t.includes(o.qa.licenseServerUri)||t.push(o.qa.licenseServerUri),i.includes(o.qa.serverCertificateUri)||i.push(o.qa.serverCertificateUri),!o.qa.serverCertificate||n.some(function(t){return function(e){return Ke(e,t.qa.serverCertificate)}}(o))||n.push(o.qa.serverCertificate),o.qa.initData)for(var s={},u=Se(o.qa.initData),l=u.next();!l.done;s={Ac:s.Ac},l=u.next())s.Ac=l.value,r.some(function(n){return function(e){var t=n.Ac;return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&Ke(e.initData,t.initData)}}(s))||r.push(s.Ac);if(o.qa.keyIds)for(u=(s=Se(o.qa.keyIds)).next();!u.done;u=s.next())a.add(u.value)}}(n=Zi.prototype).destroy=function(){return this.j.destroy()},n.configure=function(e){this.h=e},n.Yb=function(t){var n,i=this;return Re(function(e){if(1==e.g)return i.u?(i.l=t,i.s.oa(i.l,"play",function(){for(var e=Se(i.L),t=e.next();!t.done;t=e.next())cr(i,t.value);i.O=!0,i.L=[]}),"webkitCurrentPlaybackTargetIsWireless"in i.l&&i.s.B(i.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return hr(i)}),(n=i.g.initData.find(function(e){return 0<e.initData.length}))||N.shakaMediaKeysPolyfill||i.C.length?ke(e,nr(i),2):e.A(2)):(i.s.oa(t,"encrypted",function(){i.m(new Ne(2,6,6010))}),e.return());rr(i),n||i.C.length||i.h.parseInbandPsshEnabled||i.s.B(i.l,"encrypted",function(e){return t=i,n=e,Re(function(e){if(1==e.g)return ke(e,nr(t),2);ar(t,n.initDataType,D(n.initData)),Ae(e)});var t,n}),Ae(e)})},n.ec=function(){for(var e=1/0,t=this.i.keys(),n=(t=Se(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Nc=function(){return Fi(this.da)};var vr=1,yr=5,br=.5,Tr=new wt(function(){return qe(new Uint8Array([0]))});function wr(){}function xr(t,n,i,r){var a,o;return Re(function(e){if(1==e.g)return r&&(a=kr[r.toLowerCase()])?e.return(a):(a=Sr(t))&&(o=Ar[a])?e.return(o):r?e.A(2):ke(e,Er(t,n,i),3);if(2!=e.g&&(r=e.h)&&(o=kr[r]))return e.return(o);throw new Ne(2,4,4e3,t)})}function Er(t,n,i){var r,a;return Re(function(e){return 1==e.g?((r=Mi([t],i)).method="HEAD",ke(e,n.request(0,r).promise,2)):(r=e.h,a=r.headers["content-type"],e.return(a?a.toLowerCase().split(";").shift():""))})}function Sr(e){return 1==(e=new Je(e).ua.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}t("shaka.media.ManifestParser",wr),wr.unregisterParserByMime=function(e){delete kr[e]},wr.registerParserByMime=function(e,t){kr[e]=t},wr.registerParserByExtension=function(e,t){Ar[e]=t};var kr={},Ar={};function Ir(e,t,n){0!=(t=(e=We(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Cr=new wt(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Mr(e,t,n,i,r){if(r<=i)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=Rr(i,r,s,u,l,c);a<=o;a++){for(var h,f,p,g,m=n[a],v=-1,y=-1,b=0;b<m.length;b++)if(null!=m[b]&&""!==m[b].g.trim()){v=b;break}for(b=m.length-1;0<=b;b--)if(null!=m[b]&&""!==m[b].g.trim()){y=b;break}if(-1===v||-1===y)m=Nr(i,r),e.nestedCues.push(m);else{for(;v<=y;v++)(b=m[v])?(h=b.l,f=b.i,p=b.j,g=b.h,h==s&&f==u&&p==l&&g==c||(d.payload&&e.nestedCues.push(d),d=Rr(i,r,h,f,p,g),s=h,u=f,l=p,c=g),d.payload+=b.g):d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=Nr(i,r),e.nestedCues.push(d)),d=Rr(i,r,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Rr(e,t,n,i,r,a){return e=new M(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function Nr(e,t){e=new M(e,t,"");return e.lineBreak=!0,e}function Dr(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function _r(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Pr(this)}function Lr(e,t,n){return Mr(new M(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function Pr(e){Ur(e,0,15),e.g=1}function Or(e,t,n){if(!(n<32||127<n)){var i="";switch(t){case Br:i=Kr.has(n)?Kr.get(n):String.fromCharCode(n);break;case Fr:i=Gr.get(n);break;case Vr:e.i[e.g].pop(),i=qr.get(n);break;case Hr:e.i[e.g].pop(),i=Wr.get(n)}i&&e.i[e.g].push(new Dr(i,e.m,e.j,e.o,e.l))}}function jr(e,t,n,i){if(!(n<0||t<0))if(n<=t)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(e){return e});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(e){return e})}function Ur(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Br=0,Fr=1,Vr=2,Hr=3,Kr=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Gr=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),qr=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Wr=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function zr(e,t){this.h=Qr,this.o=new _r(e,t),this.i=new _r(e,t),this.l=new _r(e,t),this.g=this.i,this.j=0,this.m=null}function Xr(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Zr&&e.h!==ea&&(r=Lr(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,Ur(n,0,15),(n=e.l).g=0<n.h?n.h:0,Ur(n,0,15),i.g=15),e.h=Zr,i.h=t,r}function Yr(e){e.h=Jr,e.g=e.l,e.g.h=0}function $r(e){Z("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=ea}var Qr=0,Jr=1,Zr=3,ea=4,ta="black green blue cyan red yellow magenta black".split(" "),na="white green blue cyan red yellow magenta white_italics".split(" ");function ia(){this.l=!1,this.C=this.F=0,this.D=da,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",ra(this)}function ra(e){e.i=[];for(var t=0;t<15;t++)e.i.push(aa())}function aa(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function oa(e,t){sa(e)&&(e.i[e.h][e.g]=new Dr(t,e.u,e.o,e.m,e.s),e.g++)}function sa(e){var t=e.g<e.C&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function ua(e,t,n){var i=new M(e.j,t,"");return i.textAlign=e.D===la?"left":e.D===ca?"right":ue,(n=Mr(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}ia.prototype.isVisible=function(){return this.l};var la=0,ca=1,da=2;function ha(){this.i=[],this.h=null,this.g=0}function fa(e){this.g=0,this.h=e}function pa(e){if(e.ma())return e.h[e.g++];throw new Ne(2,2,3e3)}function ga(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function ma(e,t){for(var n=[],i=0;i<8;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function va(e,t,n){for(var i=null,r=(t=Se(ma(e,t))).next();!r.done;r=t.next()){var r=r.value,a=e.h[r];a.isVisible()&&(i=ua(a,n,e.i)),e.h[r]=null}return i}function ya(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function ba(e,t,n){var i={0:0,1:0,2:1,3:1};return wa[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}fa.prototype.ma=function(){return this.g<this.h.length},fa.prototype.$=function(){return this.g},fa.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ne(2,2,3e3);this.g+=e};var Ta=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),wa="black blue green cyan red magenta yellow white".split(" ");function xa(){this.h=[],this.g=[],this.i=new ha,this.l=0,this.s=new Map([["CC1",new zr(0,0)],["CC2",new zr(0,1)],["CC3",new zr(1,0)],["CC4",new zr(1,1)]]),this.o=this.m=0,this.j=new Map,Ea(this)}function Ea(e){e.m=0,e.o=0;for(var t=(e=Se(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,Pr(t.i),Pr(t.l),Pr(t.o)}function Sa(e,t){var n=[];try{for(;t.ma();){var i=pa(t).value,r=31&i;if(0!=(f=7===(f=(224&i)>>5)&&0!=r?63&pa(t).value:f)){e.j.has(f)||e.j.set(f,new ga(f));for(var a=e.j.get(f),o=t.$();t.$()-o<r;){var s,u=pa(f=t),l=u.value,c=u.pts;if(0<=(l=16===l?l<<16|pa(f).value:l)&&l<=31){var d=c;if(a.g){var h=a.g,f=null;switch(l){case 8:!sa(h)||h.g<=0&&h.h<=0||(h.g<=0?(h.g=h.C-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(f=ua(h,d,a.i)),h.h+1>=h.F){for(var d=h,p=0,g=1;g<15;g++,p++)d.i[p]=d.i[g];for(g=0;g<1;g++,p++)d.i[p]=aa()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(f=ua(h,d,a.i)),h.i[h.h]=aa(),h.g=0;break;case 12:h.isVisible()&&(f=ua(h,d,a.i)),ra(h),(d=h).h=0,d.g=0}var m=f}else m=null}else m=128<=l&&l<=159?function(e,t,n,i){if(128<=n&&n<=135)e.h[i=7&n]&&(e.g=e.h[i]);else{if(136===n){n=pa(t).value,t=null;for(var r=(n=Se(ma(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=ua(r,i,e.i)),ra(r);return t}if(137===n)for(n=(t=Se(ma(e,t=pa(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=pa(t).value,t=null,r=(n=Se(ma(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=ua(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=pa(t).value,t=null,r=(n=Se(ma(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=ua(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return va(e,t=pa(t).value,i);if(143===n)return i=va(e,255,i),ya(e),i;var a,o;144===n?(t.skip(1),i=pa(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i))):145===n?(i=pa(t).value,n=pa(t).value,t.skip(1),e.g&&(t=ba((48&n)>>4,(12&n)>>2,3&n),e.g.s=ba((48&i)>>4,(12&i)>>2,3&i),e.g.m=t)):146===n?(i=pa(t).value,t=pa(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t)):151===n?(t.skip(1),t.skip(1),i=pa(t).value,t.skip(1),e.g&&(e.g.D=3&i)):152<=n&&n<=159&&((r=null!==e.h[n=(15&n)-8])||((a=new ia).j=i,e.h[n]=a),i=pa(t).value,pa(t),pa(t),a=pa(t).value,o=pa(t).value,t=pa(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&a),t.C=1+(63&o),e.g=e.h[n])}}return null}(a,f,l,c):(4096<=l&&l<=4127?8<=(d=255&l)&&d<=15?f.skip(1):16<=d&&d<=23?f.skip(2):24<=d&&d<=31&&f.skip(3):4224<=l&&l<=4255?128<=(d=255&l)&&d<=135?f.skip(4):136<=d&&d<=143&&f.skip(5):32<=l&&l<=127?(f=l,a.g&&oa(a.g,127===f?"":String.fromCharCode(f))):160<=l&&l<=255?a.g&&oa(a.g,String.fromCharCode(l)):4128<=l&&l<=4223?(f=255&l,a.g&&(Ta.has(f)?(s=Ta.get(f),oa(a.g,s)):oa(a.g,"_"))):4256<=l&&l<=4351&&a.g&&oa(a.g,160!=(255&l)?"_":"[CC]"),null);(f=m)&&n.push(f)}}}}catch(e){if(!(e instanceof Ne&&3e3===e.code))throw e;Z("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function ka(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Aa(e,t){var n=null,i=null,r=e.N();return 1&t&&e.skip(8),2&t&&e.skip(4),{trackId:r,re:n=8&t?e.N():n,hf:i=16&t?e.N():i}}function Ia(e,t){return{le:1==t?e.Jb():e.N()}}function Ca(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.N()}}function Ma(e,t,n){var i=e.N(),r=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var a=0;a<i;a++){var o={Vd:null,sampleSize:null,ad:null};256&n&&(o.Vd=e.N()),512&n&&(o.sampleSize=e.N()),1024&n&&e.skip(4),2048&n&&(o.ad=0==t?e.N():e.Ie()),r.push(o)}return{fh:i,Ke:r}}function Ra(){this.i=new Map,this.h=this.g=0}function Na(){this.h=new Ra,this.g=new xa}function Da(e,t){for(var n=e.h.parse(t),i=(n=Se(n)).next();!i.done;i=n.next()){var r=i.value,a=D(r.Uf);if(0<a.length&&(i=e.g,r=r.pts,181===(a=new b(a,0)).Ra())&&49===a.Rd()&&1195456820===a.N()&&3===a.Ra()){var o=a.Ra();if(0!=(64&o)){o&=31,a.skip(1);for(var s=0;s<o;s++){var u=a.Ra(),l=(4&u)>>2,c=a.Ra(),d=a.Ra();l&&(0==(u&=3)||1==u?i.h.push({pts:r,type:u,xa:c,Ma:d,order:i.h.length}):(i.g.push({pts:r,type:u,value:c,order:i.g.length}),i.g.push({pts:r,type:2,value:d,order:i.g.length})))}}}}var h=e.g;function f(e,t){return e.pts-t.pts||e.order-t.order}var p=[];h.h.sort(f),h.g.sort(f);for(var g,m,v=Se(h.h),y=v.next();!y.done;y=v.next())(y=function(e,t){var n=t.type;if(16==(112&t.xa)&&(r=t.xa>>3&1,0===n?e.m=r:e.o=r),n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.xa&&255===t.Ma||!t.xa&&!t.Ma||!ka(t.xa)||!ka(t.Ma))return 45<=++e.l&&Ea(e),null;if(e.l=0,t.xa&=127,t.Ma&=127,!t.xa&&!t.Ma)return null;if(r=null,16==(112&t.xa))e:{var i=t.xa,r=t.Ma;if(n.m===(i<<8|r))n.m=null;else if(n.m=i<<8|r,16==(240&i)&&64==(192&r)){var a,i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|r>>5&1],o=(30&r)>>1,s="white",u=!1;o<7?s=na[o]:7===o&&(u=!0),r=1==(1&r),n.h!==ea&&(o=n.g,n.h===Zr&&i!==o.g&&(jr(o,a=1+i-o.h,1+o.g-o.h,o.h),Ur(o,0,a-1),Ur(o,i+1,15-i)),o.g=i,n.g.m=r,n.g.j=u,n.g.l=s,n.g.o="black")}else if(17==(247&i)&&32==(240&r))n.g.m=!1,n.g.j=!1,n.g.l="white",Or(n.g,Br,32),s=!1,"white_italics"===(i=na[(14&r)>>1])&&(i="white",s=!0),n.g.m=1==(1&r),n.g.j=s,n.g.l=i;else if(16==(247&i)&&32==(240&r)||23==(247&i)&&45==(255&r))s="black",0==(7&i)&&(s=ta[(14&r)>>1]),n.g.o=s;else if(17==(247&i)&&48==(240&r))Or(n.g,Fr,r);else if(18==(246&i)&&32==(224&r))Or(n.g,1&i?Hr:Vr,r);else if(20==(246&i)&&32==(240&r)){switch(r=t.pts,i=null,t.Ma){case 32:Yr(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Xr(n,2,r);break;case 38:i=Xr(n,3,r);break;case 39:i=Xr(n,4,r);break;case 40:Or(n.g,Br,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=r;break;case 42:Pr(n.o),$r(n);break;case 43:$r(n);break;case 44:i=n.i,s=null,n.h!==ea&&(s=Lr(i,n.j,r)),Ur(i,0,15),i=s;break;case 45:i=n.g,i=n.h!==Zr?null:(s=Lr(i,n.j,r),jr(i,(u=i.g-i.h+1)-1,u,i.h),Ur(i,0,u-1),Ur(i,i.g,15-i.g),n.j=r,s);break;case 46:Ur(n.l,0,15);break;case 47:i=null,n.h!==ea&&(i=Lr(n.i,n.j,r)),s=n.l,n.l=n.i,n.i=s,Yr(n),n.j=r}r=i;break e}r=null}else i=t.Ma,Or(n.g,Br,t.xa),Or(n.g,Br,i);return r}(h,y.value))&&p.push(y);for(y=(v=Se(h.g)).next();!y.done;y=v.next())g=h.i,3===(m=y.value).type?(g.g=2*(63&m.value)-1,g.h=[]):g.h&&(0<g.g&&(g.h.push(m),g.g--),0===g.g)&&(g.i.push(new fa(g.h)),g.h=null,g.g=0);for(y=(v=Se(h.i.i)).next();!y.done;y=v.next())y=Sa(h,y.value),p.push.apply(p,te(y));return h.i.i=[],h.h=[],h.g=[],p}function _a(e,t,n,i){this.ya=e,this.Ca=t,this.la=n,this.Id=void 0===i?null:i}function L(e,t,n,i,r,a,o,s,u,l,c,d,h,f,p){l=void 0===l?[]:l,f=void 0===f?La:f,this.startTime=e,this.j=this.endTime=t,this.o=n,this.Ca=i,this.la=r,this.i=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.h=l,this.tilesLayout=void 0===c?"":c,this.m=void 0===d?null:d,this.g=void 0===h?null:h,this.status=f,this.l=void 0===p?null:p}Ra.prototype.init=function(e){var n=this,i=[],r=[];if((new _).box("moov",Ki).box("mvex",Ki).U("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.N(),t=t.N(),n.g=e,n.h=t}).box("trak",Ki).U("tkhd",function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.N(),i.push(e)}).box("mdia",Ki).U("mdhd",function(e){e=Ca(e.reader,e.version),r.push(e.timescale)}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new Ne(2,2,2010);i.forEach(function(e,t){n.i.set(e,r[t])})},Ra.prototype.parse=function(e){var t=this,g=[],m=this.g,v=this.h,y=[],b=null,T=9e4;return(new _).box("moof",Ki).box("traf",Ki).U("trun",function(e){y=Ma(e.reader,e.version,e.flags).Ke}).U("tfhd",function(e){e=Aa(e.reader,e.flags),m=e.re||t.g,v=e.hf||t.h,e=e.trackId,t.i.has(e)&&(T=t.i.get(e))}).U("tfdt",function(e){b=Ia(e.reader,e.version).le}).box("mdat",function(e){if(null===b)throw new Ne(2,2,2010);e=e.reader;var t=b,n=T,i=m,r=v,a=y,o=0,s=r;for(a.length&&(s=a[0].sampleSize||r);e.ma();){var u=e.N();if(6==(31&e.Ra())){for(var l,c=0,c=(t+(c=a.length>o?a[o].ad||0:c))/n,d=[],h=e.Za(u-1),f=l=0;f<h.length;)2==l&&3==h[f]?(l=0,(h=[].concat(te(h))).splice(f,1),h=new Uint8Array(h)):0==h[f]?l++:l=0,f++;for(l=h,f=0;f<l.length;){for(h=0;255==l[f];)h+=255,f++;h+=l[f++];for(var p=0;255==l[f];)p+=255,f++;p+=l[f++],4==h&&d.push(l.subarray(f,f+p)),f+=p}for(l=(d=Se(d)).next();!l.done;l=d.next())g.push({Uf:l.value,pts:c})}else try{e.skip(u-1)}catch(e){break}0==(s-=u+4)&&(t=a.length>o?t+(a[o].Vd||i):t+i,o++,s=a.length>o&&a[o].sampleSize||r)}}).parse(e,!1),g},Na.prototype.init=function(e){this.h.init(e)},_a.prototype.ic=function(){return this.Ca},_a.prototype.dc=function(){return this.la},t("shaka.media.InitSegmentReference",_a),_a.prototype.getEndByte=_a.prototype.dc,_a.prototype.getStartByte=_a.prototype.ic,(n=L.prototype).ya=function(){return this.o()},n.getStartTime=function(){return this.startTime},n.qf=function(){return this.endTime},n.ic=function(){return this.Ca},n.dc=function(){return this.la},n.Hf=function(){return this.tilesLayout},n.Gf=function(){return this.m},n.Cb=function(){return this.status},n.Of=function(){this.status=Pa},t("shaka.media.SegmentReference",L),L.prototype.markAsUnavailable=L.prototype.Of,L.prototype.getStatus=L.prototype.Cb,L.prototype.getTileDuration=L.prototype.Gf,L.prototype.getTilesLayout=L.prototype.Hf,L.prototype.getEndByte=L.prototype.dc,L.prototype.getStartByte=L.prototype.ic,L.prototype.getEndTime=L.prototype.qf,L.prototype.getUris=L.prototype.ya;var La=0,Pa=1;function Oa(e){return!e||1==e.length&&e.end(0)-e.start(0)<1e-6?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function ja(e){return e&&!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&e.length?e.end(e.length-1):null}function Ua(e,t){return!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1))&&t>=e.start(0)}function Ba(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,i=Se(Fa(e)),r=i.next();!r.done;r=i.next()){var a=r.value,r=a.start;(a=a.end)>t&&(n+=a-Math.max(r,t))}return n}function Fa(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Va(e,t,n,i){var r,a,l=this;this.j=e,this.m=n,this.h={},this.M={},this.L={},this.g=null,this.F=!1,this.T=i||function(){},this.i={},this.o=new f,this.u={},this.C=t,this.G=new R,this.l=(a=(r=this).G,e=new MediaSource,r.o.oa(e,"sourceopen",function(){URL.revokeObjectURL(r.I),a.resolve()}),r.I=no(e),r.j.src=r.I,e),this.D=new Pi(function(){return t=l,Re(function(e){if(1==e.g){for(i in n=[],t.i)for(r=t.i[i],a=r[0],t.i[i]=r.slice(0,1),a&&n.push(a.p.catch(ft)),o=Se(r.slice(1)),s=o.next();!s.done;s=o.next())s.value.p.reject(new Ne(2,7,7003,void 0));for(u in t.g&&n.push(t.g.destroy()),t.m&&n.push(t.m.destroy()),t.u)n.push(t.u[u].destroy());return ke(e,Promise.all(n),2)}t.o&&(t.o.release(),t.o=null),t.j&&(t.j.removeAttribute("src"),t.j.load(),t.j=null),t.l=null,t.g=null,t.m=null,t.h={},t.u={},t.C=null,t.i={},Ae(e)});var t,n,i,r,a,o,s,u}),this.I="",this.s=!1,this.O=new R}function Ha(e,t,n){e.g||(e.g=new an(e.m));var i=e.g;e=e.F,"application/cea-608"!=t&&"application/cea-708"!=t&&(i.j=(0,ln[t])(),i.j.setSequenceMode?i.j.setSequenceMode(n):J('Text parsers should have a "setSequenceMode" method!'),i.u=e)}function Ka(e){return!e.l||"ended"==e.l.readyState}function Ga(e,t){return t==me?e.g.g:Oa(Wa(e,t))}function qa(e,t){return t==me?e.g.h:ja(Wa(e,t))}function Wa(e,t){try{return e.h[t].buffered}catch(e){return null}}function za(d,h,f,p,g,m,v){var y,b,T,w,x,E,S,k,A,I,C;return m=void 0!==m&&m,v=void 0!==v&&v,Re(function(e){switch(e.g){case 1:if(h!=(y=bt).X)e.A(2);else{if(d.s)return ke(e,d.O,4);e.A(3)}break;case 4:b=e.h,d.g.s=b;case 3:return ke(e,(o=d.g,s=f,u=p?p.startTime:null,l=p?p.endTime:null,Re(function(e){return 1==e.g?ke(e,Promise.resolve(),2):o.j&&o.i?null==u||null==l?(o.j.parseInit(D(s)),e.return()):(c=o.u?u:o.s,c={periodStart:o.s,segmentStart:u,segmentEnd:l,vttOffset:c},c=o.j.parseMedia(D(s),c),c=c.filter(function(e){return e.startTime>=o.l&&e.startTime<o.m}),o.i.append(c),null==o.g&&(o.g=Math.max(u,o.l)),o.h=Math.min(l,o.m),void Ae(e)):e.return()})),5);case 5:return e.return();case 2:if(d.u[h])return ke(e,function(e,t){e.l=!0,e.h=new R,e.m=[],e.j=[],e.i=[];t=D(t);return e.g.push(t),e.g.flush(),e.l&&e.h.reject(new Ne(2,3,3018)),e.h}(d.u[h],f),7);g&&(d.g||Ha(d,"text/vtt",d.s),p?(b=Da(d.C,f)).length&&(T=d.h[y.ra].timestampOffset,un(d.g,b,p.startTime,p.endTime,T)):d.C.init(f)),e.A(6);break;case 7:T=e.h,d.g||Ha(d,"text/vtt",d.s),T.metadata&&(w=d.h[h].timestampOffset,d.T(T.metadata,w,p?p.endTime:null)),T.captions&&T.captions.length&&(w=d.h[y.ra].timestampOffset,A=function(e){for(var t=[],n=(e=Se(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new M(n.startTime,n.endTime,n.text)});return t}(T.captions),un(d.g,A,p?p.startTime:null,p?p.endTime:null,w)),f=T.data;case 6:if(t=d,n=f,i=p?p.startTime:null,r=h,a=t.L[r],f=n=null==i&&a&&(At()||kt())&&"mp4"==t.M[r].split(";")[0].split("/")[1]?function(e){function t(){r=!0}function n(e){a.push(e),Ki(e)}e=D(e);var i,r=!1,a=[],o=[];if((new _).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).U("stsd",function(e){i=e,a.push(e),Gi(e)}).U("encv",t).U("enca",t).U("avc1",function(e){o.push({box:e,oc:1701733238})}).U("avc3",function(e){o.push({box:e,oc:1701733238})}).U("ac-3",function(e){o.push({box:e,oc:1701733217})}).U("ec-3",function(e){o.push({box:e,oc:1701733217})}).U("mp4a",function(e){o.push({box:e,oc:1701733217})}).parse(e),!r){if(0==o.length||!i)throw Wt(e),new Ne(2,3,3019);o.reverse();for(var s=Se(o),u=s.next();!u.done;u=s.next())u=u.value,e=function(e,t,n,i,r){var a=Cr.value(),o=e.subarray(n.start,n.start+n.size),s=We(o),u=new Uint8Array(n.size+a.byteLength);for(u.set(o,0),(o=We(u)).setUint32(4,r),u.set(a,n.size),r=s.getUint32(4),o.setUint32(n.size+16,r),Ir(u,0,u.byteLength),r=new Uint8Array(e.byteLength+u.byteLength),n=kt()?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(u,n),r.set(a,n+u.byteLength),i=(e=Se(i)).next();!i.done;i=e.next())Ir(r,(i=i.value).start,i.size+u.byteLength);return u=We(r,t.start),t=Xi(t),e=u.getUint32(t),u.setUint32(t,e+1),r}(e,i,u.box,a,u.oc)}return e}(n):n,x=d.h[h],E=io,!d.s||x.mode==E||!p){e.A(8);break}if(h!=y.ra&&y.ra in d.h){e.A(9);break}return S=[x.appendWindowStart,x.appendWindowEnd],x.appendWindowStart=0,x.appendWindowEnd=1/0,k=x.timestampOffset,x.timestampOffset=0,ke(e,Ja(d,h,function(){d.h[h].appendBuffer(f)}),10);case 10:return ke(e,Ja(d,h,function(){return $a(d,h)}),11);case 11:return x.timestampOffset=k,x.appendWindowStart=S[0],x.appendWindowEnd=S[1],A=Oa(Wa(d,h)),I=(p.startTime||0)-(A||0),d.O.resolve(I),ke(e,Ja(d,h,function(){return Ya(d,h,0,d.l.duration)}),12);case 12:if(h==y.ra)return ke(e,Ja(d,h,function(){d.j.currentTime-=.001,Qa(d,h)}),9);e.A(9);break;case 9:x.mode=E;case 8:return p&&d.s&&h!=y.X&&(m||v)&&(C=p.startTime,Ja(d,h,function(){return $a(d,h)}),Ja(d,h,function(){var e=C;e<0&&(e+=.001),d.h[h].timestampOffset=e,Qa(d,h)})),ke(e,Ja(d,h,function(){d.h[h].appendBuffer(f)}),15);case 15:Ae(e)}var t,n,i,r,a,o,s,u,l,c})}function Xa(t,n){return Re(function(e){return n==bt.X?t.g?ke(e,t.g.remove(0,1/0),0):e.return():ke(e,Ja(t,n,function(){return Ya(t,n,0,t.l.duration)}),0)})}function Ya(e,t,n,i){i<=n?Qa(e,t):e.h[t].remove(n,i)}function $a(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Qa(e,t)}function Qa(e,t){var n=e.i[t][0];n&&(n.p.resolve(),eo(e,t))}function Ja(e,t,n){return O(e.D),n={start:n,p:new R},e.i[t].push(n),1==e.i[t].length&&to(e,t),n.p}function Za(t,n){var i,r,a,o,s;return Re(function(e){switch(e.g){case 1:for(a in O(t.D),i=[],r={},t.h)r.Sb=new R,o={start:function(e){return function(){return e.Sb.resolve()}}(r),p:r.Sb},t.i[a].push(o),i.push(r.Sb),1==t.i[a].length&&o.start(),r={Sb:r.Sb};return Ie(e,2),ke(e,Promise.all(i),4);case 4:Ce(e,3);break;case 2:throw Me(e);case 3:try{n()}catch(e){throw new Ne(2,3,3015,e)}finally{for(s in t.h)eo(t,s)}Ae(e)}})}function eo(e,t){e.i[t].shift(),to(e,t)}function to(t,n){var i=t.i[n][0];if(i)try{i.start()}catch(e){"QuotaExceededError"==e.name?i.p.reject(new Ne(2,3,3017,n)):i.p.reject(new Ne(2,3,3015,e)),eo(t,n)}}L.Status={tg:La,Zg:Pa,Ig:2},(n=Va.prototype).destroy=function(){return this.D.destroy()},n.init=function(t,n,i){i=void 0!==i&&i;var r,a,o,s,u,l,c,d=this;return Re(function(e){if(1==e.g)return r=bt,ke(e,d.G,2);for(d.s=i,a={},o=Se(t.keys()),s=o.next();!s.done;a={pa:a.pa},s=o.next())a.pa=s.value,u=t.get(a.pa),l=Zt(u.mimeType,u.codecs),a.pa==r.X?Ha(d,l,i):(!n&&MediaSource.isTypeSupported(l)||!Yt(l,a.pa)||(d.u[a.pa]=new Xt,l=Qt(a.pa,l)),c=d.l.addSourceBuffer(l),d.o.B(c,"error",function(e){return function(){d.i[e.pa][0].p.reject(new Ne(2,3,3014,d.j.error?d.j.error.code:0))}}(a)),d.o.B(c,"updateend",function(e){return function(){return Qa(d,e.pa)}}(a)),d.h[a.pa]=c,d.M[a.pa]=l,d.i[a.pa]=[],d.L[a.pa]=!!u.drmInfos.length);Ae(e)})},n.Na=function(){var e,t,n={total:Fa(this.j.buffered),audio:Fa(Wa(this,"audio")),video:Fa(Wa(this,"video")),text:[]};return this.g&&(e=this.g.g,t=this.g.h,null!=e)&&null!=t&&n.text.push({start:e,end:t}),n},n.remove=function(t,n,i){var r=this;return Re(function(e){return ke(e,t==bt.X?r.g.remove(n,i):Ja(r,t,function(){return Ya(r,t,n,i)}),0)})},n.flush=function(t){var n=this;return Re(function(e){return t==bt.X?e.return():ke(e,Ja(n,t,function(){n.j.currentTime-=.001,Qa(n,t)}),0)})},n.endOfStream=function(t){var n=this;return Re(function(e){return ke(e,Za(n,function(){Ka(n)||(t?n.l.endOfStream(t):n.l.endOfStream())}),0)})},n.Ia=function(n){var i=this;return Re(function(e){return ke(e,Za(i,function(){if(n<i.l.duration)for(var e in i.h){var t={start:function(){},p:new R};i.i[e].unshift(t)}i.l.duration=n}),0)})},n.getDuration=function(){return this.l.duration};var no=N.URL.createObjectURL,io="sequence",ro=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ye(e,t,n){this.l=e,this.$c=t,this.m=this.i=1/0,this.g=1,this.h=this.j=null,this.o=0,this.s=!0,this.u=0,this.C=void 0===n||n,this.D=0,this.F=!1}function ao(e,t,n){this.l=n,this.j=e,this.s=so(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function oo(e){this.g=e}function so(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{for(var t=e.g.currentTime,n=(e=Se(Fa(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function uo(e,t,n,i,r){var a=this;this.o=r,this.g=e,this.s=t,this.D=n,this.i=new f,this.m=!1,this.C=e.readyState,this.u=0,this.h=i,this.l=!1,this.i.B(e,"waiting",function(){return lo(a)}),this.j=new A(function(){lo(a)}).Da(.25)}function lo(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;var t,n,i,r;e.g.paused&&(0!=e.g.currentTime||!e.g.autoplay&&0==e.g.currentTime)||(e.g.readyState!=e.C&&(e.C=e.g.readyState),(t=!e.h)||(i=so(n=(t=e.h).j),r=n.g.currentTime,a=Date.now()/1e3,t.g==r&&t.s==i||(t.m=a,t.g=r,t.s=i,t.h=!1),(i=(r=a-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new ve("stalldetected"))),t=!i),t&&(t=e.g.currentTime,a=n=e.g.buffered,o=t,s=e.D.gapDetectionThreshold,null==(i=a&&a.length&&!(1==a.length&&a.end(0)-a.start(0)<1e-6)&&0<=(a=Fa(a).findIndex(function(e,t,n){return e.start>o&&(0==t||n[t-1].end-o<=s)}))?a:null)||0==i&&!e.l||(r=n.start(i))>=e.s.Oa()||r-t<.001||(0!=i&&n.end(i-1),e.g.currentTime=r,e.u++,e.o(new ve("gapjumped")))))}var a,o,s}function co(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ho.value().get(t),n.oa(e,t,i))}(n=ye.prototype).getDuration=function(){return this.i},n.xf=function(){return this.g},n.Ia=function(e){this.i=e},n.Cf=function(){return this.l},n.Oe=function(e){this.o=e},n.wc=function(e){this.s=e},n.ce=function(e){this.m=e},n.jg=function(e){this.$c=e},n.pf=function(){return this.$c},n.Gb=function(e){var t;0!=e.length&&(t=e[e.length-1].endTime,this.Md(e[0].startTime),this.g=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.g),this.h=Math.max(this.h,t),null!=this.l)&&this.C&&!this.F&&(this.l=(Date.now()+this.o)/1e3-this.h-this.g)},n.Gd=function(){this.F=!0},n.Md=function(e){this.j=null==this.j?e:Math.min(this.j,e)},n.Ld=function(e){this.g=Math.max(this.g,e)},n.offset=function(e){null!=this.j&&(this.j+=e),null!=this.h&&(this.h+=e)},n.V=function(){return 1/0==this.i&&!this.s},n.jb=function(){return 1/0!=this.i&&!this.s},n.Pa=function(){return Math.max(this.u,this.gb()-this.m)},n.Pe=function(e){this.u=e},n.gb=function(){return this.V()||this.jb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.l)+this.D,this.i):this.h?Math.min(this.h,this.i):this.i},n.hc=function(e){var t=Math.max(this.j,this.u);return 1/0==this.m?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.m+e,this.Oa()))},n.Bb=function(){return this.hc(0)},n.Oa=function(){return Math.max(0,this.gb()-(this.V()||this.jb()?this.$c:0))},n.Se=function(){return!(null==this.l||null!=this.h&&this.C)},n.Ne=function(e){this.D=e},t("shaka.media.PresentationTimeline",ye),ye.prototype.setAvailabilityTimeOffset=ye.prototype.Ne,ye.prototype.usingPresentationStartTime=ye.prototype.Se,ye.prototype.getSeekRangeEnd=ye.prototype.Oa,ye.prototype.getSeekRangeStart=ye.prototype.Bb,ye.prototype.getSafeSeekRangeStart=ye.prototype.hc,ye.prototype.getSegmentAvailabilityEnd=ye.prototype.gb,ye.prototype.setUserSeekStart=ye.prototype.Pe,ye.prototype.getSegmentAvailabilityStart=ye.prototype.Pa,ye.prototype.isInProgress=ye.prototype.jb,ye.prototype.isLive=ye.prototype.V,ye.prototype.notifyMaxSegmentDuration=ye.prototype.Ld,ye.prototype.notifyMinSegmentStartTime=ye.prototype.Md,ye.prototype.lockStartTime=ye.prototype.Gd,ye.prototype.notifySegments=ye.prototype.Gb,ye.prototype.getDelay=ye.prototype.pf,ye.prototype.setDelay=ye.prototype.jg,ye.prototype.setSegmentAvailabilityDuration=ye.prototype.ce,ye.prototype.setStatic=ye.prototype.wc,ye.prototype.setClockOffset=ye.prototype.Oe,ye.prototype.getPresentationStartTime=ye.prototype.Cf,ye.prototype.setDuration=ye.prototype.Ia,ye.prototype.getMaxSegmentDuration=ye.prototype.xf,ao.prototype.release=function(){this.l=this.j=null,this.i=function(){}},uo.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},uo.prototype.Pd=function(){this.l=!0,lo(this)};var ho=new wt(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function fo(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new f,this.i=new yo(e),co(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){mo(i,i.j)})}function po(e){return e.m?e.g.currentTime:e.j}function go(e,t){0<e.g.readyState?bo(e.i,t):co(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){mo(e,e.j)})}function mo(e,t){Math.abs(e.g.currentTime-t)<.001?vo(e):(e.h.oa(e.g,"seeking",function(){vo(e)}),bo(e.i,0==e.g.currentTime?t:e.g.currentTime))}function vo(e){e.m=!0,e.h.B(e.g,"seeking",function(){return e.l()})}function yo(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new A(function(){t.i<=0||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}function bo(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Da(.1)}function To(e){var t=this;this.g=e,this.j=!1,this.h=null,this.i=new f,co(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){null==t.h||0==t.h?t.j=!0:(t.i.oa(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))})}function wo(e,t,n,i,r,a){var o,s,u,l=this;this.i=e,this.g=t.presentationTimeline,this.C=t.minBufferTime||0,this.l=n,this.s=r,this.o=null,this.u=(o=e,r=a,(s=n).stallEnabled?(u=n.stallSkip,(s=new ao(new oo(o),s.stallThreshold,r)).i=function(){u?o.currentTime+=u:(o.pause(),o.play())},s):null),this.j=new uo(e,t.presentationTimeline,n,this.u,a),this.h=new fo(e,function(){(t=l.j).m=!0,t.l=!1;var e=po(l.h),t=Eo(l,e);return t=.001<Math.abs(t-e)&&(e=Date.now()/1e3,!l.o||l.o<e-1)?(l.o=e,void go(l.h,t)):void l.s()},(r=this,null==(s=i)?s=1/0>r.g.getDuration()?r.g.Bb():r.g.Oa():s<0&&(s=r.g.Oa()+s),xo(r,So(r,s)))),this.m=new A(function(){var e,t,n;0==l.i.readyState||l.i.paused||(e=po(l.h),t=l.g.Bb(),e<(t=(n=l.g.Oa())-t<3?n-3:t)&&(e=Eo(l,e),l.i.currentTime=e))}).Da(.25)}function xo(e,t){var n=e.g.getDuration();return n<=t?n-e.l.durationBackoff:t}function Eo(e,t){var n=Math.max(e.C,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Bb(),a=e.g.Oa(),o=e.g.getDuration(),s=(a-r<3&&(r=a-3),e.g.hc(n)),u=e.g.hc(i),n=e.g.hc(n+i);return o<=t?xo(e,t):a<t?a:t<r?Ua(e.i.buffered,u)?u:n:s<=t||Ua(e.i.buffered,t)?t:n}function So(e,t){var n=e.g.Bb();return t<n||t>(n=e.g.Oa())?n:t}function ne(e){this.J=e,this.g=null,this.h=0,this.i=!1}function ko(e,t,n){return new ne([new L(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Ao(e,t,n){this.i=e,this.g=t,this.h=n}function Io(){ne.call(this,[]),this.j=[]}function Co(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Qc(),this.h=new A(function(){t.g.De(.25*t.i)})}function Mo(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return e.g.Qc()!=t&&e.g.be(t)}catch(e){}e.h.Da(.25),0!=e.g.Qc()&&e.g.be(0)}function Ro(e){var t=this;this.h=e,this.g=new Set,this.i=new A(function(){No(t,!1)}).Da(.25)}function No(e,t){for(var n=Se(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Do(e){h.call(this),this.g=new Map,this.h=e}function _o(e){h.call(this);var i=this;this.g=new Set,this.i=e,this.h=new A(function(){for(var e=i.i(),t=Se(i.g),n=t.next();!n.done;n=t.next())(n=n.value).endTime<e.start&&(i.g.delete(n),n=new ve("regionremove",new Map([["region",n]])),i.dispatchEvent(n))}).Da(2)}function Lo(e){h.call(this);var n=this;this.i=e,this.g=new Map,this.l=[{qb:null,pb:jo,ib:function(e,t){return Po(n,"enter",e,t)}},{qb:Oo,pb:jo,ib:function(e,t){return Po(n,"enter",e,t)}},{qb:Uo,pb:jo,ib:function(e,t){return Po(n,"enter",e,t)}},{qb:jo,pb:Oo,ib:function(e,t){return Po(n,"exit",e,t)}},{qb:jo,pb:Uo,ib:function(e,t){return Po(n,"exit",e,t)}},{qb:Oo,pb:Uo,ib:function(e,t){return Po(n,"skip",e,t)}},{qb:Uo,pb:Oo,ib:function(e,t){return Po(n,"skip",e,t)}}],this.h=new f,this.h.B(this.i,"regionremove",function(e){n.g.delete(e.region)})}function Po(e,t,n,i){t=new ve(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}fo.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},yo.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(n=To.prototype).release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},n.vd=function(e){this.h=this.j?this.h:e},n.Ec=function(){return(this.j?this.g.currentTime:this.h)||0},n.je=function(){return 0},n.ie=function(){return 0},n.Ee=function(){},(n=wo.prototype).release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.s=function(){}},n.vd=function(e){go(this.h,e)},n.Ec=function(){var e=po(this.h);return 0<this.i.readyState&&!this.i.paused?So(this,e):e},n.je=function(){return this.u.o},n.ie=function(){return this.j.u},n.Ee=function(){this.j.Pd()},(n=ne.prototype).release=function(){this.i||(this.J=[],this.g&&this.g.stop(),this.g=null)},n.Pf=function(){this.i=!0},n.find=function(e){for(var t=this.J.length-1,n=t;0<=n;--n){var i=this.J[n],r=n<t?this.J[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.h}return this.J.length&&e<this.J[0].startTime?this.h:null},n.get=function(e){return 0==this.J.length||(e-=this.h)<0||e>=this.J.length?null:this.J[e]},n.offset=function(e){if(!this.i)for(var t=Se(this.J),n=t.next();!n.done;n=t.next()){(n=n.value).startTime+=e,n.endTime+=e,n.j+=e;for(var i=(n=Se(n.h)).next();!i.done;i=n.next())(i=i.value).startTime+=e,i.endTime+=e,i.j+=e}},n.nc=function(t){!this.i&&t.length&&(this.J=this.J.filter(function(e){return e.startTime<t[0].startTime}),this.J.push.apply(this.J,te(t)))},n.Fb=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.J.length||e.endTime>n.J[0].startTime)}),this.nc(e),this.eb(t)},n.eb=function(t){var e;this.i||(e=this.J.length,this.J=this.J.filter(function(e){return e.endTime>t}),this.h+=e-this.J.length)},n.Xa=function(e,t,n){if(n=void 0!==n&&n,!this.i){for(;this.J.length&&this.J[this.J.length-1].startTime>=t;)this.J.pop();for(;this.J.length&&this.J[0].endTime<=e;)this.J.shift(),n||this.h++;0!=this.J.length&&(e=this.J[this.J.length-1],this.J[this.J.length-1]=new L(e.startTime,t,e.o,e.Ca,e.la,e.i,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.m,e.g,e.status,e.l))}},n.bd=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new A(function(){var e=t();e?n.J.push.apply(n.J,te(e)):(n.g.stop(),n.g=null)}),this.g.Da(e))},ne.prototype[Symbol.iterator]=function(){return this.Ab(0)},ne.prototype.Ab=function(e){var t=this.find(e);if(null==t)return null;var n=this.get(--t+1),i=-1;if(n&&0<n.h.length)for(var r=n.h.length-1;0<=r;--r){var a=n.h[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new Ao(this,t,i)},t("shaka.media.SegmentIndex",ne),ne.forSingleSegment=ko,ne.prototype.getIteratorForTime=ne.prototype.Ab,ne.prototype.updateEvery=ne.prototype.bd,ne.prototype.fit=ne.prototype.Xa,ne.prototype.evict=ne.prototype.eb,ne.prototype.mergeAndEvict=ne.prototype.Fb,ne.prototype.markImmutable=ne.prototype.Pf,Ao.prototype.gf=function(){return this.g},Ao.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.h.length&&e.ya().length&&this.h>=e.h.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.h.length?e.h[this.h]:e},Ao.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.h.length&&(this.h++,!e.ya().length||this.h!=e.h.length)||(this.g++,this.h=0),{value:e=this.current(),done:!e}},t("shaka.media.SegmentIterator",Ao),Ao.prototype.currentPosition=Ao.prototype.gf,T(Io,ne),(n=Io.prototype).clone=function(){var e=new Io;return e.j=this.j.slice(),e},n.release=function(){for(var e=Se(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},n.find=function(e){for(var t=0,n=Se(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.h+i.J.length}return null},n.get=function(e){for(var t=0,n=Se(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.h+i.J.length}return null},n.offset=function(){},n.nc=function(){},n.eb=function(){},n.Fb=function(){},n.Xa=function(){},n.bd=function(){},t("shaka.media.MetaSegmentIndex",Io),Io.prototype.updateEvery=Io.prototype.bd,Io.prototype.fit=Io.prototype.Xa,Io.prototype.mergeAndEvict=Io.prototype.Fb,Io.prototype.evict=Io.prototype.eb,Io.prototype.merge=Io.prototype.nc,Co.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Co.prototype.set=function(e){this.i=e,Mo(this)},Co.prototype.Mc=function(){return this.g.Mc()},Ro.prototype.release=function(){this.i.stop();for(var e=Se(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},T(Do,h),Do.prototype.release=function(){this.g.clear(),h.prototype.release.call(this)},Do.prototype.j=function(e){for(var t=Se(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).pc,r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.Id;break e}}i=null}if(r=(r=i)&&!((r=n.pe)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width))e:{if(r=e,a=i.contentType,(a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(r>=a[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.pe=i,JSON.stringify(i),n=new ve("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},T(_o,h),_o.prototype.release=function(){this.g.clear(),this.h.stop(),h.prototype.release.call(this)},T(Lo,h),Lo.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,h.prototype.release.call(this)},Lo.prototype.j=function(e,t){for(var n=Se(this.i.g),i=n.next();!i.done;i=n.next()){var i=i.value,r=this.g.get(i),a=e<i.startTime?Oo:e>i.endTime?Uo:jo;this.g.set(i,a);for(var o=Se(this.l),s=o.next();!s.done;s=o.next())(s=s.value).qb==r&&s.pb==a&&s.ib(i,t)}};var Oo=1,jo=2,Uo=3;function Bo(e,t,n,i,r){return e=Mi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Fo(e,t){var o=this;this.g=t,this.m=e,this.j=null,this.u=1,this.o=this.l=null,this.i=new Map,this.C=!1,this.D=null,this.s=!1,this.h=new Pi(function(){return t=o,Re(function(e){if(1==e.g){for(n=[],i=Se(t.i.values()),r=i.next();!r.done;r=i.next())Jo(a=r.value),n.push(Zo(a));return ke(e,Promise.all(n),2)}t.i.clear(),t.g=null,t.m=null,t.j=null,Ae(e)});var t,n,i,r,a})}function Vo(e,t){var n,i=e.i.get("video");i&&(n=i.stream)&&(t?(t=n.trickModeVideo)&&!i.nb&&(Go(e,t,!1,0,!1),i.nb=n):(n=i.nb)&&Go(e,n,!(i.nb=null),0,!1))}function Ho(e,t,n,i,r,a){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,a=void 0!==a&&a,e.l=t,e.C&&(t.video&&Go(e,t.video,n,i,r,a),t.audio)&&Go(e,t.audio,n,i,r,a)}function Ko(e,t){e.o=t,e.C&&Go(e,t,!0,0,!1)}function Go(t,e,n,i,r,a){var o,s,u,l,c,d,h,f,p,g=t.i.get(e.type);g||e.type!=me?g&&(g.nb&&(e.trickModeVideo?e=(g.nb=e).trickModeVideo:g.nb=null),g.stream!=e||r)&&(e.type==me&&Ha(t.g.P,Zt(e.mimeType,e.codecs),t.m.sequenceMode),g.stream.closeSegmentIndex&&g.stream.closeSegmentIndex(),g.stream=e,g.ba=null,g.ke=!!a,n&&(g.ac?g.ed=!0:g.Ba?(g.ab=!0,g.Hc=i,g.ed=!0):(Jo(g),$o(t,g,!0,i).catch(function(e){t.g&&t.g.onError(e)}))),d=t,h=g,Re(function(e){var t,n,i,r;return 1==e.g?h.ta?(f=h.stream,p=h.ta,f.segmentIndex?e.A(2):ke(e,f.createSegmentIndex(),2)):e.return():h.ta!=p||h.stream!=f?e.return():(t=d.g.Pc(),n=qa(d.g.P,h.type),r=(i=null==(r=h.stream.segmentIndex.find(h.za?h.za.endTime:t))?null:h.stream.segmentIndex.get(r))&&i.la?i.la-i.Ca:null,(t=!!(r=i&&!r?(i.endTime-i.getStartTime())*(h.stream.bandwidth||0)/8:r)&&((i=i.i)&&(r+=(i.la?i.la-i.Ca:null)||0),8*r/(i=d.g.getBandwidthEstimate())<(n||0)-t-Math.max(d.m.minBufferTime||0,d.j.rebufferingGoal)||h.ta.h.g>r))&&h.ta.abort(),void Ae(e))}).catch(function(e){t.g&&t.g.onError(e)})):(o=t,s=e,Re(function(e){switch(e.g){case 1:return u=bt,Ie(e,2),ke(e,Xa(o.g.P,u.X),4);case 4:Ce(e,3);break;case 2:l=Me(e),o.g&&o.g.onError(l);case 3:l=Zt(s.mimeType,s.codecs),Ha(o.g.P,l,o.m.sequenceMode),(o.g.P.m.isTextVisible()||o.j.alwaysStreamText)&&(c=qo(s),o.i.set(u.X,c),Qo(o,c,0)),Ae(e)}}))}function qo(e){return{stream:e,type:e.type,ba:null,za:null,Uc:null,Fd:null,Ed:null,Dd:null,nb:null,endOfStream:!1,Ba:!1,Ka:null,ab:!1,Hc:0,ed:!1,ac:!1,tc:!0,Td:!1,jc:!1,ta:null}}function Wo(t,n){var i,r,a;return Re(function(e){switch(e.g){case 1:if(O(t.h),n.Ba||null==n.Ka||n.ac)return e.return();if(n.Ka=null,n.ab)return ke(e,$o(t,n,n.ed,n.Hc),3);e.A(2);break;case 3:return e.return();case 2:if(n.stream.segmentIndex){e.A(4);break}return i=n.stream,ke(e,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),null==n.Ka&&Qo(t,n,0),e.return();case 4:Ie(e,6),null!=(r=function(e,t){if(Xo(t))return n=e.g.P,o=t.stream.originalId||"",i=qa(n,"video")||0,sn(n.g,o,i),null;t.type==me&&(n=e.g.P).g&&sn(n.g,"",0);var n,i,r,v,y,b,T,w,x,E,S,k,A,I,C,M,R,a=e.g.Pc(),o=t.za?t.za.endTime:a,s=(i=e.g.P,s=t.type,r=a,s==me?null==(i=i.g).h||i.h<r?0:i.h-Math.max(r,i.g):Ba(i=Wa(i,s),r)),u=Math.max(e.m.minBufferTime||0,e.j.rebufferingGoal,e.j.bufferingGoal)*e.u,l=e.m.presentationTimeline.getDuration()-o,c=qa(e.g.P,t.type);if(l<1e-6&&c)return t.endOfStream=!0,"video"==t.type&&(a=e.i.get(me))&&Xo(a)&&(a.endOfStream=!0),null;if(t.endOfStream=!1,u<=s)return e.j.updateIntervalSeconds/2;if(!(s=function(e,t,n,i){if(t.ba)return t.ba.current();if(t.za||i)return t.ba=t.stream.segmentIndex.Ab(t.za?t.za.endTime:i),t.ba&&t.ba.next().value;e=e.j.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.ba=t.stream.segmentIndex.Ab(i),r=t.ba&&t.ba.next().value),r||(t.ba=t.stream.segmentIndex.Ab(n),r=t.ba&&t.ba.next().value),r}(e,t,a,c)))return e.j.updateIntervalSeconds;for(u=1/0,c=(l=Se(l=Array.from(e.i.values()))).next();!c.done;c=l.next())Xo(c=c.value)||c.ba&&!c.ba.current()||(u=Math.min(u,c.za?c.za.endTime:a));return o>=u+e.m.presentationTimeline.g?e.j.updateIntervalSeconds:(v=e,y=t,b=a,T=s,Re(function(e){switch(e.g){case 1:if(w=bt,x=y.stream,E=y.ba,y.Ba=!0,Ie(e,2),2==T.Cb())throw new Ne(1,1,1011);return ke(e,(l=v,c=y,u=T,Re(function(e){return d=[],h=Math.max(0,u.appendWindowStart-.1),f=u.appendWindowEnd+.01,(p=u.timestampOffset)==c.Fd&&h==c.Ed&&f==c.Dd||d.push(function(){var t;return Re(function(e){if(1==e.g)return Ie(e,2),c.Ed=h,c.Dd=f,c.Fd=p,ke(e,(i=l.g.P,r=c.type,a=p,o=h,s=f,u=l.m.sequenceMode,Re(function(e){return r==bt.X?(u||(i.g.s=a),t=i.g,n=s,t.l=o,t.m=n,e.return()):ke(e,Promise.all([Ja(i,r,function(){return $a(i,r)}),u?Promise.resolve():Ja(i,r,function(){var e=a;e<0&&(e+=.001),i.h[r].timestampOffset=e,Qa(i,r)}),Ja(i,r,function(){i.h[r].appendWindowStart=0,i.h[r].appendWindowEnd=s,i.h[r].appendWindowStart=o,Qa(i,r)})]),0);var t,n})),4);var i,r,a,o,s,u;if(2!=e.g)return Ce(e,0);throw t=Me(e),c.Ed=null,c.Dd=null,c.Fd=null,t})}()),t=u.i,n=c.Uc,!(t&&n?t.ic()==n.ic()&&t.dc()==n.dc()&&ae(t.ya(),n.ya()):t==n)&&(c.Uc=u.i)&&(g=Yo(l,c,u.i),m=function(){var t,n,i;return Re(function(e){switch(e.g){case 1:return Ie(e,2),ke(e,g,4);case 4:return t=e.h,O(l.h),n=c.stream.closedCaptions&&0<c.stream.closedCaptions.size,ke(e,l.g.me(c.type,t),5);case 5:return ke(e,za(l.g.P,c.type,t,null,n),6);case 6:Ce(e,0);break;case 2:throw i=Me(e),c.Uc=null,i}})},l.g.Sf(u.startTime,u.i),d.push(m())),ke(e,Promise.all(d),0);var t,n})),4);case 4:return O(v.h),v.s?e.return():(M="video/mp4"==x.mimeType||"audio/mp4"==x.mimeType,C=N.ReadableStream,v.j.lowLatencyMode&&C&&M&&!T.l?(k=new Uint8Array(0),I=A=!1,ke(e,Yo(v,y,T,function(r){var a,o,s;return Re(function(e){return A||(I=!0,O(v.h),v.s)?e.return():(t=k,n=r,(i=new Uint8Array(t.length+n.length)).set(t),i.set(n,t.length),k=i,a=!1,o=0,(new _).box("mdat",function(e){o=e.size+e.start,a=!0}).parse(k,!1,!0),a?(s=k.subarray(0,o),k=k.subarray(o),ke(e,zo(v,y,b,x,T,s),0)):e.A(0));var t,n,i})}),11)):ke(e,Yo(v,y,T),7));case 7:if(S=e.h,O(v.h),v.s)return e.return();if(T.l)return ke(e,(t=S,n=T,i=E,Re(function(e){if(1==e.g)return(r=n.l).cryptoKey?e.A(2):ke(e,r.fetchKey(),3);if(!(a=r.iv))for(a=D(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i.g,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return e.return(N.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))})),9);e.A(8);break;case 9:S=e.h;case 8:return O(v.h),y.ab?(y.Ba=!1,Qo(v,y,0),e.return()):ke(e,zo(v,y,b,x,T,S),6);case 11:if(C=e.h,I){e.A(6);break}return A=!0,O(v.h),v.s?e.return():y.ab?(y.Ba=!1,Qo(v,y,0),e.return()):ke(e,zo(v,y,b,x,T,C),6);case 6:if(O(v.h),v.s)return e.return();y.za=T,E.next(),y.Ba=!1,y.Td=!1,M=v.g.P.Na(),R=M[y.type],JSON.stringify(R),y.ab||v.g.Pd(),Qo(v,y,0),Ce(e,0);break;case 2:if(R=Me(e),O(v.h,R),v.s)return e.return();if(y.Ba=!1,7001==R.code)y.Ba=!1,y.Ka=null,Qo(v,y,0);else if(y.type==w.X&&v.j.ignoreTextStreamFailures)v.i.delete(w.X);else if(3017==R.code)(function(e,t,n){if(!Array.from(e.i.values()).some(function(e){return e!=t&&e.Td})){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.jc=!0,e.s=!0,e.g.onError(n);e.u-=.04}t.Td=!0}Qo(e,t,4)})(v,y,R);else{if(1001!=R.code||!R.data||404!=R.data[1])return y.jc=!0,R.severity=2,ke(e,es(v,R),0);y.Ba=!1,y.Ka=null,Qo(v,y,1)}e.A(0)}var t,n,i,r,a,o,s,l,c,u,d,h,f,p,g,m}).catch(function(){}),null)}(t,n))&&(Qo(t,n,r),n.jc=!1),Ce(e,7);break;case 6:return r=Me(e),ke(e,es(t,r),8);case 8:return e.return();case 7:if(a=Array.from(t.i.values()),t.C&&a.every(function(e){return e.endOfStream}))return ke(e,t.g.P.endOfStream(),10);e.A(0);break;case 10:O(t.h),0!=(a=t.g.P.getDuration())&&a<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Ia(a),Ae(e)}})}function zo(l,o,s,c,d,u){var h,f,p;return Re(function(e){switch(e.g){case 1:return h=c.closedCaptions&&0<c.closedCaptions.size,(null!=c.emsgSchemeIdUris&&0<c.emsgSchemeIdUris.length||l.j.dispatchAllEmsgBoxes)&&(new _).U("emsg",function(e){var t,n,i,r,a,o,s,u=c.emsgSchemeIdUris;0===e.version?(t=e.reader.qc(),n=e.reader.qc(),i=e.reader.N(),r=e.reader.N(),a=e.reader.N(),o=e.reader.N(),s=d.startTime+r/i):(i=e.reader.N(),r=(s=e.reader.Jb()/i+d.timestampOffset)-d.startTime,a=e.reader.N(),o=e.reader.N(),t=e.reader.qc(),n=e.reader.qc()),e=e.reader.Za(e.reader.S.byteLength-e.reader.$()),(u&&u.includes(t)||l.j.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==t?l.g.Tf():(u=new ve("emsg",u=(new Map).set("detail",{startTime:s,endTime:s+a/i,schemeIdUri:t,value:n,timescale:i,presentationTimeDelta:r,eventDuration:a,id:o,messageData:e})),l.g.onEvent(u)))}).parse(u),ke(e,(t=l,n=o,i=s,Re(function(e){if(1==e.g)return a=Math.max(t.j.bufferBehind,t.m.presentationTimeline.g),null==(r=Ga(t.g.P,n.type))||(a=i-r-a)<=.01?e.return():ke(e,t.g.P.remove(n.type,r,r+a),2);O(t.h),Ae(e)})),2);case 2:return O(l.h),f=o.tc,o.tc=!1,p=o.ke,o.ke=!1,ke(e,l.g.me(o.type,u),3);case 3:return ke(e,za(l.g.P,o.type,u,d,h,f,p),4);case 4:O(l.h),Ae(e)}var t,n,i,r,a})}function Xo(e){return e&&e.type==me&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Yo(t,n,i,r){var a,o,s;return Re(function(e){return 1==e.g?(s=Di,a=Bo(i.ya(),i.Ca,i.la,t.j.retryParameters,r),o=n.stream,t.g.modifySegmentRequest(a,{type:o.type,init:i instanceof _a,duration:i.endTime-i.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),o=t.g.kb.request(s,a),ke(e,(n.ta=o).promise,2)):(s=e.h,n.ta=null,e.return(s.data))})}function $o(t,n,i,r){var a,o;return Re(function(e){return 1==e.g?(n.ab=!1,n.ed=!1,n.Hc=0,n.ac=!0,n.za=null,n.Uc=null,n.ba=null,r?(a=t.g.Pc(),o=t.g.P.getDuration(),ke(e,t.g.P.remove(n.type,a+r,o),3)):ke(e,Xa(t.g.P,n.type),4)):3!=e.g?(O(t.h),i?ke(e,t.g.P.flush(n.type),3):e.A(3)):(O(t.h),n.ac=!1,n.endOfStream=!1,Qo(t,n,0),void Ae(e))})}function Qo(n,i,e){var t=i.type;t==me&&!n.i.has(t)||(i.Ka=new xt(function(){var t;return Re(function(e){return 1==e.g?(Ie(e,2),ke(e,Wo(n,i),4)):2!=e.g?Ce(e,0):(t=Me(e),n.g&&n.g.onError(t),void Ae(e))})}).R(e))}function Jo(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Zo(t){return Re(function(e){return t.ta?ke(e,t.ta.abort(),0):e.A(0)})}function es(t,n){return Re(function(e){if(1==e.g)return ke(e,mi(t.D),2);O(t.h),t.g.onError(n),n.handled||t.j.failureCallback(n),Ae(e)})}function ts(e,t){var n=Mu(),r=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return o=r,Re(function(e){var t,n,i,r,a;return e=o.s.g?e.A(0):(n=(n=!(0==o.m.length||o.g&&!o.g.hb||(o.g&&(o.g.Ha.lb(),o.g=null),(t=(n=o.m.shift()).create(o.l))?(n.Ha.Hb(),o.g={node:t.node,payload:t.payload,hb:t.hb,Ha:n.Ha}):n.Ha.Yc(),0)))?Promise.resolve():o.g?(i=o,Re(function(e){switch(e.g){case 1:return i.i=i.j.zf(i.i,i.l,i.g.node,i.g.payload),Ie(e,2),i.h=i.j.jf(i.i,i.l,i.g.payload),ke(e,i.h.promise,4);case 4:i.h=null,i.i==i.g.node&&(i.g.Ha.Wc(),i.g=null),Ce(e,0);break;case 2:return 7001==(r=Me(e)).code?i.g.Ha.lb():i.g.Ha.onError(r),i.g=null,i.h=null,ke(e,(a=i).j.handleError(i.l,r),5);case 5:a.i=e.h,Ae(e)}})):(o.j.Rf(o.i),o.o=new R,o.o),ke(e,n,1))});var o}),this.s=new Pi(function(){return t=r,Re(function(e){if(1==e.g)return t.h&&t.h.abort(),is(t),ke(e,t.u,2);for(t.g&&t.g.Ha.lb(),n=Se(t.m),i=n.next();!i.done;i=n.next())i.value.Ha.lb();t.g=null,t.m=[],t.j=null,Ae(e)});var t,n,i})}function ns(e,t){var n={Hb:function(){},Wc:function(){},lb:function(){},onError:function(){},Yc:function(){},eh:function(){}};return e.m.push({create:t,Ha:n}),e.h&&e.h.abort(),is(e),n}function is(e){e.o&&(e.o.resolve(),e.o=null)}function rs(e){this.g=null;for(var t=Se(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function as(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=Se(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function os(){}function ss(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function us(e,t){var n=this;this.j=!1,this.i=[],this.C=e,this.m=t,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new A(function(){cs(n)}).Da(.25),this.h=new Map,this.s=new f,this.s.B(document,"fullscreenchange",function(){cs(n,!0)}),this.l=null,"ResizeObserver"in N&&(this.l=new ResizeObserver(function(){cs(n,!0)}),this.l.observe(this.g)),this.o=new Map}function ls(e,t,n,i,r){for(var a=!1,o=[],s=[],u=(t=Se(t)).next();!u.done;u=t.next()){u=u.value,r.push(u);var l,c,d,h,f,p,g,m,v,y,b=e.h.get(u),T=u.startTime<=i&&u.endTime>i,w=b?b.Te:null;if(b&&(o.push(b.wd),b.rc&&o.push(b.rc),T||(a=!0,e.h.delete(u),b=null)),T){s.push(u);if(!b){{T=void 0;x=void 0;E=void 0;S=void 0;k=void 0;A=void 0;l=void 0;v=void 0;c=void 0;d=void 0;m=void 0;h=void 0;f=void 0;p=void 0;g=void 0;y=void 0;T=e;var x=u;var E=r;var S=1<E.length,k=S?"span":"div",A=(x.lineBreak&&(k="br"),S=!S&&0<x.nestedCues.length,document.createElement(k));"br"!=k&&(l=T,c=x,d=E,m=S,h=(v=A).style,f=0==c.nestedCues.length,p=1<d.length,h.whiteSpace="pre-wrap",g=c.payload.replace(/\s+$/g,function(e){return"".repeat(e.length)}),h.webkitTextStrokeColor=c.textStrokeColor,h.webkitTextStrokeWidth=c.textStrokeWidth,h.color=c.color,h.direction=c.direction,h.opacity=c.opacity,h.paddingLeft=ds(c.linePadding,c,l.m),h.paddingRight=ds(c.linePadding,c,l.m),h.textShadow=c.textShadow,c.backgroundImage?(h.backgroundImage="url('"+c.backgroundImage+"')",h.backgroundRepeat="no-repeat",h.backgroundSize="contain",h.backgroundPosition="center",h.width="100%",h.height="100%"):(c.nestedCues.length?y=v:(y=document.createElement("span"),v.appendChild(y)),c.border&&(y.style.border=c.border),m||((v=function(e){for(var t=e.length-1;0<=t;t--){var n=e[t].backgroundColor;if(n||0===n)return n}return null}(d))?y.style.backgroundColor=v:g&&(y.style.backgroundColor="rgba(0, 0, 0, 0.8)")),g&&(y.textContent=g)),p&&!d[d.length-1].isContainer?h.display="inline":(h.display="flex",h.flexDirection="column",h.alignItems="center",h.justifyContent="before"==c.displayAlign?"flex-start":"center"==c.displayAlign?"center":"flex-end"),f||(h.margin="0"),h.fontFamily=c.fontFamily,h.fontWeight=c.fontWeight.toString(),h.fontStyle=c.fontStyle,h.letterSpacing=c.letterSpacing,h.fontSize=ds(c.fontSize,c,l.m),c.line&&1==c.lineInterpretation&&(h.position="absolute",h.left="0",h.top="0",c.writingMode==pe?(h.width="100%",c.lineAlign==we?h.top=c.line+"%":"end"==c.lineAlign&&(h.bottom=c.line+"%")):"vertical-lr"==c.writingMode?(h.height="100%",c.lineAlign==we?h.left=c.line+"%":"end"==c.lineAlign&&(h.right=c.line+"%")):(h.height="100%",c.lineAlign==we?h.right=c.line+"%":"end"==c.lineAlign&&(h.left=c.line+"%"))),h.lineHeight=c.lineHeight,c.position&&(c.writingMode==pe?h.paddingLeft=c.position:h.paddingTop=c.position),"line-left"==c.positionAlign?h.cssFloat="left":"line-right"==c.positionAlign&&(h.cssFloat="right"),h.textAlign=c.textAlign,h.textDecoration=c.textDecoration.join(" "),h.writingMode=c.writingMode,"writingMode"in document.documentElement.style&&h.writingMode==c.writingMode||(h.webkitWritingMode=c.writingMode),c.size)&&(c.writingMode==pe?h.width=c.size+"%":h.height=c.size+"%");E=null,x.region&&x.region.id&&(E=x.region,E=T.o.has(E.id)?T.o.get(E.id):(k=document.createElement("span"),m=E.heightUnits==Fe?"%":"px",v=E.widthUnits==Fe?"%":"px",y=E.viewportAnchorUnits==Fe?"%":"px",k.id="shaka-text-region---"+E.id,k.classList.add("shaka-text-region"),k.style.height=E.height+m,k.style.width=E.width+v,k.style.position="absolute",k.style.top=E.viewportAnchorY+y,k.style.left=E.viewportAnchorX+y,k.style.display="flex",k.style.flexDirection="column",k.style.alignItems="center",k.style.justifyContent="before"==x.displayAlign?"flex-start":"center"==x.displayAlign?"center":"flex-end",T.o.set(E.id,k),k));k=A,S&&((k=document.createElement("span")).classList.add("shaka-text-wrapper"),k.style.backgroundColor=x.backgroundColor,A.appendChild(k)),T.h.set(x,{wd:A,Te:k,rc:E})}w=(b=e.h.get(u)).Te,a=!0}}0<u.nestedCues.length&&w&&ls(e,u.nestedCues,w,i,r),r.pop()}if(a){for(r=(i=Se(o)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(s.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),u=(s=Se(s)).next();!u.done;u=s.next())((i=e.h.get(u.value)).rc?(n.appendChild(i.rc),i.rc):n).appendChild(i.wd)}}function cs(e,t){if(e.g){var n=e.C.currentTime;if(!e.j||void 0!==t&&t){for(var i=Se(e.o.values()),r=i.next();!r.done;r=i.next())ss(r.value);ss(e.g),e.h.clear(),e.o.clear()}if(e.j){for(var i=new Map,a=(r=Se(e.h.keys())).next();!a.done;a=r.next())a=a.value,i.set(a,e.h.get(a));ls(e,e.i,e.g,n,[])}}}function ds(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function hs(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function fs(e,t,n){try{var i,r;e.g.enabled&&((i={d:1e3*n.duration,st:e.h.V()?As:ks}).ot=(l=(u=n).type,u.init?xs:"video"==l?u.codecs.includes(",")?ws:Ts:"audio"==l?bs:"text"==l?"application/mp4"===u.mimeType?Ss:Es:void 0),(r=i.ot===Ts||i.ot===bs||i.ot===ws||i.ot===Ss)&&(i.bl=(a=e,o=n.type,(o=a.h.Na()[o]).length&&(s=a.h.getCurrentTime(),o=o.find(function(e){return e.start<=s&&e.end>=s}))?1e3*(o.end-s):NaN)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==Ss&&(i.tb=function(e,t){var n=e.h.Ya();if(!n.length)return NaN;for(var i=n[0],r=(n=Se(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>i.bandwidth&&(i=r);switch(t){case Ts:return i.videoBandwidth||NaN;case bs:return i.audioBandwidth||NaN;default:return i.bandwidth}}(e,i.ot)/1e3),gs(e,t,i))}catch(e){Z("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}var a,o,s,u,l}function ps(e){return e.j||(e.j=e.g.sessionId||N.crypto.randomUUID()),{v:1,sf:e.o,sid:e.j,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function gs(e,t,n){n=void 0===n?{}:n;var i,r,a=e.g.useHeaders;e.g.enabled&&(Object.assign(n,ps(e)),n.pr=e.h.Oc(),i=n.ot===Ts||n.ot===ws,e.l&&i&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),a?(e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=Se(t)).next();!o.done;o=t.next())r[null!=a[o=o.value]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=ms(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e)):(r=ms(n))&&(t.uris=t.uris.map(function(e){return vs(e,r)})))}function ms(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var i=[],r={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},a=Object.keys(e||{}).sort(),o=(a=Se(a)).next();!o.done;o=a.next()){var s=e[o=o.value],u=s;Number.isNaN(u)||null==u||""===u||!1===u||"v"===o&&1===s||"pr"==o&&1===s||(u="string"==(u=typeof(s=(u=r[o])?u(s):s))&&"ot"!==o&&"sf"!==o&&"st"!==o?o+"="+JSON.stringify(s):"boolean"===u?o:"symbol"===u?o+"="+s.description:o+"="+s,i.push(u))}return i.join(",")}function vs(e,t){return!t||e.includes("offline:")?e:((e=new Je(e)).g.set("CMCD",t),e.toString())}(n=Fo.prototype).destroy=function(){return this.h.destroy()},n.configure=function(e){this.j=e,this.D=new gi({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},n.start=function(){var l=this;return Re(function(e){if(1==e.g)return ke(e,(t=l,Re(function(e){if(1==e.g){if(i=bt,t.l)return n=new Map,r=new Set,t.l.audio&&(n.set(i.cb,t.l.audio),r.add(t.l.audio)),t.l.video&&(n.set(i.ra,t.l.video),r.add(t.l.video)),t.o&&(n.set(i.X,t.o),r.add(t.o)),i=t.g.P,r=t.j.forceTransmuxTS,ke(e,i.init(n,r,t.m.sequenceMode),2);throw new Ne(2,5,5006)}for(O(t.h),t.updateDuration(),a=Se(n.keys()),o=a.next();!o.done;o=a.next())s=o.value,u=n.get(s),t.i.has(s)||(u=qo(u),t.i.set(s,u),Qo(t,u,0));Ae(e)})),2);var t,n,i,r,a,o,s,u;O(l.h),l.C=!0,Ae(e)})},n.tc=function(){for(var e=this.g.Pc(),t=Se(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value,r=((n=this.i.get(i)).ba=null,this.g.P);if(!(r=i==me?null!=(r=r.g).g&&null!=r.h&&e>=r.g&&e<r.h:Ua(r=Wa(r,i),e))){if(null==qa(this.g.P,i)&&!n.Ba||function(t,e){e.ac||e.ab||(e.Ba?(e.ab=!0,e.Hc=0):null==Ga(t.g.P,e.type)?null==e.Ka&&Qo(t,e,0):(Jo(e),$o(t,e,!1,0).catch(function(e){t.g&&t.g.onError(e)})))}(this,n),n.ta&&(n.ta.abort(),n.ta=null),i===me)for((i=this.g.P.C.g).l=0,i.h=[],i.g=[],(r=i.i).i=[],r.h=[],r.g=0,Ea(i),r=(i=Se(i.j.values())).next();!r.done;r=i.next())ya(r.value);n.tc=!0}}},n.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();e<1/0?this.g.P.Ia(e):this.g.P.Ia(Math.pow(2,32))},ts.prototype.destroy=function(){return this.s.destroy()},(n=rs.prototype).remove=function(t,n){return!!this.g&&(as(this.g,function(e){return e.startTime<n&&e.endTime>t}),!0)},n.append=function(e){function o(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce(function(e,t){return e+"<"+t+">"},""),t=t.reduceRight(function(e,t){return e+"</"+t+">"},""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(o).join(""):n+e.payload+t}var t=function e(t,n){for(var i,r=Se(t),a=r.next();!a.done;a=r.next())(a=a.value).isContainer?e(a.nestedCues,n):((i=a.clone()).nestedCues=[],i.payload=o(a),n.push(i));return n}(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},r=(t=Se(t)).next();!r.done;i={rb:i.rb},r=t.next())i.rb=r.value,e.some(function(t){return function(e){return e.startTime==t.rb.startTime&&e.endTime==t.rb.endTime&&e.text==t.rb.payload}}(i))||(r=function(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}(i.rb))&&n.push(r);for(i=(e=Se(e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}))).next();!i.done;i=e.next())this.g.addCue(i.value)},n.destroy=function(){return this.g&&(as(this.g,function(){return 1}),this.g.mode="disabled"),this.g=null,Promise.resolve()},n.isTextVisible=function(){return"showing"==this.g.mode},n.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},t("shaka.text.SimpleTextDisplayer",rs),t("shaka.util.Dom",os),os.removeAllChildren=ss,(n=us.prototype).append=function(e){for(var t=[].concat(te(this.i)),n={},i=(e=Se(e)).next();!i.done;n={zc:n.zc},i=e.next())n.zc=i.value,t.some(function(t){return function(e){return oe(e,t.zc)}}(n))||this.i.push(n.zc);cs(this)},n.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},n.remove=function(t,n){var e;return!!this.g&&(e=this.i.length,this.i=this.i.filter(function(e){return e.startTime<t||e.endTime>=n}),cs(this,e>this.i.length),!0)},n.isTextVisible=function(){return this.j},n.setTextVisibility=function(e){this.j=e},t("shaka.text.UITextDisplayer",us),t("shaka.text.WebVttGenerator",function(){});var ys="m",bs="a",Ts="v",ws="av",xs="i",Es="c",Ss="tt",ks="v",As="l";function Is(){}function Cs(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,l=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===l||o?delete e[a]:e[a]=Si(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Si(l)),u=Cs(e[a],t[a],l,i,u),s=s&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(Te("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&J("Unexpected number of arguments for "+u),e[a]=t[a]):(Te("Invalid config, unrecognized key "+u),s=!1)}return s}function Ms(e,t){for(var n={},i=n,r=0,a=0;!((r=e.indexOf(".",r))<0);)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Rs(){}function Ns(){var e=1/0,t=(navigator.connection&&navigator.connection.saveData&&(e=360),{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:kt()}),n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return e}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"'}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30},r=((m("Web0S")||At()||m("CrKey"))&&(i.stallSkip=0),{trackSelectionCallback:function(t){return Re(function(e){return e.return(t)})},downloadSizeCallback:function(t){var n;return Re(function(e){return 1==e.g?navigator.storage&&navigator.storage.estimate?ke(e,navigator.storage.estimate(),3):e.return(!0):(n=e.h,e.return(n.usage+t<.95*n.quota))})},progressCallback:function(e,t){},usePersistentLicense:!0,numberOfParallelDownloads:5}),a={drm:t,manifest:n,streaming:i,offline:r,abrFactory:function(){return new Qn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,ignoreDevicePixelRatio:!1},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return r.trackSelectionCallback=function(t){return Re(function(e){return e.return(function(e,t){var n,i=e.filter(function(e){return"variant"==e.type}),r=[],a=vn(t,i.map(function(e){return e.language})),o=(0==(r=0==(r=a?i.filter(function(e){return I(e.language)==a}):r).length?i.filter(function(e){return e.primary}):r).length&&(i.map(function(e){return e.language}),r=i),r.filter(function(e){return e.height&&e.height<=480}));for(o.length&&(o.sort(function(e,t){return t.height-e.height}),r=o.filter(function(e){return e.height==o[0].height})),i=[],r.length&&(n=Math.floor(r.length/2),r.sort(function(e,t){return e.bandwidth-t.bandwidth}),i.push(r[n])),n=(r=Se(e)).next();!n.done;n=r.next())(n=n.value).type!=me&&"image"!=n.type||i.push(n);return i}(t,a.preferredAudioLanguage))})},a}function Ds(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Cs(e,t,n||Ns(),i,"")}function _s(){this.g=null,this.h=[]}function Ls(e,t){var n;null==e.g?e.g={timestamp:Date.now()/1e3,state:t,duration:0}:(n=Date.now()/1e3,e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0}))}function Ps(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=Se(e.h),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Os(){this.i=this.h=null,this.g=[]}function js(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Us(){this.u=this.C=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.O=this.T=this.I=this.L=this.M=this.l=this.o=NaN,this.g=new _s,this.h=new Os}function i(e,t){h.call(this);var r,l=this,i=(this.l=Du,this.Jc=this.g=null,this.ha=!1,this.Rc=new f,this.Wb=new f,this.s=new f,this.Bd=this.u=this.Vb=this.i=this.Sc=this.I=this.j=this.ia=this.T=this.Tc=this.M=this.Kc=this.G=this.vb=this.C=this.L=this.m=this.F=null,this.He=1e9,this.h=Zs(this),this.$b={width:1/0,height:1/0},this.o=null,this.La=new ci(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.sb=this.h.preferredTextLanguage,this.Zb=this.h.preferredTextRole,this.Xb=this.h.preferForcedSubs,this.Mb=[],this.cc=null,t&&t(this),this.F=(r=this,new a(function(e,t){r.u&&r.u.segmentDownloaded(e,t)},function(e,t,n){e=(new Map).set("headers",e).set("request",t).set("requestType",n),r.dispatchEvent(Bs("downloadheadersreceived",e))},function(e,t,n,i){e=(new Map).set("request",e).set("error",t).set("httpResponseCode",n).set("aborted",i),r.dispatchEvent(Bs("downloadfailed",e))})),this.F.$d(this.h.streaming.forceHTTPS),this.D=null,Uu&&(this.D=Uu()),this.Rc.B(N,"online",function(){l.Ud()}),this.O={name:"detach"},this.Y={name:"attach"},this.ea={name:"unload"},this.Nd={name:"manifest-parser"},this.Kd={name:"manifest"},this.ub={name:"media-source"},this.Cd={name:"drm-engine"},this.ca={name:"load"},this.Qd={name:"src-equals-drm-engine"},this.wb={name:"src-equals"},new Map);i.set(this.Y,function(e,t){return Ti((n=l,null==(e=e).K&&(e.K=t.K,n.Wb.B(e.K,"error",function(){var e=yu(n);e&&mu(n,e)})),n.g=e.K,Promise.resolve()));var n}),i.set(this.O,function(e){return e.K&&(l.Wb.mb(),e.K=null),l.D&&l.D.release(),l.g=null,Ti(e=Promise.resolve())}),i.set(this.ea,function(e){return Ti(Fs(l,e))}),i.set(this.ub,function(e){return u=l,t=e,Ti(e=Re(function(e){if(1==e.g)return i=new Na,n=u.h.textDisplayFactory,r=n(),u.Hd=n,n=new Va(t.K,i,r,function(e,t,n){for(var i=(e=Se(e)).next();!i.done;i=e.next())if((i=i.value).data&&i.cueTime&&i.frames){for(var r=i.cueTime+t,a=n,o=Se(i.frames),s=o.next();!s.done;s=o.next())Vs(u,r,a,"ID3",s.value);u.D&&u.D.onHlsTimedMetadata(i,r)}}),i=u.h.manifest,r=i.segmentRelativeVttTiming,n.F=r,ke(e,n.G,2);u.L=n,Ae(e)}));var u,t,n,i,r}),i.set(this.Nd,function(e,t){var n,i,r,a,o;return n=l,i=e,r=t,Ti(Re(function(e){if(1==e.g)return i.mimeType=r.mimeType,i.uri=r.uri,a=i.uri,o=n.F,ke(e,xr(n.Vb=a,o,(a=n).h.manifest.retryParameters,i.mimeType),2);a.Sc=e.h,n.I=n.Sc(),o=Si(n.h.manifest),r.K&&"AUDIO"===r.K.nodeName&&(o.disableVideo=!0),n.I.configure(o),Ae(e)}))}),i.set(this.Kd,function(e){return c=l,a=e.uri,e=c.F,c.Tc=new _o(function(){return c.sc()}),c.Tc.addEventListener("regionadd",function(e){e=e.region,vu(c,"timelineregionadded",e),c.D&&c.D.onDashTimedMetadata(e)}),c.ia=null,c.h.streaming.observeQualityChanges&&(c.ia=new Do(function(){return c.Na()}),c.ia.addEventListener("qualitychange",function(e){var t=e.quality;e=e.position,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width}).set("position",e),c.dispatchEvent(Bs("mediaqualitychanged",t))})),o={networkingEngine:e,modifyManifestRequest:function(e,t){var n=c.T;try{n.g.enabled&&(n.o=t.format,gs(n,e,{ot:ys,su:!n.i}))}catch(e){Z("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(e,t){fs(c.T,e,t)},filter:function(e){return eu(c,e)},makeTextStreamsForClosedCaptions:function(e){for(var t=c,n=e,i=new Set,r=Se(n.textStreams),a=r.next();!a.done;a=r.next())"application/cea-608"!=(a=a.value).mimeType&&"application/cea-708"!=a.mimeType||i.add(a.originalId);for(a=(r=Se(n.variants)).next();!a.done;a=r.next())if((a=a.value.video)&&a.closedCaptions)for(var o=Se(a.closedCaptions.keys()),s=o.next();!s.done;s=o.next()){var u,l,s=s.value;i.has(s)||(l=s.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Io,l={id:t.He++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:l,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:a.closedCaptions.get(s),label:null,type:me,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},n.textStreams.push(l),i.add(s))}},onTimelineRegionAdded:function(e){var t=c.Tc;e:{for(var n=Se(t.g),i=n.next();!i.done;i=n.next())if((i=i.value).schemeIdUri==e.schemeIdUri&&i.id==e.id&&i.startTime==e.startTime&&i.endTime==e.endTime){n=i;break e}n=null}null==n&&(t.g.add(e),e=new ve("regionadd",new Map([["region",e]])),t.dispatchEvent(e))},onEvent:function(e){return c.dispatchEvent(e)},onError:function(e){return mu(c,e)},isLowLatencyMode:function(){return c.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return c.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){c.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){c.j&&c.j.updateDuration()}},s=Date.now()/1e3,new C(Re(function(e){if(1==e.g)return ke(e,(i=c).I.start(a,o),2);if(i.i=e.h,r=Bs("manifestparsed"),c.dispatchEvent(r),0==c.i.variants.length)throw new Ne(2,4,4036);function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}var n;(n=c.i).variants.some(t)&&(n.variants=n.variants.filter(t)),r=Date.now()/1e3,r=r-s,c.o.F=r,Ae(e)}),function(){return c.I.stop()});var c,i,r,a,o,s}),i.set(this.Cd,function(e){return n=l,t=e,Ti(e=Re(function(e){return 1==e.g?(i=Date.now()/1e3,r=!0,n.m=Ks(n,{kb:n.F,onError:function(e){mu(n,e)},Xc:function(e){bu(n,e)},onExpirationUpdated:function(e,t){Tu(n,e,t)},onEvent:function(e){n.dispatchEvent(e),"drmsessionupdate"==e.type&&r&&(r=!1,n.o.j=Date.now()/1e3-i)}}),n.m.configure(n.h.drm),ke(e,er(n.m,n.i.variants,n.i.offlineSessionIds),2)):3!=e.g?ke(e,n.m.Yb(t.K),3):ke(e,eu(n,n.i),0)}));var n,t,i,r}),i.set(this.ca,function(e,t){return Ti((m=l,v=e,y=t,Re(function(e){switch(e.g){case 1:if(v.startTime=y.startTime,null!=m.cc&&(v.startTime=m.cc,m.cc=null),b=v.K,T=v.uri,m.Vb=T,m.G=new Co({Qc:function(){return b.playbackRate},Mc:function(){return b.defaultPlaybackRate},be:function(e){b.playbackRate=e},De:function(e){b.currentTime+=e}}),T=function(){return ru(m)},w=function(){return iu(m)},m.s.B(b,"playing",T),m.s.B(b,"pause",T),m.s.B(b,"ended",T),m.s.B(b,"ratechange",w),T=m.h.abrFactory,m.u&&m.Bd==T||(m.Bd=T,m.u=T(),"function"!=typeof m.u.setMediaElement&&(h=new ti(5,0),p=(f=ri).g,g=h.h-p.h,(0<(h.g-p.g||g)?f.i:f.h)(f.g,h,"AbrManager","Please use an AbrManager with setMediaElement function."),m.u.setMediaElement=function(){}),m.u.configure(m.h.abr)),m.La=new ci(m.h.preferredAudioLanguage,m.h.preferredVariantRole,m.h.preferredAudioChannelCount),m.sb=m.h.preferredTextLanguage,m.Zb=m.h.preferredTextRole,m.Xb=m.h.preferForcedSubs,wu(m.i.presentationTimeline,m.h.playRangeStart,m.h.playRangeEnd),m.u.init(function(e,t,n){m.j&&e!=m.j.l&&uu(m,e,!0,void 0!==t&&t,void 0===n?0:n)}),m.u.setMediaElement(b),m.C=(d=m,p=v.startTime,new wo(d.g,d.i,d.h.streaming,p,function(){d.vb&&No(d.vb,!0),d.j&&d.j.tc(),d.M&&qs(d)},function(e){return d.dispatchEvent(e)})),m.vb=((g=new Lo((c=m).Tc)).addEventListener("enter",function(e){vu(c,"timelineregionenter",e.region)}),g.addEventListener("exit",function(e){vu(c,"timelineregionexit",e.region)}),g.addEventListener("skip",function(e){var t=e.region;e.seeking||(vu(c,"timelineregionenter",t),vu(c,"timelineregionexit",t))}),(f=new Ro(c.g)).g.add(g),c.ia&&f.g.add(c.ia),f),w=Math.max(m.i.minBufferTime,m.h.streaming.rebufferingGoal),Gs(m,w),wn(m.i,m.h.preferredVideoCodecs,m.h.preferredAudioCodecs,m.h.preferredAudioChannelCount,m.h.preferredDecodingAttributes),m.j=new Fo((l=m).i,{Pc:function(){return l.C.Ec()},getBandwidthEstimate:function(){return l.u.getBandwidthEstimate()},modifySegmentRequest:function(e,t){fs(l.T,e,t)},P:l.L,kb:l.F,onError:function(e){return mu(l,e)},onEvent:function(e){return l.dispatchEvent(e)},Tf:function(){l.I&&l.I.update&&l.I.update()},Pd:function(){l.C&&l.C.Ee(),qs(l)},Sf:function(e,t){var n,i,r,a,o,s,u,t=t.Id;t&&l.ia&&(n=l.ia,i=e,e=n,r=(t=t).contentType,(u=e.g.get(r))||e.g.set(r,u={pc:[],pe:null,contentType:r}),r=e=u,(u=n.h()[r.contentType])&&0<u.length?(a=u[0].start,o=u[u.length-1].end,s=r.pc,r.pc=s.filter(function(e,t){return!(e.position<=a&&t+1<s.length&&s[t+1].position<=a||e.position>=o)})):r.pc=[],n={Id:t,position:i},0<=(t=(e=e.pc).findIndex(function(e){return e.position>=i}))?e.splice(t,e[t].position==i?1:0,n):e.push(n))},me:function(e,t){var n=l.m;if(n.h.parseInbandPsshEnabled&&["audio","video"].includes(e)){for(var i=new Qi(D(t)),r=0,a=Se(i.data),o=a.next();!o.done;o=a.next())r+=o.value.length;if(0==r)n=Promise.resolve();else{for(r=new Uint8Array(r),a=0,o=(i=Se(i.data)).next();!o.done;o=i.next())o=o.value,r.set(o,a),a+=o.length;ar(n,"cenc",r),n=n.o}}else n=Promise.resolve();return n}}),m.j.configure(m.h.streaming),m.l=_u,b.textTracks&&m.s.B(b.textTracks,"addtrack",function(e){e.track&&"chapters"===(e=e.track).kind&&Hs(m,e)}),m.dispatchEvent(Bs("streaming")),T=null,m.Ya().find(function(e){return e.active}))e.A(2);else{if(T=ou(m),uu(m,T,!0,!1,0),m.h.streaming.startAtSegmentBoundary)return w=m.C.Ec(),ke(e,(i=T,r=w,Re(function(e){return 1==e.g?(u=i.audio,a=i.video,ke(e,(o=function(t,n){var i;return Re(function(e){return 1==e.g?t?ke(e,t.createSegmentIndex(),2):e.return(null):(i=(i=t.segmentIndex.Ab(n))?i.next().value:null)?(i=i.startTime,e.return(i)):e.return(null)})})(u,r),2)):3!=e.g?(s=e.h,ke(e,o(a,r),3)):null!=(u=e.h)&&null!=s?e.return(Math.max(u,s)):null!=u?e.return(u):null!=s?e.return(s):e.return(r)})),4);e.A(3)}break;case 4:w=e.h,m.C.vd(w);case 3:cu(m,null,Dn(T));case 2:return m.Db().find(function(e){return e.active})||((x=Vn(m.i.textStreams,m.sb,m.Zb,m.Xb)[0]||null)&&js(m.o.h,x,!0),T&&(x?(T.audio&&(h=m,t=T.audio,n=x,h=I(h.h.preferredTextLanguage),t=I(t.language),dn(n=I(n.language),h))&&!dn(t,n)&&(m.ha=!0),m.ha&&m.L.m.setTextVisibility(!0),pu(m)):m.ha=!1),x&&(m.h.streaming.alwaysStreamText||m.zd())&&Ko(m.j,x)),ke(e,m.j.start(),5);case 5:m.h.abr.enabled&&(m.u.enable(),gu(m)),Rn(m.j?m.j.l:null,m.i),Eu(m.i),du(m),au(m),m.i.variants.some(function(e){return e.primary}),m.s.oa(b,"loadedmetadata",function(){m.o.m=Date.now()/1e3-y.de}),Ae(e)}var t,n,i,r,a,o,s,u,l,c,d,h,f,p,g})));var m,v,y,b,T,w,x}),i.set(this.Qd,function(e,t){var n,i,r,a,o,s,u;return n=l,i=e,r=t,Ti(Re(function(e){return 1==e.g?(a=bt,o=Date.now()/1e3,s=!0,n.m=Ks(n,{kb:n.F,onError:function(e){mu(n,e)},Xc:function(e){bu(n,e)},onExpirationUpdated:function(e,t){Tu(n,e,t)},onEvent:function(e){n.dispatchEvent(e),"drmsessionupdate"==e.type&&s&&(s=!1,n.o.j=Date.now()/1e3-o)}}),n.m.configure(n.h.drm),u=r.uri||"",u=Sr(u),u=(u="application/x-mpegurl"==(u=Bu[u])&&Ct()?"application/vnd.apple.mpegurl":u)||"video/mp4",u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:r.mimeType?r.mimeType.split(";")[0]:u,codecs:r.mimeType?nn(r.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:a.ra,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.m.Y=!0,ke(e,er(n.m,[u],[]),2)):ke(e,n.m.Yb(i.K),0)}))}),i.set(this.wb,function(e,t){return a=l,i=t,(t=e).uri=i.uri,t.startTime=i.startTime,a.Vb=t.uri,o=t.K,a.C=new To(o),s=!1,a.Mb.push(function(){s=!0}),null!=t.startTime&&a.C.vd(t.startTime),a.G=new Co({Qc:function(){return o.playbackRate},Mc:function(){return o.defaultPlaybackRate},be:function(e){o.playbackRate=e},De:function(e){o.currentTime+=e}}),Gs(a,a.h.streaming.rebufferingGoal),a.s.B(o,"playing",n),a.s.B(o,"pause",n),a.s.B(o,"ended",n),a.s.B(o,"ratechange",function(){return iu(a)}),"none"!=o.preload&&a.s.oa(o,"loadedmetadata",function(){a.o.m=Date.now()/1e3-i.de}),o.audioTracks&&(a.s.B(o.audioTracks,"addtrack",function(){return du(a)}),a.s.B(o.audioTracks,"removetrack",function(){return du(a)}),a.s.B(o.audioTracks,"change",function(){return du(a)})),o.textTracks&&(a.s.B(o.textTracks,"addtrack",function(e){if(e.track)switch(e=e.track,e.kind){case"metadata":n=a,"metadata"==(i=e).kind&&(i.mode="hidden",n.s.B(i,"cuechange",function(){if(i.activeCues)for(var e=Se(i.activeCues),t=e.next();!t.done;t=e.next())t=t.value,Vs(n,t.startTime,t.endTime,t.type,t.value),n.D&&n.D.onCueMetadataChange(t.value)}),t=new A(function(){for(var e=Array.from(n.g.textTracks).filter(function(e){return"metadata"==e.kind}),t=(e=Se(e)).next();!t.done;t=e.next())t.value.mode="hidden"}).Lb().R(.5),n.Mb.push(function(){t.stop()}));break;case"chapters":Hs(a,e);break;default:du(a)}var n,i,t}),a.s.B(o.textTracks,"removetrack",function(){return du(a)}),a.s.B(o.textTracks,"change",function(){return du(a)})),e=Sr(t.uri),o.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=ps(e);e:{switch(n){case"video/webm":case"video/mp4":var r=ws;break e;case"application/x-mpegurl":r=ys;break e}r=void 0}return i.ot=r,i.su=!0,vs(t,ms(i))}catch(e){return Z("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(a.T,t.uri,Bu[e]),(At()||m("Web0S"))&&o.load(),a.l=Lu,a.dispatchEvent(Bs("streaming")),r=new R,co(o,HTMLMediaElement.HAVE_METADATA,a.s,function(){r.resolve()}),co(o,HTMLMediaElement.HAVE_CURRENT_DATA,a.s,function(){return Re(function(e){return 1==e.g?(""!=(r=(n=a).h.preferredAudioLanguage)&&(n.Xd(r),""!=(i=n.h.preferredVariantRole))&&n.Xd(r,i),zs(a).find(function(e){return"disabled"!=e.mode})?e.A(2):ke(e,new Promise(function(e){a.s.oa(o.textTracks,"change",e),new A(e).R(1)}),2)):s?e.return():(r=(n=a).h.preferredTextLanguage,i=n.h.preferForcedSubs,""!=r&&(n.Yd(r,"",i),""!=(t=n.h.preferredTextRole))&&n.Yd(r,t,i),void Ae(e));var t,n,i,r})}),o.error?r.reject(yu(a)):"none"==o.preload&&(J('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),r.resolve()),a.s.oa(o,"error",function(){r.reject(yu(a))}),new C(r,function(){return r.reject(new Ne(2,7,7001)),Promise.resolve()});function n(){return ru(a)}var a,i,o,s,r}),this.va=new ts(this.O,{zf:function(e,t,n,i){var r=null;return e==l.O&&(r=n==l.O?l.O:l.Y),e==l.Y&&(r=n==l.O||t.K!=i.K?l.O:n==l.Y?l.Y:n==l.ub||n==l.ca?l.ub:n==l.wb?l.Qd:null),e==l.ub&&(r=n==l.ca&&t.K==i.K?l.Nd:l.ea),e==l.Nd&&(r=Cu(l.ca,l.Kd,l.ea,n,t,i)),e==l.Kd&&(r=Cu(l.ca,l.Cd,l.ea,n,t,i)),e==l.Cd&&(r=Cu(l.ca,l.ca,l.ea,n,t,i)),e==l.Qd&&(r=n==l.wb&&t.K==i.K?l.wb:l.ea),e!=l.ca&&e!=l.wb||(r=l.ea),r=e==l.ea?i.K&&t.K==i.K?l.Y:l.O:r},jf:function(e,t,n){return l.dispatchEvent(Bs("onstatechange",(new Map).set("state",e.name))),i.get(e)(t,n)},handleError:function(t){return Re(function(e){return 1==e.g?ke(e,Fs(l,t),2):e.return(t.K?l.Y:l.O)})},Rf:function(e){l.dispatchEvent(Bs("onstateidle",(new Map).set("state",e.name)))}}),this.Ge=new A(function(){Sn(l.i.variants,l.h.restrictions,l.$b)&&ou(l)}),e&&this.Yb(e,!0)}function Bs(e,t){return new ve(e,t)}function Fs(t,n){var i,r,a,o,s,u,l,c,d;return Re(function(e){switch(e.g){case 1:return t.l!=Nu&&(t.l=Du),i=t.Mb.map(function(e){return e()}),t.Mb=[],ke(e,Promise.all(i),2);case 2:if(t.dispatchEvent(Bs("unloading")),n.mimeType=null,n.startTime=null,n.uri=null,n.K&&t.s.mb(),t.Ge.stop(),t.vb&&(t.vb.release(),t.vb=null),t.Kc&&(t.Kc.stop(),t.Kc=null),t.I)return ke(e,t.I.stop(),4);e.A(3);break;case 4:t.I=null,t.Sc=null;case 3:if(t.u)return ke(e,t.u.stop(),5);e.A(5);break;case 5:if(t.j)return ke(e,t.j.destroy(),8);e.A(7);break;case 8:t.j=null;case 7:if(t.G&&(t.G.release(),t.G=null),t.C&&(t.C.release(),t.C=null),t.L)return ke(e,t.L.destroy(),10);e.A(9);break;case 10:t.L=null;case 9:if(t.D&&t.D.onAssetUnload(),n.K&&n.K.src)return ke(e,new Promise(function(e){return new A(e).R(.1)}),12);e.A(11);break;case 12:for(n.K.removeAttribute("src"),n.K.load();n.K.lastChild;)n.K.removeChild(n.K.firstChild);case 11:if(t.m)return ke(e,t.m.destroy(),14);e.A(13);break;case 14:t.m=null;case 13:if(t.Vb=null,t.M=null,t.i){for(r=Se(t.i.variants),a=r.next();!a.done;a=r.next())for(o=a.value,s=Se([o.audio,o.video]),u=s.next();!u.done;u=s.next())(l=u.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=Se(t.i.textStreams),u=c.next();!u.done;u=c.next())(d=u.value).segmentIndex&&d.segmentIndex.release()}t.i=null,t.o=new Us,t.Hd=null,nu(t),Ae(e)}})}function Vs(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(Bs("metadata",t))}function Hs(e,t){var n;t&&"chapters"==t.kind&&(t.mode="hidden",n=new A(function(){t.mode="hidden"}).Lb().R(.5),e.Mb.push(function(){n.stop()}))}function Ks(e,t){return new Zi(t,e.h.drm.updateExpirationTime)}function Gs(e,t){e.M=new di,e.M.g=fi,hi(e.M,t,Math.min(.5,t/2)),nu(e),e.Kc=new A(function(){qs(e)}).Da(.25)}function qs(e){switch(e.l){case Lu:var t;t=!!e.g.ended||null!=(n=ja(e.g.buffered))&&n>=e.g.duration-1;break;case _u:e:if(e.g.ended||Ka(e.L))t=!0;else{if(e.i.presentationTimeline.V()){var n=e.i.presentationTimeline.gb(),i=ja(e.g.buffered);if(null!=i&&n<=i){t=!0;break e}}t=!1}break;default:t=!1}var i=Ba(e.g.buffered,e.g.currentTime),r=t,a=(n=e.M).h.get(n.g);(t=n.g)!=(n.g=i=r||a<=i?pi:fi)&&nu(e)}function Ws(e){var t,n,i,r;if(e.I&&(t=Si(e.h.manifest),e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.I.configure(t)),e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{tu(e,e.i)}catch(t){mu(e,t)}e.u&&au(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||su(e)}e.F&&e.F.$d(e.h.streaming.forceHTTPS),e.L&&(e.L.F=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Hd!=t)&&(n=t(),r=(i=e.L).m,i.m=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.Hd=t,e.j&&(n=(t=e.j).i.get(me))&&Go(t,n.stream,!0,0,!0)),e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),gu(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),hi(e.M,t,Math.min(.5,t/2))),e.i&&wu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function zs(e){return Array.from(e.g.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Xs(e){return Array.from(e.g.textTracks).filter(function(e){return"chapters"==e.kind})}function Ys(t,n){var i,r;return Re(function(e){switch(e.g){case 1:return i=Sr(n),(r=Fu[i])?e.return(r):(Ie(e,2),ke(e,Er(n,t.F,t.h.streaming.retryParameters),4));case 4:r=e.h,Ce(e,3);break;case 2:Me(e);case 3:if(r)return e.return(r);throw new Ne(1,2,2011,i)}})}function $s(a,o,s,u,l,c,d){var h;return Re(function(e){if(1==e.g)return"text/vtt"!=l||d.length?ke(e,Qs(a,o,a.F,a.h.streaming.retryParameters),3):e.A(2);2!=e.g&&(h=e.h,h=Js(a,h,l,d),h=new Blob([h],{type:"text/vtt"}),o=no(h),l="text/vtt"),h=document.createElement("track");var t=a.T,n=o;try{var i,r=t.g.enabled?((i=ps(t)).ot=Es,i.su=!0,vs(n,ms(i))):n}catch(e){Z("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),r=n}return h.src=r,h.label=c,h.kind=u,h.srclang=s,a.g.getAttribute("crossorigin")||a.g.setAttribute("crossorigin","anonymous"),a.g.appendChild(h),e.return(h)})}function Qs(n,i,r,a){var o,s;return Re(function(e){if(1!=e.g)return s=e.h,e.return(s.data);s=Di,(o=Mi([i],a)).method="GET";var t=n.T;try{t.g.enabled&&gs(t,o,{ot:Es,su:!0})}catch(e){Z("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return ke(e,r.request(s,o).promise,2)})}function Js(e,t,n,i){var r=ln[n];if(r){n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=D(t);t=n.parseMedia(t,e);var a=i;function o(e){for(var t=e,n=Se(a),i=n.next();!i.done;i=n.next())(i=i.value).end&&i.start<e&&(t+=i.end-i.start);return((e=Math.floor(t/3600))<10?"0":"")+e+":"+((n=Math.floor(t/60%60))<10?"0":"")+n+":"+((i=Math.floor(t%60))<10?"0":"")+i+"."+((t=Math.floor(1e3*t%1e3))<100?t<10?"00":"0":"")+t}function s(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce(function(e,t){return e+"<"+t+">"},""),t=t.reduceRight(function(e,t){return e+"</"+t+">"},""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(s).join(""):n+e.payload+t}for(var u=t.map(function(e){var t;return e.nestedCues.length?((t=e.clone()).nestedCues=[],t.payload=s(e),t):e}),l="WEBVTT\n\n",c=(u=Se(u)).next();!c.done;c=u.next())l=(l+=o((c=c.value).startTime)+" --\x3e "+o(c.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case ue:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(c)+"\n")+(c.payload+"\n\n");return l}throw new Ne(2,2,2014,n)}function Zs(t){var e=Ns();return e.streaming.failureCallback=function(e){t.V()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,t.Ud())},e.textDisplayFactory=function(){return t.Jc?new us(t.g,t.Jc):new rs(t.g)},e}function eu(i,r){return Re(function(e){if(1==e.g)return ke(e,(t=i,n=r,Re(function(e){if(1==e.g)return ke(e,kn(t.j?t.j.l:null,n),2);Eu(n),Ae(e)})),2);var t,n;tu(i,r),Ae(e)})}function tu(e,t){if(e.l!=Nu){Sn(t.variants,e.h.restrictions,e.$b)&&e.j&&du(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var i=Se(t.variants),r=i.next();!r.done;r=i.next())for(var a=(r=Se(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]))).next();!a.done;a=r.next())if((a=a.value).keySystem==n.keySystem)for(var o=(a=Se(a.initData||[])).next();!o.done;o=a.next())o=o.value,ar(e.m,o.initDataType,o.initData);xu(e,t)}}function nu(e){var t,n=e.yd();e.o&&e.M&&e.C&&((t=e.G).j=n,Mo(t),e.T&&(t=e.T,n||t.i||(t.i=!0),t.i&&n&&(t.l=!0),t.m=n),ru(e)),n=(new Map).set("buffering",n),e.dispatchEvent(Bs("buffering",n))}function iu(e){var t=e.g.playbackRate;0!=t&&(e.G&&e.G.set(t),t=Bs("ratechange"),e.dispatchEvent(t))}function ru(e){var t;e.o&&e.M&&(t=e.o.g,e.M.g==fi?Ls(t,"buffering"):e.g.paused?Ls(t,"paused"):e.g.ended?Ls(t,"ended"):Ls(t,"playing"))}function au(e){try{xu(e,e.i)}catch(t){return mu(e,t),0}var t=e.i.variants.filter(Bn),t=e.La.create(t);return e.u.setVariants(Array.from(t.values())),1}function ou(e){return au(e)?e.u.chooseVariant():null}function su(e){var t=ou(e);t&&uu(e,t,!0,!0,0)}function uu(e,t,n,i,r){var a,o=e.j.l;t==o?i&&Ho(e.j,t,i,r,!0):((a=e.o.h).h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Ho(e.j,t,i,r,void 0,n),i=null,(n?cu:hu)(e,i=o?Dn(o):i,t=Dn(t)))}function lu(e,t){var n=Array.from(e.g.audioTracks).find(function(e){return e.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),hu(e,n=jn(n),jn(t))}function cu(e,t,n){Su(e,t=Bs("adaptation",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function du(e){Su(e,Bs("trackschanged"))}function hu(e,t,n){Su(e,t=Bs("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function fu(e){Su(e,Bs("textchanged"))}function pu(e){Su(e,Bs("texttrackvisibility"))}function gu(e){Su(e,Bs("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function mu(e,t){var n;e.l!=Nu&&(function(e,t){if((1002==t.code||1011==t.code)&&1==t.category&&navigator.onLine){var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return;n=1}for(var i=e.Ya().find(function(e){return e.active}),t=e.i,r=Se(t.variants),a=r.next();!a.done;a=r.next())(a=a.value).id===i.id&&(a.disabledUntilTime=Date.now()/1e3+n);return Sn(t.variants,e.h.restrictions,e.$b),(i=ou(e))&&(t=e.Na().video.reduce(function(e,t){return e+t.end-t.start},0),uu(e,i,!1,!0,t),e.Ge.R(n),1)}}(e,t)||(n=Bs("error",(new Map).set("detail",t)),e.dispatchEvent(n),n.defaultPrevented))&&(t.handled=!0)}function vu(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Bs(t,n))}function yu(e){var t,n;return!e.g.error||1==(t=e.g.error.code)?null:((n=e.g.error.msExtendedCode)&&(n<0&&(n+=Math.pow(2,32)),n=n.toString(16)),new Ne(2,3,3016,t,n,e.g.error.message))}function bu(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=Se(e.i.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=Se(o)).next();!s.done;s=o.next()){var u=s.value,s=a.allowedByKeySystem;if(u.keyIds.size){a.allowedByKeySystem=!0;for(var l=(u=Se(u.keyIds)).next();!l.done;l=u.next())l=l.value,l=t[i?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!Ou.includes(l)}s!=a.allowedByKeySystem&&(r=!0)}}r&&!au(e)||((i=e.j.l)&&!i.allowedByKeySystem&&su(e),r&&du(e))}}function Tu(e,t,n){e.I&&e.I.onExpirationUpdated&&e.I.onExpirationUpdated(t,n),t=Bs("expirationupdated"),e.dispatchEvent(t)}function wu(e,t,n){0<t&&(e.V()||e.Pe(t)),n<(t=e.getDuration())&&(e.V()||e.Ia(n))}function xu(e,t){for(var n=e.m?e.m.Nc():{},i=(i=Object.keys(n)).length&&"00"==i[0],r=!1,a=!1,o=new Set,s=new Set,u=Se(t.variants),l=u.next();!l.done;l=u.next()){var c=[];(l=l.value).audio&&c.push(l.audio),l.video&&c.push(l.video);for(var d=(c=Se(c)).next();!d.done;d=c.next())if((d=d.value).keyIds.size)for(var h=(d=Se(d.keyIds)).next();!h.done;h=d.next()){var h=h.value,f=n[i?"00":h];f?Ou.includes(f)&&s.add(f):o.add(h)}l.allowedByApplication?l.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new Ne(2,4,4012,n={hasAppRestrictions:a,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)})}function Eu(e){if(!e.variants.some(Bn))throw new Ne(2,4,4032)}function Su(t,n){Re(function(e){if(1==e.g)return ke(e,Promise.resolve(),2);t.l!=Nu&&t.dispatchEvent(n),Ae(e)})}function ku(e){for(var t=new Set,n=(e=Se(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(I(n.language)):t.add("und");return t}function Au(e){for(var t=new Map,a=new Map,n=(e=Se(e)).next();!n.done;n=e.next()){var i="und",r=[];(n=n.value).language&&(i=I(n.language)),(r="variant"==n.type?n.audioRoles:n.roles)&&r.length||(r=[""]),t.has(i)||t.set(i,new Set);for(var o=(r=Se(r)).next();!o.done;o=r.next())o=o.value,t.get(i).add(o),n.label&&(a.has(i)||a.set(i,new Map),a.get(i).set(o,n.label))}var s=[];return t.forEach(function(e,t){for(var n=Se(e),i=n.next();!i.done;i=n.next()){var i=i.value,r=null;a.has(t)&&a.get(t).has(i)&&(r=a.get(t).get(i)),s.push({language:t,role:i,label:r})}}),s}function Iu(){return new Ne(2,7,7e3)}function Cu(e,t,n,i,r,a){return i==e&&r.K==a.K&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Mu(){return{K:null,mimeType:null,startTime:null,de:NaN,uri:null}}function Ru(n){return new Promise(function(e,t){n.lb=function(){return t(Iu())},n.Wc=function(){return e()},n.onError=function(e){return t(e)},n.Yc=function(){return t(Iu())}})}t("shaka.util.CmcdManager.StreamingFormat",{xg:"d",Fg:"h",Pg:"s",Lg:"o"}),t("shaka.util.ConfigUtils",Is),Is.convertToConfigObject=Ms,Is.mergeConfigObjects=Cs,t("shaka.util.PlayerConfiguration",Rs),Rs.mergeConfigObjects=Ds,Rs.createDefault=Ns,T(i,h),(n=i.prototype).destroy=function(){var t,n=this;return Re(function(e){switch(e.g){case 1:return n.l==Nu?e.return():(n.l=Nu,t=ns(n.va,function(){return{node:n.O,payload:Mu(),hb:!1}}),ke(e,new Promise(function(e){t.Hb=function(){},t.Wc=function(){e()},t.lb=function(){e()},t.onError=function(){e()},t.Yc=function(){e()}}),2));case 2:return ke(e,n.va.destroy(),3);case 3:if(n.Rc&&(n.Rc.release(),n.Rc=null),n.Wb&&(n.Wb.release(),n.Wb=null),n.s&&(n.s.release(),n.s=null),n.Bd=null,n.u=null,n.h=null,n.o=null,n.Jc=null,n.T=null,n.F)return ke(e,n.F.destroy(),5);e.A(4);break;case 5:n.F=null;case 4:h.prototype.release.call(n),Ae(e)}})},n.Yb=function(e,t){var n,i;return t=void 0===t||t,this.l==Nu?Promise.reject(Iu()):((n=Mu()).K=e,i=(t=Et()?t:!1)?this.ub:this.Y,(e=ns(this.va,function(){return{node:i,payload:n,hb:!1}})).Hb=function(){},Ru(e))},n.detach=function(){var e,t=this;return this.l==Nu?Promise.reject(Iu()):((e=ns(this.va,function(){return{node:t.O,payload:Mu(),hb:!1}})).Hb=function(){},Ru(e))},n.ge=function(n){var i=this;if(n=void 0===n||n,this.l==Nu)return Promise.reject(Iu());Et()||(n=!1);var r=Mu(),e=ns(this.va,function(e){var t=e.K&&n?i.ub:e.K?i.Y:i.O;return r.K=e.K,{node:t,payload:r,hb:!1}});return e.Hb=function(){},Ru(e)},n.rg=function(e){this.cc=e},n.load=function(e,t,n){var i=this;if(this.cc=null,this.l==Nu)return Promise.reject(Iu());this.dispatchEvent(Bs("loading"));var r,a=Mu(),o=(a.uri=e,a.de=Date.now()/1e3,n&&(a.mimeType=n),void 0!==t&&(a.startTime=t),function(e,t){if(!Et())return 1;var n=t.mimeType,i=t.uri||"";if(n||(n=Sr(i),n=Bu[n]),n){if(""==(t.K||Nt()).canPlayType(n))return;if(!Et()||!(n in kr)&&!(Sr(i)in Ar)||e.h.streaming.preferNativeHls)return 1;if(Ct())return e.h.streaming.useNativeHlsOnSafari}}(this,a)?this.wb:this.ca),s=ns(this.va,function(e){return null==e.K?null:(a.K=e.K,{node:o,payload:a,hb:!0})});return this.o=new Us,this.T=new hs({getBandwidthEstimate:function(){return r.u?r.u.getBandwidthEstimate():NaN},Na:function(){return r.Na()},getCurrentTime:function(){return r.g?r.g.currentTime:0},Ya:function(){return r.Ya()},Oc:function(){return r.Oc()},V:function(){return r.V()}},(r=this).h.cmcd),s.Hb=function(){},new Promise(function(e,t){s.Yc=function(){return t(new Ne(2,7,7002))},s.Wc=function(){e(),i.dispatchEvent(Bs("loaded"))},s.lb=function(){return t(Iu())},s.onError=function(e){return t(e)}})},n.configure=function(e,t){(e=2==arguments.length&&"string"==typeof e?Ms(e,t):e).streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal)&&(e.streaming.rebufferingGoal=.01);var n=Ds(this.h,e,Zs(this));return Ws(this),n},n.getConfiguration=function(){var e=Zs(this);return Ds(e,this.h,Zs(this)),e},n.mf=function(){if(this.g){var e=(e=this.g.buffered.length)?this.g.buffered.end(e-1):0,t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.sc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},n.cg=function(){for(var e in this.h)delete this.h[e];Ds(this.h,Zs(this),Zs(this)),Ws(this)},n.uf=function(){return this.l},n.yf=function(){return this.g},n.fc=function(){return this.F},n.xd=function(){return this.Vb},n.ve=function(){return this.D||null},n.V=function(){return this.i?this.i.presentationTimeline.V():!(!this.g||!this.g.src)&&1/0==this.g.duration},n.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},n.Lf=function(){var e;return this.i?!!(e=this.i.variants).length&&!e[0].video:!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},n.sc=function(){var e;return this.i?{start:(e=this.i.presentationTimeline).Bb(),end:e.Oa()}:this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},n.Jf=function(){this.V()&&(this.g.currentTime=this.sc().end)},n.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},n.drmInfo=function(){return this.m?this.m.g:null},n.ec=function(){return this.m?this.m.ec():1/0},n.Nc=function(){return this.m?this.m.Nc():{}},n.yd=function(){return!!this.M&&this.M.g==fi},n.Oc=function(){return this.g?this.G?this.G.i:1:0},n.mg=function(e){0==e?J("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.G.set(e),this.l==_u&&(this.u.playbackRateChanged(e),Vo(this.j,1<Math.abs(e))))},n.bf=function(){var e=this.G.Mc();this.l==Lu&&this.G.set(e),this.l==_u&&(this.G.set(e),this.u.playbackRateChanged(e),Vo(this.j,!1))},n.Ya=function(){if(this.i){for(var e,t=this.j?this.j.l:null,n=[],i=0,r=Se(this.i.variants),a=r.next();!a.done;a=r.next())Bn(a=a.value)&&((e=Dn(a)).active=a==t,e.active||1==i||null==t||a.video!=t.video||a.audio!=t.audio||(e.active=!0),e.active&&i++,n.push(e));return n}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(jn):[]},n.Db=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=Se(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=_n(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?zs(this).map(On):[]},n.rf=function(){return this.i?this.i.imageStreams.map(Ln):[]},n.Ff=function(t,n){var i,r,a,o,s,u,l,c,d,h,f,p,g=this;return Re(function(e){return 1==e.g?g.i?(i=g.i.imageStreams.find(function(e){return e.id==t}))?i.segmentIndex?e.A(3):ke(e,i.createSegmentIndex(),3):e.return(null):e.A(2):2!=e.g&&null!=(r=i.segmentIndex.find(n))&&(r=i.segmentIndex.get(r),p=r.tilesLayout||i.tilesLayout,p=/(\d+)x(\d+)/.exec(p))?(a=i.width||0,o=i.height||0,s=parseInt(p[1],10),p=parseInt(p[2],10),u=a/s,l=o/p,p=s*p,c=r.j-r.startTime,c=r.m||c/p,d=r.startTime,f=h=0,1<p&&(p=Math.floor((n-r.startTime)/c),d=r.startTime+p*c,h=p%s*u,f=Math.floor(p/s)*l),e.return({imageHeight:o,imageWidth:a,height:l,positionX:h,positionY:f,startTime:d,duration:c,uris:r.ya(),width:u})):e.return(null)})},n.Le=function(t){if(this.i&&this.j){var e=this.i.textStreams.find(function(e){return e.id==t.id});e&&e!=this.j.o&&(js(this.o.h,e,!1),Ko(this.j,e),fu(this),this.sb=e.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(e=Se(e=zs(this))).next();!n.done;n=e.next())Pn(n=n.value)==t.id?n.mode=this.ha?"showing":"hidden":n.mode="disabled";fu(this)}},n.Me=function(t,e,n){if(e=void 0!==e&&e,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&J("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find(function(e){return e.id==t.id});i&&Bn(i)&&(uu(this,i,!1,e,n),this.La=new li(i),au(this))}else if(this.g&&this.g.audioTracks)for(n=(e=Se(e=Array.from(this.g.audioTracks))).next();!n.done;n=e.next())if(Pn(n=n.value)==t.id){lu(this,n);break}},n.lf=function(){return Au(this.Ya())},n.Ef=function(){return Au(this.Db())},n.kf=function(){return Array.from(ku(this.Ya()))},n.Df=function(){return Array.from(ku(this.Db()))},n.Xd=function(e,t){if(this.i&&this.C){this.La=new ci(e,t||"",0,"");for(var n=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},i=this.j.l,r=this.La.create(this.i.variants),a=null,o=(r=Se(r.values())).next();!o.done;o=r.next())o=o.value,(!a||n(a,i)>n(o,i))&&(a=o);a?(n=Dn(a),this.Me(n,!0)):su(this)}else if(this.g&&this.g.audioTracks){for(r=Array.from(this.g.audioTracks),n=I(e),a=i=null,o=(r=Se(r)).next();!o.done;o=r.next()){var s=jn(o=o.value);I(s.language)==n&&(i=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o))}a?lu(this,a):i&&lu(this,i)}},n.Yd=function(e,t,n){var i;n=void 0!==n&&n,this.i&&this.C?(this.sb=e,this.Zb=t||"",this.Xb=n,(e=Vn(this.i.textStreams,this.sb,this.Zb,this.Xb)[0]||null)&&e!=this.j.o&&(js(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.zd())&&(Ko(this.j,e),fu(this))):(i=I(e),(e=this.Db().find(function(e){return I(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n}))&&this.Le(e))},n.eg=function(e){if(this.i&&this.C){for(var t=null,n=Se(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.La=new ci(t.language,"",0,e),su(this))}},n.zd=function(){var e=this.ha;return this.L?this.L.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?zs(this).some(function(e){return"showing"==e.mode}):e},n.we=function(){return this.g&&this.g.src&&this.g.textTracks?Xs(this).map(On):[]},n.nf=function(e){var t=I(e),n=Xs(this).filter(function(e){return I(e.language)==t});if(!n||!n.length)return[];e=[];for(var i=(n=Se(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var r=(i=Se(i.cues)).next();!r.done;r=i.next()){var a=(r=r.value).id;a&&""!=a||(a=r.startTime+"-"+r.endTime+"-"+r.text),e.push({id:a,title:r.text,startTime:r.startTime,endTime:r.endTime})}return e},n.kg=function(e){if(this.ha!=(e=!!e)){if(this.ha=e,this.l==_u)this.L.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Vn(this.i.textStreams,this.sb,this.Zb,this.Xb)).length&&(Ko(this.j,e[0]),fu(this)):(i=this.j,(r=i.i.get(me))&&(Jo(r),Zo(r).catch(function(){}),i.i.delete(me)),i.o=null));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=zs(this),n=(t=Se(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");pu(this)}var i,r},n.Bf=function(){if(!this.V())return null;var e=this.va.l,t=0;if(this.C)t=this.C.Ec();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.l+t)):!this.g||!this.g.getStartDate||(e=this.g.getStartDate(),isNaN(e.getTime()))?null:new Date(e.getTime()+1e3*t)},n.xe=function(){var e;return this.V()?this.i?new Date(1e3*this.i.presentationTimeline.l):!this.g||!this.g.getStartDate||(e=this.g.getStartDate(),isNaN(e.getTime()))?null:e:null},n.Na=function(){var e;return this.l==_u?this.L.Na():(e={total:[],audio:[],video:[],text:[]},this.l==Lu&&(e.total=Fa(this.g.buffered)),e)},n.getStats=function(){if(this.l!=_u&&this.l!=Lu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};ru(this);var e=(n=this.g).currentTime/n.duration,t=(isNaN(e)||(i=this.o,e=Math.round(100*e),i.i=isNaN(i.i)?e:Math.max(i.i,e)),this.C&&(this.o.O=this.C.ie(),this.o.T=this.C.je()),n.getVideoPlaybackQuality&&(i=n.getVideoPlaybackQuality(),e=this.o,r=Number(i.totalVideoFrames),e.M=Number(i.droppedVideoFrames),e.L=r,this.o.I=Number(i.corruptedVideoFrames)),i=this.m&&(i=this.m).I?i.I:NaN,this.o.s=i,this.l==_u&&((i=this.j.l)&&(this.o.C=(this.G?this.G.i:1)*i.bandwidth),i&&i.video&&(e=this.o,r=i.video.height||NaN,e.o=i.video.width||NaN,e.l=r),this.V()&&(i=this.xe().valueOf()+1e3*this.sc().end,this.o.D=(Date.now()-i)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),i=this.u.getBandwidthEstimate(),this.o.u=i),this.l==Lu&&(i=this.o,e=n.videoHeight||NaN,i.o=n.videoWidth||NaN,i.l=e),this.o),n=t.o,i=t.l;e=t.C;for(var r=t.L,a=t.M,o=t.I,s=t.T,u=t.O,l=t.u,c=t.i,d=t.m,h=t.F,f=t.j,p=Ps(t.g,"playing"),g=Ps(t.g,"paused"),m=Ps(t.g,"buffering"),v=t.s,y=t.D,b=t.G,T=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=Se(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(t.g),w=[],x=(t=Se(t.h.g)).next();!x.done;x=t.next())x=x.value,w.push({timestamp:x.timestamp,id:x.id,type:x.type,fromAdaptation:x.fromAdaptation,bandwidth:x.bandwidth});return{width:n,height:i,streamBandwidth:e,decodedFrames:r,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:c,loadLatency:d,manifestTimeSeconds:h,drmTimeSeconds:f,playTime:p,pauseTime:g,bufferingTime:m,licenseTime:v,liveLatency:y,maxSegmentDuration:b,stateHistory:T,switchHistory:w}},n.Ye=function(t,n,i,r,a,o,s){s=void 0!==s&&s;var u,l,c,d,h,f=this;return Re(function(e){switch(e.g){case 1:if(f.l!=_u&&f.l!=Lu)throw new Ne(1,7,7004);if(r){e.A(2);break}return ke(e,Ys(f,t),3);case 3:r=e.h;case 2:if(u=[],f.D)try{u=f.D.getServerSideCuePoints()}catch(e){}if(f.l==Lu)return ke(e,$s(f,t,n,i=s?"forced":i,r,o||"",u),5);e.A(4);break;case 5:if(d=f.Db(),d=d.find(function(e){return e.language==n&&e.label==(o||"")&&e.kind==i}))return du(f),e.return(d);throw new Ne(1,2,2012);case 4:if(l=bt,1/0==(c=f.i.presentationTimeline.getDuration()))throw new Ne(1,4,4033);if(u.length)return ke(e,Qs(f,t,f.F,f.h.streaming.retryParameters),7);e.A(6);break;case 7:d=e.h,h=Js(f,d,r,u),h=new Blob([h],{type:"text/vtt"}),t=no(h),r="text/vtt";case 6:if(h={id:f.He++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ko(0,c,[t]),mimeType:r||"",codecs:a||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:n,label:o||null,type:l.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},on(Zt(h.mimeType,h.codecs)))return f.i.textStreams.push(h),du(f),e.return(_n(h));throw new Ne(2,2,2014,r)}})},n.Xe=function(t,n,i){var r,a,o,s=this;return Re(function(e){switch(e.g){case 1:if(s.l!=_u&&s.l!=Lu)throw new Ne(1,7,7004);if(i){e.A(2);break}return ke(e,Ys(s,t),3);case 3:i=e.h;case 2:if(a=[],s.D)try{a=s.D.getServerSideCuePoints()}catch(e){}return ke(e,$s(s,t,n,"chapters",i,"",a),4);case 4:if(r=e.h,a=s.we(),o=a.find(function(e){return e.language==n}))return ke(e,new Promise(function(e,t){s.s.oa(r,"load",e),s.s.oa(r,"error",function(){t(new Ne(1,2,2015))})}),6);e.A(5);break;case 6:return e.return(o);case 5:throw new Ne(1,2,2012)}})},n.ae=function(e,t){this.$b.width=e,this.$b.height=t},n.Ud=function(){if(this.l==_u){var e=this.j;if(e.h.g)e=!1;else if(e.s)e=!1;else{for(var t=Se(e.i.values()),n=t.next();!n.done;n=t.next())(n=n.value).jc&&(n.jc=!1,Qo(e,n,.1));e=!0}}else e=!1;return e},n.vf=function(){return J("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},n.wf=function(){return this.Sc},n.Qe=function(e){this.Jc=e},t("shaka.Player",i),i.prototype.setVideoContainer=i.prototype.Qe,i.prototype.getManifestParserFactory=i.prototype.wf,i.prototype.getManifest=i.prototype.vf,i.prototype.retryStreaming=i.prototype.Ud,i.prototype.setMaxHardwareResolution=i.prototype.ae,i.prototype.addChaptersTrack=i.prototype.Xe,i.prototype.addTextTrackAsync=i.prototype.Ye,i.prototype.getBufferedInfo=i.prototype.Na,i.prototype.getPresentationStartTimeAsDate=i.prototype.xe,i.prototype.getPlayheadTimeAsDate=i.prototype.Bf,i.prototype.setTextTrackVisibility=i.prototype.kg,i.prototype.getChapters=i.prototype.nf,i.prototype.getChaptersTracks=i.prototype.we,i.prototype.isTextTrackVisible=i.prototype.zd,i.prototype.selectVariantsByLabel=i.prototype.eg,i.prototype.selectTextLanguage=i.prototype.Yd,i.prototype.selectAudioLanguage=i.prototype.Xd,i.prototype.getTextLanguages=i.prototype.Df,i.prototype.getAudioLanguages=i.prototype.kf,i.prototype.getTextLanguagesAndRoles=i.prototype.Ef,i.prototype.getAudioLanguagesAndRoles=i.prototype.lf,i.prototype.selectVariantTrack=i.prototype.Me,i.prototype.selectTextTrack=i.prototype.Le,i.prototype.getThumbnails=i.prototype.Ff,i.prototype.getImageTracks=i.prototype.rf,i.prototype.getTextTracks=i.prototype.Db,i.prototype.getVariantTracks=i.prototype.Ya,i.prototype.cancelTrickPlay=i.prototype.bf,i.prototype.trickPlay=i.prototype.mg,i.prototype.getPlaybackRate=i.prototype.Oc,i.prototype.isBuffering=i.prototype.yd,i.prototype.getKeyStatuses=i.prototype.Nc,i.prototype.getExpiration=i.prototype.ec,i.prototype.goToLive=i.prototype.Jf,i.prototype.seekRange=i.prototype.sc,i.prototype.isAudioOnly=i.prototype.Lf,i.prototype.isInProgress=i.prototype.jb,i.prototype.isLive=i.prototype.V,i.prototype.getAdManager=i.prototype.ve,i.prototype.getAssetUri=i.prototype.xd,i.prototype.getNetworkingEngine=i.prototype.fc,i.prototype.getMediaElement=i.prototype.yf,i.prototype.getLoadMode=i.prototype.uf,i.prototype.resetConfiguration=i.prototype.cg,i.prototype.getBufferFullness=i.prototype.mf,i.prototype.updateStartTime=i.prototype.rg,i.prototype.unload=i.prototype.ge,i.prototype.attach=i.prototype.Yb,i.probeSupport=function(c){var d,h,f,p,g;return c=void 0===c||c,Re(function(e){if(1==e.g)return d={},c?ke(e,Re(function(e){return 1==e.g?(n="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),r=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],a=new Map,t=function(t){var n,i;return Re(function(e){switch(e.g){case 1:if(Ie(e,2),"org.w3.clearkey"===t&&Rt())throw Error("Unsupported keySystem");return ke(e,navigator.requestMediaKeySystemAccess(t,r),4);case 4:return n=e.h,i=!!(i=n.getConfiguration().sessionTypes)&&i.includes("persistent-license"),m("Tizen 3")&&(i=!1),a.set(t,{persistentState:i}),ke(e,n.createMediaKeys(),5);case 5:Ce(e,0);break;case 2:Me(e),a.set(t,null),Ae(e)}})},n=n.map(t),ke(e,Promise.all(n),2)):e.return(Fi(a))}),3):e.A(2);2!=e.g&&(d=e.h);var r,a,t,n,i={};if(Et()){for(var o in kr)i[o]=!0;for(var s in Ar)i[s]=!0}for(var u,o={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},l=(s=Se(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!l.done;l=s.next())i[l=l.value]=Et()?!!kr[l]:St(l);for(u in o)i[u]=Et()?!!Ar[u]:St(o[u]);for(h=i,i={},o=(u=Se(u='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(te(ro)))).next();!o.done;o=u.next())i[o=o.value]=Et()?!!on(o)||MediaSource.isTypeSupported(o)||Yt(o):St(o),i[s=o.split(";")[0]]=i[s]||i[o];for(g in f={manifest:h,media:i,drm:d},p=ju)f[g]=p[g]();return e.return(f)})},i.isBrowserSupported=function(){var e;return N.Promise||J("A Promise implementation or polyfill is required"),!(!(N.Promise&&N.Uint8Array&&Array.prototype.forEach)||m("Trident/")||(e=Rt())&&e<13||!(N.MediaKeys&&N.navigator&&N.navigator.requestMediaKeySystemAccess&&N.MediaKeySystemAccess&&N.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Et()||St("application/x-mpegurl"))},i.setAdManagerFactory=function(e){Uu=e},i.registerSupportPlugin=function(e,t){ju[e]=t};var Nu=0,Du=1,_u=2,Lu=3,Pu=(i.LoadMode={DESTROYED:Nu,NOT_LOADED:Du,MEDIA_SOURCE:_u,SRC_EQUALS:Lu},i.version="v4.2.2",["4","2"]),ri=new function(e){this.g=e,this.i=ni,this.h=ii}(new ti(Number(Pu[0]),Number(Pu[1]))),Ou=["output-restricted","internal-error"],ju={},Uu=null,Bu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Fu={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Vu(){this.h=[],this.j=this.i=this.g=0}function Hu(e,t,n){var i=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new f,this.j.B(this.g,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.j.B(this.g,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}function Ku(e,t,n,i){var s=this;this.o=e,this.i=t,this.s=null,this.u=NaN,this.l=i,this.j=null,this.h=new f,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(e),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.2.2"),this.g=null,this.h.oa(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){var t=s;t.l(new ve("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=e.getAdsManager(t.i),t.l(new ve("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var n,i=t.g.getCuePoints();if(i.length){for(var r=[],a=(i=Se(i)).next();!a.done;a=i.next())r.push({start:a.value,end:null});t.l(new ve("ad-cue-points-changed",(new Map).set("cuepoints",r)))}function o(e,t){e=(new Map).set("originalEvent",e);n.l(new ve(t,e))}(n=t).h.B(n.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Gu(n,e)}),n.h.B(n.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){Wu(n,e)}),n.h.B(n.g,google.ima.AdEvent.Type.STARTED,function(e){Wu(n,e)}),n.h.B(n.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){o(e,"ad-first-quartile")}),n.h.B(n.g,google.ima.AdEvent.Type.MIDPOINT,function(e){o(e,"ad-midpoint")}),n.h.B(n.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){o(e,"ad-third-quartile")}),n.h.B(n.g,google.ima.AdEvent.Type.COMPLETE,function(e){o(e,"ad-complete")}),n.h.B(n.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){zu(n,e)}),n.h.B(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){zu(n,e)}),n.h.B(n.g,google.ima.AdEvent.Type.SKIPPED,function(e){o(e,"ad-skipped")}),n.h.B(n.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){o(e,"ad-volume-changed")}),n.h.B(n.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){o(e,"ad-muted")}),n.h.B(n.g,google.ima.AdEvent.Type.PAUSED,function(e){n.j.i=!0,o(e,"ad-paused")}),n.h.B(n.g,google.ima.AdEvent.Type.RESUMED,function(e){n.j.i=!1,o(e,"ad-resumed")}),n.h.B(n.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(e){o(e,"ad-skip-state-changed")}),n.h.B(n.g,google.ima.AdEvent.Type.CLICK,function(e){o(e,"ad-clicked")}),n.h.B(n.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){o(e,"ad-progress")}),n.h.B(n.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){o(e,"ad-buffering")}),n.h.B(n.g,google.ima.AdEvent.Type.IMPRESSION,function(e){o(e,"ad-impression")}),n.h.B(n.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){o(e,"ad-duration-changed")}),n.h.B(n.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){o(e,"ad-closed")}),n.h.B(n.g,google.ima.AdEvent.Type.LOADED,function(e){o(e,"ad-loaded")}),n.h.B(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){o(e,"all-ads-completed")}),n.h.B(n.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){o(e,"ad-linear-changed")}),n.h.B(n.g,google.ima.AdEvent.Type.AD_METADATA,function(e){o(e,"ad-metadata")}),n.h.B(n.g,google.ima.AdEvent.Type.LOG,function(e){o(e,"ad-recoverable-error")}),n.h.B(n.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){o(e,"ad-break-ready")}),n.h.B(n.g,google.ima.AdEvent.Type.INTERACTION,function(e){o(e,"ad-interaction")});try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,qu(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.B(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,qu(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in N?(t.s=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,qu(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.s.observe(t.i)):t.h.B(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,qu(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.g.start()}catch(e){zu(t,null)}}),this.h.B(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Gu(s,e)}),this.i.onended=function(){s.m.contentComplete()}}function Gu(e,t){t.getError(),zu(e,null),e.l(new ve("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function qu(e){return document.fullscreenEnabled?document.fullscreenElement:(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function Wu(e,t){var n=t.getAd();e.j=new Hu(n,e.g,e.i),n=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new ve("ad-started",n)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())}function zu(e,t){e.l(new ve("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function Xu(e,t){this.i=e,this.h=null,this.g=t}function Yu(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.C="",this.D=[],this.h=new f,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new ve("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){var n=r;n.i(new ve("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-n.G))),e=e.getStreamData().url,n.j.resolve(e),n.j=null,n.F||n.h.B(n.l,"seeked",function(){var e,t=n.l.currentTime;0!=t&&(n.g.streamTimeForContentTime(t),e=n.g.previousCuePointForStreamTime(t))&&!e.played&&(n.o=t,n.l.currentTime=e.start)})}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),r.m=new Xu(e,r.l),r.u&&(r.m.h=r.u),r.i(new ve("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new ve("ad-first-quartile"))}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new ve("ad-midpoint"))}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new ve("ad-third-quartile"))}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new ve("ad-complete")),r.i(new ve("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new ve("ad-skipped")),r.i(new ve("ad-stopped"))}),this.h.B(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=Se(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new ve("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function r(){h.call(this),this.g=this.i=null,this.h=new Vu,this.j=navigator.language}function $u(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ve){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=Se(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=Se(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=Se(Fa(t))).next();!i.done;i=n.next()){var a=(i=i.value).end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return r}})}function Qu(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n={length:(a=t).length,start:function(e){return a.start[e]},end:function(e){return a.end[e]}};else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){var i,n=t.contents,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;var a;return n})}(n=Hu.prototype).getDuration=function(){return this.h.getDuration()},n.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},n.getRemainingTime=function(){return this.g.getRemainingTime()},n.isPaused=function(){return this.i},n.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},n.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset(),e=this.getRemainingTime()-e;return Math.max(e,0)},n.canSkipNow=function(){return this.g.getAdSkippableState()},n.skip=function(){return this.g.skip()},n.pause=function(){return this.g.pause()},n.play=function(){return this.g.resume()},n.getVolume=function(){return this.g.getVolume()},n.setVolume=function(e){return this.g.setVolume(e)},n.isMuted=function(){return 0==this.g.getVolume()},n.isLinear=function(){return this.h.isLinear()},n.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},n.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},n.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},n.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},n.release=function(){this.g=this.h=null},t("shaka.ads.ClientSideAd",Hu),Ku.prototype.stop=function(){this.g&&this.g.stop(),this.o&&ss(this.o)},Ku.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(n=Xu.prototype).getDuration=function(){return this.h?this.h.duration:-1},n.getMinSuggestedDuration=function(){return this.getDuration()},n.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},n.isPaused=function(){return this.g.paused},n.isSkippable=function(){return this.i.isSkippable()},n.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset(),e=this.getRemainingTime()-e;return Math.max(e,0)},n.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},n.skip=function(){this.g.currentTime+=this.getRemainingTime()},n.pause=function(){return this.g.pause()},n.play=function(){return this.g.play()},n.getVolume=function(){return this.g.volume},n.setVolume=function(e){this.g.volume=e},n.isMuted=function(){return this.g.muted},n.isLinear=function(){return!0},n.resize=function(){},n.setMuted=function(e){this.g.muted=e},n.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},n.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},n.release=function(){this.g=this.h=this.i=null},t("shaka.ads.ServerSideAd",Xu),Yu.prototype.stop=function(){this.C="",this.o=null,this.D=[]},Yu.prototype.release=function(){this.stop(),this.h&&this.h.release()},Yu.prototype.onCueMetadataChange=function(e){var t;e.key&&e.data&&((t={})[e.key]=e.data,this.g.onTimedMetadata(t))},T(r,h),(n=r.prototype).setLocale=function(e){this.j=e},n.initClientSide=function(e,t){var n=this;if(!N.google||!google.ima||!google.ima.AdsLoader)throw new Ne(2,10,1e4);this.i&&this.i.release(),this.i=new Ku(e,t,this.j,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":n.h.h.push(e.loadTime);break;case"ad-started":n.h.g++;break;case"ad-complete":n.h.i++;break;case"ad-skipped":n.h.j++}n.dispatchEvent(e)})},n.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),h.prototype.release.call(this)},n.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new ve("ad-stopped")),this.h=new Vu},n.requestClientSideAds=function(e){if(!this.i)throw new Ne(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},n.initServerSide=function(e,t){var n=this;if(!N.google||!google.ima||!google.ima.dai)throw new Ne(2,10,10002);this.g&&this.g.release(),this.g=new Yu(e,t,this.j,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":n.h.h.push(e.loadTime);break;case"ad-started":n.h.g++;break;case"ad-complete":n.h.i++;break;case"ad-skipped":n.h.j++}n.dispatchEvent(e)})},n.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Ne(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.2.2";return n=(n=this.g).j?Promise.reject(new Ne(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new R,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,n.j)},n.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Ne(1,10,10003);(e.mpt||e.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.2.2",this.g.g.replaceAdTagParameters(e)},n.getServerSideCuePoints=function(){if(this.g)return this.g.D;throw new Ne(1,10,10003)},n.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},n.onDashTimedMetadata=function(e){var t,n;this.g&&"urn:google:dai:2018"==e.schemeIdUri&&(t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null,this.g.g.processMetadata(t,n,e.startTime))},n.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},n.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},t("shaka.ads.AdManager",r),r.ADS_LOADED="ads-loaded",r.AD_STARTED="ad-started",r.AD_FIRST_QUARTILE="ad-first-quartile",r.AD_MIDPOINT="ad-midpoint",r.AD_THIRD_QUARTILE="ad-third-quartile",r.AD_COMPLETE="ad-complete",r.AD_STOPPED="ad-stopped",r.AD_SKIPPED="ad-skipped",r.AD_VOLUME_CHANGED="ad-volume-changed",r.AD_MUTED="ad-muted",r.AD_PAUSED="ad-paused",r.AD_RESUMED="ad-resumed",r.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",r.CUEPOINTS_CHANGED="ad-cue-points-changed",r.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",r.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",r.AD_CLICKED="ad-clicked",r.AD_PROGRESS="ad-progress",r.AD_BUFFERING="ad-buffering",r.AD_IMPRESSION="ad-impression",r.AD_DURATION_CHANGED="ad-duration-changed",r.AD_CLOSED="ad-closed",r.AD_LOADED="ad-loaded",r.ALL_ADS_COMPLETED="all-ads-completed",r.AD_LINEAR_CHANGED="ad-linear-changed",r.AD_METADATA="ad-metadata",r.AD_RECOVERABLE_ERROR="ad-recoverable-error",r.AD_BREAK_READY="ad-break-ready",r.AD_INTERACTION="ad-interaction";var Uu=function(){return new r},Ju="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Zu="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),el=["loop","playbackRate"],tl=["pause","play"],nl={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},il={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},rl=[["getConfiguration","configure"]],al=[["isTextTrackVisible","setTextTrackVisibility"]],ol="addChaptersTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),sl=["attach","detach","load","unload"];function ul(e,t,n,i,r,a,o){var s=this;this.G=e,this.O=o,this.j=new A(t),this.T=n,this.u=!1,this.s=i,this.F=r,this.L=a,this.h=this.m=!1,this.M="",this.o=null,this.C=function(){return fl(s)},this.D=function(e,t){switch((i=Qu(t)).type){case"event":var n=i.targetName,i=xi(i.event);s.s(n,i);break;case"update":for(var r in n=i.update)for(var a in i=s.g[r]||{},n[r])i[a]=n[r][a];s.u&&(s.T(),s.u=!1);break;case"asyncComplete":if(r=i.id,i=i.error,a=s.i[r],delete s.i[r],a)if(i){for(n in r=new Ne(i.severity,i.category,i.code),i)r[n]=i[n];a.reject(r)}else a.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,Tl.add(this)}function ll(e,t,n){(yl=n).addUpdateListener(e.C),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),fl(e),gl(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function cl(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Ne(2,8,n,t))}function dl(e,t){var n=e.L();e.l=new R,e.u=!0,ll(e,n,t)}function hl(e){var t=yl;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function fl(e){var t=!!yl&&"connected"==yl.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};pl(e)}e.h=t,e.M=t?yl.receiver.friendlyName:"",e.j.Lb()}function pl(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Ne(1,7,7e3))}}function gl(e,t){var n=$u(t),i=yl;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},ee)}catch(t){throw n=new Ne(2,8,8005,t),i=new ve("error",(new Map).set("detail",n)),e.s("player",i),e.yb(),n}}(n=ul.prototype).destroy=function(){return Tl.delete(this),pl(this),yl&&hl(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.C=this.l=this.i=this.g=this.o=null,Promise.resolve()},n.sa=function(){return this.h},n.Sd=function(){return this.M},n.init=function(){var e;this.G.length&&(N.chrome&&chrome.cast&&chrome.cast.isAvailable?(this.m=!0,this.j.Lb(),e=new chrome.cast.SessionRequest(this.G,[],null,this.O,null),e=new chrome.cast.ApiConfig(e,function(e){for(var t=Se(Tl),n=t.next();!n.done;n=t.next())dl(n.value,e)},function(e){for(var t=Se(Tl),n=t.next();!n.done;n=t.next())n=n.value,vl="available"==e,n.j.Lb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),vl&&this.j.R(ml),(e=yl)&&e.status!=chrome.cast.SessionStatus.STOPPED?dl(this,e):yl=null):N.__onGCastApiAvailable!==wl&&(bl=N.__onGCastApiAvailable||null,N.__onGCastApiAvailable=wl))},n.Zd=function(e){this.o=e,this.h&&gl(this,{type:"appData",appData:this.o})},n.cast=function(t){var n=this;return Re(function(e){if(!n.m)throw new Ne(1,8,8e3);if(!vl)throw new Ne(1,8,8001);if(n.h)throw new Ne(1,8,8002);return n.l=new R,chrome.cast.requestSession(function(e){return ll(n,t,e)},function(e){return cl(n,e)}),ke(e,n.l,0)})},n.yb=function(){if(this.h){if(pl(this),yl){hl(this);try{yl.stop(function(){},function(){})}catch(e){}yl=null}fl(this)}},n.get=function(e,t){var n=this;if("video"==e){if(tl.includes(t))return function(){return n.Je.apply(n,[e,t].concat(te(V.apply(0,arguments))))}}else if("player"==e){if(il[t]&&!this.get("player","isLive")())return function(){};if(ol.includes(t))return function(){return n.Je.apply(n,[e,t].concat(te(V.apply(0,arguments))))};if(sl.includes(t))return function(){return n.$f.apply(n,[e,t].concat(te(V.apply(0,arguments))))};if(nl[t])return function(){return n.g[e][t]}}return this.g[e][t]},n.set=function(e,t,n){this.g[e][t]=n,gl(this,{type:"set",targetName:e,property:t,value:n})},n.Je=function(e,t){gl(this,{type:"call",targetName:e,methodName:t,args:V.apply(2,arguments)})},n.$f=function(e,t){var n=V.apply(2,arguments),i=new R,r=this.I.toString();this.I++,this.i[r]=i;try{gl(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var ml=.02,vl=!1,yl=null,bl=null,Tl=new Set;function wl(e){if(bl?N.__onGCastApiAvailable=bl:delete N.__onGCastApiAvailable,bl=null,e)for(var t=Se(Tl),n=t.next();!n.done;n=t.next())n.value.init();"function"==typeof N.__onGCastApiAvailable&&N.__onGCastApiAvailable(e)}function xl(e,t,n,i){i=void 0!==i&&i,h.call(this);var r=this,a=(this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.C=i,this.u=new Map,this.g=new ul(n,function(){return kl(r)},function(){return Al(r)},function(e,t){return Cl(r,e,t)},function(){return Il(r)},function(){return Sl(r)},i),this);a.g.init(),a.m=new f;for(var o,s,u,l,c=Se(Ju),d=c.next();!d.done;d=c.next())a.m.B(a.i,d.value,function(e){a.g.sa()||(e=xi(e),a.j.dispatchEvent(e))});for(o in Ei)a.m.B(a.h,Ei[o],function(e){a.g.sa()||a.o.dispatchEvent(e)});for(s in a.l={},c={},a.i)c.Qb=s,Object.defineProperty(a.l,c.Qb,{configurable:!1,enumerable:!0,get:function(n){return function(){var i=a,e=n.Qb;if("addEventListener"==e)return function(e,t,n){return i.j.addEventListener(e,t,n)};if("removeEventListener"==e)return function(e,t,n){return i.j.removeEventListener(e,t,n)};if(i.g.sa()&&0==Object.keys(i.g.g.video).length){var t=i.i[e];if("function"!=typeof t)return t}return i.g.sa()?i.g.get("video",e):t="function"==typeof(t=i.i[e])?t.bind(i.i):t}}(c),set:function(n){return function(e){var t=n.Qb;a.g.sa()?a.g.set("video",t,e):a.i[t]=e}}(c)}),c={Qb:c.Qb};a.s={},El(a,function(t){Object.defineProperty(a.s,t,{configurable:!1,enumerable:!0,get:function(){var i=a,e=t;if("addEventListener"==(e=i.u.has(e)?i.u.get(e):e))return function(e,t,n){return i.o.addEventListener(e,t,n)};if("removeEventListener"==e)return function(e,t,n){return i.o.removeEventListener(e,t,n)};if("getMediaElement"==e)return function(){return i.l};if("getSharedConfiguration"==e)return i.g.get("player","getConfiguration");if("getNetworkingEngine"==e)return function(){return i.h.fc()};if("getDrmEngine"==e)return function(){return i.h.m};if("getAdManager"==e)return function(){return i.h.ve()};if("setVideoContainer"==e)return function(e){return i.h.Qe(e)};if(i.g.sa()){if("getManifest"==e||"drmInfo"==e)return function(){return J(e+"() does not work while casting!"),null};if("attach"==e||"detach"==e)return function(){return J(e+"() does not work while casting!"),Promise.resolve()}}return i.g.sa()&&0==Object.keys(i.g.g.video).length&&nl[e]||!i.g.sa()?i.h[e].bind(i.h):i.g.get("player",e)}})}),u=a,l=new Map,El(u,function(e,t){var n;l.has(t)?(n=l.get(t),e.length<n.length?u.u.set(e,n):u.u.set(n,e)):l.set(t,e)}),a.j=new h,a.j.Lc=a.l,a.o=new h,a.o.Lc=a.s}function El(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.h,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=Se(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),t(u,i[u]));a=Object.getPrototypeOf(a)}}function Sl(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.xd(),startTime:null};e.i.pause();for(var n=Se(el),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=Se(rl)).next();!i.done;i=n.next()){var i=(r=i.value)[1],r=e.h[r[0]]();t.player[i]=r}for(i=(n=Se(al)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function kl(e){var t=new ve("caststatuschanged");e.dispatchEvent(t)}function Al(e){var t=new ve(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Il(i){for(var e=Se(rl),t=e.next();!t.done;t=e.next()){var t=(n=t.value)[1],n=i.g.get("player",n[0])();i.h[t](n)}var r=i.g.get("player","getAssetUri")(),a=(t=i.g.get("video","ended"),e=Promise.resolve(),i.i.autoplay),o=(n=null,t||(n=i.g.get("video","currentTime")),r&&(i.i.autoplay=!1,e=i.h.load(r,n)),{});for(n=(t=Se(el)).next();!n.done;n=t.next())n=n.value,o[n]=i.g.get("video",n);e.then(function(){if(i.i){for(var e=Se(el),t=e.next();!t.done;t=e.next())t=t.value,i.i[t]=o[t];for(t=(e=Se(al)).next();!t.done;t=e.next()){var t=(n=t.value)[1],n=i.g.get("player",n[0])();i.h[t](n)}i.i.autoplay=a,r&&i.i.play()}},function(e){e=new ve("error",e=(new Map).set("detail",e)),i.h.dispatchEvent(e)})}function Cl(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Ml(e,t,n,i){h.call(this);var r=this,T=(this.g=e,this.h=t,this.j=new f,this.I={video:e,player:t},this.D=n||function(){},this.L=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.C=!1,this.u=!0,this.s=this.l=null,this.G=new A(function(){_l(r)}),this),a=cast.receiver.CastReceiverManager.getInstance();a.onSenderConnected=function(){return Rl(T)},a.onSenderDisconnected=function(){return Rl(T)},a.onSystemVolumeChanged=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&jl(T,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},T.l),jl(T,{type:"event",targetName:"video",event:{type:"volumechange"}},T.l)},T.s=a.getCastMessageBus("urn:x-cast:com.google.cast.media"),T.s.onMessage=function(e){var n=T,i=Qu(e.data);switch(i.type){case"PLAY":n.g.play(),Ul(n);break;case"PAUSE":n.g.pause(),Ul(n);break;case"SEEK":var t=i.currentTime,r=i.resumeState;null!=t&&(n.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(n.g.play(),Ul(n)):r&&"PLAYBACK_PAUSE"==r&&(n.g.pause(),Ul(n));break;case"STOP":n.h.ge().then(function(){n.h&&Ul(n)});break;case"GET_STATUS":Pl(n,Number(i.requestId));break;case"VOLUME":var t=(r=i.volume).level,r=r.muted,a=n.g.volume,o=n.g.muted;null!=t&&(n.g.volume=Number(t)),null!=r&&(n.g.muted=r),a==n.g.volume&&o==n.g.muted||Ul(n);break;case"LOAD":n.m=0,n.C=!1,n.u=!1,t=i.media,r=i.currentTime,a=n.L(t.contentId),o=i.autoplay||!0,n.D(t.customData),o&&(n.g.autoplay=!0),n.h.load(a,r).then(function(){n.h&&Pl(n)}).catch(function(e){var t="LOAD_FAILED";7==e.category&&7e3==e.code&&(t="LOAD_CANCELLED"),jl(n,{requestId:Number(i.requestId),type:t},n.s)});break;default:jl(n,{requestId:Number(i.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},n.s)}},T.l=a.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),T.l.onMessage=function(e){var t,n,i,r,a,o,s,u,l,c,d,h=T,f=e;switch((m=Qu(f.data)).type){case"init":h.m=0,h.C=!1,h.u=!0,t=h,n=m.initState,i=m.appData,Re(function(e){switch(e.g){case 1:for(r in n.player)a=n.player[r],t.h[r](a);return t.D(i),o=t.g.autoplay,n.manifest?(t.g.autoplay=!1,Ie(e,5),ke(e,t.h.load(n.manifest,n.startTime),7)):ke(e,Promise.resolve(),3);case 7:Ce(e,3);break;case 5:return s=Me(e),s=(new Map).set("detail",s),s=new ve("error",s),t.h&&t.h.dispatchEvent(s),e.return();case 3:if(!t.h)return e.return();for(u in n.video)l=n.video[u],t.g[u]=l;for(c in n.playerAfterLoad)d=n.playerAfterLoad[c],t.h[c](d);t.g.autoplay=o,n.manifest&&(t.g.play(),Ul(t)),Ae(e)}}),_l(h);break;case"appData":h.D(m.appData);break;case"set":var p=m.targetName,g=m.property,m=m.value;if("video"==p){var v=cast.receiver.CastReceiverManager.getInstance();if("volume"==g){v.setSystemVolumeLevel(m);break}if("muted"==g){v.setSystemVolumeMuted(m);break}}h.I[p][g]=m;break;case"call":(p=h.I[m.targetName])[m.methodName].apply(p,m.args);break;case"asyncCall":p=m.targetName,g=m.methodName,"player"==p&&"load"==g&&(h.m=0,h.C=!1);var y=m.id,b=f.senderId;m=(v=h.I[p])[g].apply(v,m.args),(m="player"==p&&"load"==g?m.then(function(){h.u=!0}):m).then(function(){return Ol(h,b,y,null)},function(e){return Ol(h,b,y,e)})}},a.start();for(var o,s=(a=Se(Ju)).next();!s.done;s=a.next())T.j.B(T.g,s.value,function(e){return Dl(T,"video",e)});for(o in Ei)T.j.B(T.h,Ei[o],function(e){return Dl(T,"player",e)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?T.h.ae(3840,2160):T.h.ae(1920,1080),T.j.B(T.g,"loadeddata",function(){T.C=!0}),T.j.B(T.h,"loading",function(){T.o=!1,Nl(T)}),T.j.B(T.g,"playing",function(){T.o=!1,Nl(T)}),T.j.B(T.g,"pause",function(){Nl(T)}),T.j.B(T.h,"unloading",function(){T.o=!0,Nl(T)}),T.j.B(T.g,"ended",function(){new A(function(){T.g&&T.g.ended&&(T.o=!0,Nl(T))}).R(Fl)})}function Rl(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Nl(e)}function Nl(t){var n;Re(function(e){return 1==e.g?ke(e,Promise.resolve(),2):t.h?(n=new ve("caststatuschanged"),t.dispatchEvent(n),Ll(t)||Ul(t),void Ae(e)):e.return()})}function Dl(e,t,n){e.h&&(_l(e),jl(e,{type:"event",targetName:t,event:n},e.l))}function _l(e){e.G.R(Bl);for(var t,n={video:{},player:{}},i=Se(Zu),r=i.next();!r.done;r=i.next())r=r.value,n.video[r]=e.g[r];if(e.h.V())for(var a in il)0==e.m%il[a]&&(n.player[a]=e.h[a]());for(t in nl)0==e.m%nl[t]&&(n.player[t]=e.h[t]());(i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=i.level,n.video.muted=i.muted),e.C&&(e.m+=1),jl(e,{type:"update",update:n},e.l),Ll(e)}function Ll(e){return e.u&&(e.g.duration||e.h.V())&&(Pl(e),e.u=!1,1)}function Pl(e,t){var n={contentId:e.h.xd(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Ul(e,void 0===t?0:t,n)}function Ol(e,t,n,i){e.h&&jl(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function jl(e,t,n,i){e.F&&(e=$u(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ul(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?Vl:e.h.yd()?Kl:e.g.paused?Gl:Hl,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),jl(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}T(xl,h),(n=xl.prototype).destroy=function(e){return e&&this.g.yb(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,h.prototype.release.call(this),Promise.all(e)},n.If=function(){return this.l},n.Af=function(){return this.s},n.$e=function(){return this.g.m&&vl},n.sa=function(){return this.g.sa()},n.Sd=function(){return this.g.Sd()},n.cast=function(){var t,n=this;return Re(function(e){return 1==e.g?(t=Sl(n),ke(e,n.g.cast(t),2)):n.h?ke(e,n.h.ge(),0):e.return()})},n.Zd=function(e){this.g.Zd(e)},n.lg=function(){var t,n;(t=this.g).h&&(n=t.L(),chrome.cast.requestSession(function(e){return ll(t,n,e)},function(e){return cl(t,e)}))},n.yb=function(){this.g.yb()},n.cf=function(t,n){n=void 0!==n&&n;var i=this;return Re(function(e){if(1==e.g)return t==i.D&&n==i.C?e.return():(i.D=t,i.C=n,i.g.yb(),ke(e,i.g.destroy(),2));i.g=null,i.g=new ul(t,function(){return kl(i)},function(){return Al(i)},function(e,t){return Cl(i,e,t)},function(){return Il(i)},function(){return Sl(i)},n),i.g.init(),Ae(e)})},t("shaka.cast.CastProxy",xl),xl.prototype.changeReceiverId=xl.prototype.cf,xl.prototype.forceDisconnect=xl.prototype.yb,xl.prototype.suggestDisconnect=xl.prototype.lg,xl.prototype.setAppData=xl.prototype.Zd,xl.prototype.receiverName=xl.prototype.Sd,xl.prototype.isCasting=xl.prototype.sa,xl.prototype.canCast=xl.prototype.$e,xl.prototype.getPlayer=xl.prototype.Af,xl.prototype.getVideo=xl.prototype.If,T(Ml,h),(n=Ml.prototype).isConnected=function(){return this.F},n.Mf=function(){return this.o},n.hg=function(e){this.i=e},n.ff=function(){this.i=null},n.ig=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},n.gg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},n.fg=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},n.destroy=function(){var t,n=this;return Re(function(e){if(1==e.g)return n.j&&(n.j.release(),n.j=null),t=[],n.h&&(t.push(n.h.destroy()),n.h=null),n.G&&(n.G.stop(),n.G=null),n.g=null,n.I=null,n.D=null,n.F=!1,n.o=!0,n.l=null,n.s=null,h.prototype.release.call(n),ke(e,Promise.all(t),2);cast.receiver.CastReceiverManager.getInstance().stop(),Ae(e)})},t("shaka.cast.CastReceiver",Ml),Ml.prototype.setContentArtist=Ml.prototype.fg,Ml.prototype.setContentImage=Ml.prototype.gg,Ml.prototype.setContentTitle=Ml.prototype.ig,Ml.prototype.clearContentMetadata=Ml.prototype.ff,Ml.prototype.setContentMetadata=Ml.prototype.hg,Ml.prototype.isIdle=Ml.prototype.Mf;var Bl=.5,Fl=5,Vl="IDLE",Hl="PLAYING",Kl="BUFFERING",Gl="PAUSED";function ql(e,t){e=P(e,t);return 1!=e.length?null:e[0]}function Wl(e,t,n){return 1!=(e=zl(e,t,n)).length?null:e[0]}function P(e,t){for(var n=[],i=Se(e.childNodes),r=i.next();!r.done;r=i.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function zl(e,t,n){for(var i=[],r=(e=Se(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function Xl(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Yl(e,t,n){for(var i=(t=Se(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function $l(e){return Array.from(e.childNodes).every(Ql)?e.textContent.trim():null}function Ql(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function j(e,t,n,i){i=void 0===i?null:i;var r=null;return null==(r=null!=(e=e.getAttribute(t))?n(e):r)?i:r}function Jl(e){return!e||(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e))?null:e/1e3}function Zl(e){return(e=e&&RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))&&(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e))?e:null}function ec(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t&&(e=Number(t[1]),isFinite(e))&&(t=Number(t[2]),isFinite(t))?{start:e,end:t}:null}function tc(e){return 0==(e=Number(e))%1?e:null}function nc(e){return 0==(e=Number(e))%1&&0<e?e:null}function ic(e){return 0==(e=Number(e))%1&&0<=e?e:null}function rc(e){return e=Number(e),isNaN(e)?null:e}function ac(e){var t=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(t)?null:t}function oc(e,t){var n=new DOMParser,i=null;try{i=n.parseFromString(e,"text/xml")}catch(e){return null}return!(n=i.documentElement)||n.getElementsByTagName("parsererror").length||i.documentElement.tagName!=t?null:n}function sc(e,t){try{return oc(Pt(e),t)}catch(e){return null}}function uc(i,e,t){var n=function(e){for(var t=[],n=(e=Se(i)).next();!n.done;n=e.next())(n=function(e){var t=e.getAttribute("schemeIdUri"),n=Xl(e,"urn:mpeg:cenc:2013","default_KID"),i=zl(e,"urn:mpeg:cenc:2013","pssh").map($l);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Ne(2,4,4009);var r=[];try{r=i.map(function(e){return{initDataType:"cenc",initData:Gt(e),keyId:null}})}catch(e){throw new Ne(2,4,4007)}return{node:e,Wd:t,keyId:n,init:0<r.length?r:null}}(n.value))&&t.push(n);return t}(i),r=null,c=(i=[],[]),a=new Set(n.map(function(e){return e.keyId}));if(a.delete(null),1<a.size)throw new Ne(2,4,4010);if(e||(c=n.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Wd||(r=e.init||r,!1)})).length&&0==(i=function(e,t,n,i){for(var r=[],a=(t=Se(c)).next();!a.done;a=t.next()){var o,s,u,l=n[(a=a.value).Wd];l&&(o=(o=Wl(a.node,"urn:microsoft:playready","pro"))?[{initData:Ji(o=Gt(o.textContent),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0),initDataType:"cenc",keyId:a.keyId}]:null,u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.Wd&&(u=0==(u=i).size?null:(s=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),[{initData:Ji(new Uint8Array([]),s,u,1),initDataType:"cenc",keyId:a.keyId}])),o=mt(l,a.init||e||o||u),(l=dc.get(l))&&(o.licenseServerUri=l(a)),r.push(o))}return r}(r,c,t,a)).length&&(i=[mt("",r)]),n.length&&(e||!c.length))for(i=[],t=(e=Se(Object.values(t))).next();!t.done;t=e.next())"org.w3.clearkey"!=(t=t.value)&&i.push(mt(t,r));if(a=Array.from(a)[0]||null)for(t=(e=Se(i)).next();!t.done;t=e.next())for(n=(t=Se(t.value.initData)).next();!n.done;n=t.next())n.value.keyId=a;return{qe:a,bh:r,drmInfos:i,ue:!0}}function lc(e){if(e=(e=(e=Wl(e.node,"urn:microsoft:playready","pro"))&&function(e){var t,n=0,i=We(e);if(i.getUint32(0,!0)!=e.byteLength)return[];e:{for(e=6,n=[];e<i.byteLength-1;){t=i.getUint16(e,!0),e+=2;var r=i.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>i.byteLength){i=[];break e}var a=D(i,e,r);n.push({type:t,value:a}),e+=r}i=n}return i}(e=Gt(e.textContent)).filter(function(e){return e.type===cc})[0])&&oc(e=Ot(e.value,!0),"WRMHEADER"))for(var t=e,n=(t=Se(e.getElementsByTagName("DATA"))).next();!n.done;n=t.next())for(var i=(n=Se(n.value.childNodes)).next();!i.done;i=n.next())if((i=i.value)instanceof Element&&"LA_URL"==i.tagName)return i.textContent;return""}var cc=1,dc=(new Map).set("com.widevine.alpha",function(e){return(e=Wl(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",lc).set("com.microsoft.playready.recommendation",lc).set("com.microsoft.playready.software",lc).set("com.microsoft.playready.hardware",lc).set("org.w3.clearkey",function(e){return(e=Wl(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""});function hc(e,t,n,i,r){var a={RepresentationID:t,Number:n,Bandwidth:i,Time:r};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,t,n,i){if("$$"==e)return"$";var r=a[t];if(null==r)return e;switch("RepresentationID"==t&&(n=n&&void 0),"Time"==t&&(r=Math.round(r)),i){case void 0:case"d":case"i":case"u":e=r.toString();break;case"o":e=r.toString(8);break;case"x":e=r.toString(16);break;case"X":e=r.toString(16).toUpperCase();break;default:e=r.toString()}return n=N.parseInt(n,10)||1,Array(Math.max(0,n-e.length)+1).join("0")+e})}function fc(e,t){var n=1,i=((r=pc(e,t,"timescale"))&&(n=nc(r)||1),pc(e,t,"duration")),r=nc(i||""),a=((r="image"==e.H.contentType?rc(i||""):r)&&(r/=n),pc(e,t,"startNumber")),i=Number(pc(e,t,"presentationTimeOffset"))||0,o=ic(a||""),s=(null!=a&&null!=o||(o=1),gc(e,t,"SegmentTimeline"));if(a=null,s){for(var a=n,u=e.W.duration||1/0,s=P(s,"S"),l=[],c=-i,d=0;d<s.length;++d){var h=s[d],f=s[d+1],p=j(h,"t",ic),g=j(h,"d",ic),h=j(h,"r",tc);if(null!=p&&(p-=i),!g)break;if(p=null!=p?p:c,(h=h||0)<0)if(f){if(null==(f=j(f,"t",ic)))break;if(f<=p)break;h=Math.ceil((f-p)/g)-1}else{if(1/0==u)break;if(u<=p/a)break;h=Math.ceil((u*a-p)/g)-1}for(0<l.length&&p!=c&&(l[l.length-1].end=p/a),f=0;f<=h;++f)l.push({start:p/a,end:(c=p+g)/a,pg:p}),p=c}a=l}return{timescale:n,ga:r,Kb:o,Sa:i/n||0,he:i,timeline:a}}function pc(e,t,n){return[t(e.H),t(e.ja),t(e.aa)].filter(pt).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function gc(e,t,n){return[t(e.H),t(e.ja),t(e.aa)].filter(pt).map(function(e){return ql(e,n)}).reduce(function(e,t){return e||t})}function mc(e){this.h=We(e),this.g=new b(this.h,0)}function vc(e){var t=yc(e);if(7<t.length)throw new Ne(2,3,3002);for(var n=0,i=(t=Se(t)).next();!i.done;i=t.next())n=256*n+i.value;t=yc(e);e:{for(var r=(i=Se(bc)).next();!r.done;r=i.next())if(Ke(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.$();else{if(8==t.length&&224&t[1])throw new Ne(2,3,3001);for(r=i=0;r<t.length;r++)var a=t[r],i=0==r?a&(1<<8-t.length)-1:256*i+a;t=i}return t=e.g.$()+t<=e.h.byteLength?t:e.h.byteLength-e.g.$(),i=We(e.h,e.g.$(),t),e.g.skip(t),new Tc(n,i)}function yc(e){var t=e.g.$(),n=e.g.Ra();if(0==n)throw new Ne(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),D(e.h,t,n)}mc.prototype.ma=function(){return this.g.ma()};var bc=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Tc(e,t){this.id=e,this.g=t}function wc(e){if(8<e.g.byteLength)throw new Ne(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ne(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function xc(e,t){var n,i,r,t=gc(e,t,"Initialization");return t?(n=e.H.wa,(i=t.getAttribute("sourceURL"))&&(n=gt(e.H.wa,[i])),i=0,r=null,(t=j(t,"range",ec))&&(i=t.start,r=t.end),new _a(function(){return n},i,r,Ic(e))):null}function Ec(o,s,u,l,c,d,h){var f,p,g,m,v,y,b,T,w,x,E,S;return Re(function(e){if(1==e.g)return f=o.presentationTimeline,p=!o.Wa||!o.W.Ce,g=o.W.start,m=o.W.duration,v=o.H.mimeType.split("/")[1],y=null,T=[(b=s)(l,c,d),"webm"==v?b(u.ya(),u.Ca,u.la):null],b=null,ke(e,Promise.all(T),2);if(b=e.h,T=b[0],w=b[1]||null,x=g-h,E=g,S=m?g+m:1/0,"mp4"==v)var t=function(e,t,n,i,r,a,o){var s,u=(new _).U("sidx",function(e){s=function(e,t,n,i,r,a,o){var s,u,l=[],c=(o.reader.skip(4),o.reader.N());if(0==c)throw new Ne(2,3,3005);u=0==o.version?(s=o.reader.N(),o.reader.N()):(s=o.reader.Jb(),o.reader.Jb()),o.reader.skip(2);var d=o.reader.Rd();for(e=e+o.size+u,u=0;u<d;u++){var h=o.reader.N(),f=(2147483648&h)>>>31,p=(h&=2147483647,o.reader.N());if(o.reader.skip(4),1==f)throw new Ne(2,3,3006);l.push(new L(s/c+n,(s+p)/c+n,function(){return a},e,e+h-1,t,n,i,r)),s+=p,e+=h}return o.parser.stop(),l}(t,i,r,a,o,n,e)});if(e&&u.parse(e),s)return s;throw new Ne(2,3,3004)}(T,c,l,u,x,E,S);else{if(440786851!=vc(t=new mc(w)).id)throw new Ne(2,3,3008);if(408125543!=(n=vc(t)).id)throw new Ne(2,3,3009);for(var t=n.g.byteOffset,n=new mc(n.g),i=null;n.ma();){var r=vc(n);if(357149030==r.id){i=r;break}}if(!i)throw new Ne(2,3,3010);for(i=new mc(i.g),r=1e6,n=null;i.ma();){var a=vc(i);if(2807729==a.id)r=wc(a);else if(17545==a.id)if(4==a.g.byteLength)n=a.g.getFloat32(0);else{if(8!=a.g.byteLength)throw new Ne(2,3,3003);n=a.g.getFloat64(0)}}if(null==n)throw new Ne(2,3,3011);if(n*=i=r/1e9,475249515!=(r=vc(new mc(T))).id)throw new Ne(2,3,3007);t=function(e,t,n,i,r,a,o,s,u){function l(){return r}var c=[];e=new mc(e.g);for(var d=null,h=null;e.ma();){var f,p=vc(e);187==p.id&&(f=function(e){if(179!=(e=vc(t=new mc(e.g))).id)throw new Ne(2,3,3013);if(e=wc(e),183!=(t=vc(t)).id)throw new Ne(2,3,3012);for(var t=new mc(t.g),n=0;t.ma();){var i=vc(t);if(241==i.id){n=wc(i);break}}return{qg:e,Zf:n}}(p))&&(p=n*f.qg,f=t+f.Zf,null!=d&&c.push(new L(d+o,p+o,l,h,f-1,a,o,s,u)),d=p,h=f)}return null!=d&&c.push(new L(d+o,i+o,l,h,null,a,o,s,u)),c}(r,t,i,n,l,u,x,E,S)}return w=t,f.Gb(w),y=new ne(w),p&&y.Xa(E,S,!0),e.return(y)})}function Sc(e){return e.uc}function kc(e){var t=gc(e,Sc,"RepresentationIndex");return e=ec((e=pc(e,Sc,"indexRange"))||""),e=t?j(t,"range",ec,e):e}function Ac(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=me&&"mp4"!=n&&"webm"!=n)throw new Ne(2,4,4006);if("webm"==n&&!t)throw new Ne(2,4,4005)}function Ic(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Vc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Cc(e){return e.$a}function Mc(e,t,n,i,k,A){var r,a,o,s,I,u,l,c,C=(s=pc(c=e,Rc,"initialization"))?(r=c.H.id,a=c.bandwidth||null,o=c.H.wa,new _a(function(){var e=hc(s,r,null,a,null);return gt(o,[e])},0,null,Ic(c))):null,M=(d=fc(c=e,Rc),h=pc(c,Rc,"media"),c=pc(c,Rc,"index"),{ga:d.ga,timescale:d.timescale,Kb:d.Kb,Sa:d.Sa,he:d.he,timeline:d.timeline,Jd:h,kc:c}),d=M,h=d.kc?1:0;if(0!=(h=(h+=d.timeline?1:0)+(d.ga?1:0))&&(1!=h&&(d.kc&&(d.timeline=null),d.ga=null),d.kc||d.Jd))return I=ki(e),M.kc?(Ac(e,C),{zb:function(){var e=hc(M.kc,I.H.id,null,I.bandwidth||null,null),e=gt(I.H.wa,[e]);return Ec(I,t,C,e,0,null,M.Sa)}}):M.ga?(i||(e.presentationTimeline.Ld(M.ga),e.presentationTimeline.Md(e.W.start)),{zb:function(){var e=I,r=M,t=k,a=C,n=A;function o(t){var n=(i=(t-f)*h)+r.Sa,e=i+c,i=e+h;return(e=new L(e,Math.min(i,u()),function(){var e=hc(g,v,t,m,n*p);return gt(y,[e])},0,null,a,b,c,u())).j=i,e}function s(){var e=[Math.max(l.Pa(),c),Math.min(l.gb(),u())].map(function(e){return e-c});return[Math.ceil(e[0]/h),Math.ceil(e[1]/h)-1].map(function(e){return e+f})}function u(){var e=null!=i&&n[i]||d;return e?c+e:1/0}var l=e.presentationTimeline,c=e.W.start,i=e.aa.id,d=e.W.duration,h=r.ga,f=r.Kb,p=r.timescale,g=r.Jd,m=e.bandwidth||null,v=e.H.id,y=e.H.wa,b=c-r.Sa,T=s();e=e.Wa?Math.max(T[0],T[1]-t+1):T[0],T=T[1],t=[];for(var w=e;w<=T;++w){var x=o(w);t.push(x)}var E,S=new ne(t);return t=l.gb()<u(),w=l.V(),(t||w)&&(E=Math.max(e,T+1),S.bd(h,function(){var e=l.Pa();S.eb(e),(t=Se(s())).next();for(var t=t.next().value,n=[];E<=t;){var i=o(E);n.push(i),E++}return e>u()&&!n.length?null:n})),Promise.resolve(S)}}):(i=u=null,e.aa.id&&e.H.id&&(i=n[i=e.aa.id+","+e.H.id])&&(u=i.segmentIndex),l=function(e,t,n){for(var i=e.W.start,r=e.W.duration,a=i-t.Sa,r=r?i+r:1/0,o=[],s={},u=0;u<t.timeline.length;s={kd:s.kd,od:s.od,rd:s.rd,gd:s.gd,td:s.td,hd:s.hd},u++){var l=(d=t.timeline[u]).start,c=d.pg,d=d.end;s.rd=u+t.Kb,s.td=c+t.he,s.od=e.H.id,s.gd=e.bandwidth||null,s.kd=t.Jd,s.hd=e.H.wa,o.push(new L(i+l,i+d,function(t){return function(){var e=hc(t.kd,t.od,t.rd,t.gd||null,t.td);return gt(t.hd,[e]).map(function(e){return e.toString()})}}(s),0,null,n,a,i,r))}return o}(I,M,C),n=e.W.start,h=1/0!=(c=e.W.duration?e.W.start+e.W.duration:1/0),u?(h&&new ne(l).Xa(n,c,!0),u.Fb(l,e.presentationTimeline.Pa())):u=new ne(l),e.presentationTimeline.Gb(l),h&&u.Xa(n,c),i&&e.Wa&&(i.segmentIndex=u),{zb:function(){return u&&0!=u.J.length||u.nc(l),Promise.resolve(u)}});throw new Ne(2,4,4002)}function Rc(e){return e.vc}function Nc(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function Dc(_,L,P){var O,j,U,B,F,V,H,K,G,q,W,z,X,Y,$,Q,J,Z,ee,te,ne,ie,re,ae,oe,se,ue;return Re(function(e){switch(e.g){case 1:O=bt;for(var t=L,n=(t=Se(L)).next();!n.done;n=t.next()){for(var i=[],r=Se((n=n.value).Fc),a=r.next();!a.done;a=r.next()){for(var a=a.value,o=!1,s=Se(i),u=s.next();!u.done;u=s.next())u=u.value,a.id!=u.id&&a.channelsCount==u.channelsCount&&a.language==u.language&&a.bandwidth==u.bandwidth&&a.label==u.label&&a.codecs==u.codecs&&a.mimeType==u.mimeType&&le(a.roles,u.roles)&&a.audioSamplingRate==u.audioSamplingRate&&a.primary==u.primary&&(o=!0);o||i.push(a)}n.Fc=i}for(var l=L,c=(l=Se(L)).next();!c.done;c=l.next()){for(var d=[],h=Se((c=c.value).dd),f=h.next();!f.done;f=h.next()){for(var f=f.value,p=!1,g=Se(d),m=g.next();!m.done;m=g.next())m=m.value,f.id!=m.id&&f.width==m.width&&f.frameRate==m.frameRate&&f.codecs==m.codecs&&f.mimeType==m.mimeType&&f.label==m.label&&le(f.roles,m.roles)&&function(e,t){if(!e&&!t)return 1;if(!(e&&!t||t&&!e)&&e.size==t.size){for(var n=Se(e),i=n.next();!i.done;i=n.next()){var i=(r=Se(i.value)).next().value,r=r.next().value;if(!t.has(i))return;if((i=t.get(i))!=r||null==i)return}return 1}}(f.closedCaptions,m.closedCaptions)&&f.bandwidth==m.bandwidth&&(p=!0);p||d.push(f)}c.dd=d}for(var v=L,y=(v=Se(L)).next();!y.done;y=v.next()){for(var b=[],T=Se((y=y.value).textStreams),w=T.next();!w.done;w=T.next()){for(var w=w.value,x=!1,E=Se(b),S=E.next();!S.done;S=E.next())S=S.value,w.id!=S.id&&w.language==S.language&&w.label==S.label&&w.codecs==S.codecs&&w.mimeType==S.mimeType&&w.bandwidth==S.bandwidth&&le(w.roles,S.roles)&&(x=!0);x||b.push(w)}y.textStreams=b}for(var k=L,A=(k=Se(L)).next();!A.done;A=k.next()){for(var I=[],C=Se((A=A.value).imageStreams),M=C.next();!M.done;M=C.next()){for(var M=M.value,R=!1,N=Se(I),D=N.next();!D.done;D=N.next())D=D.value,M.id!=D.id&&M.width==D.width&&M.codecs==D.codecs&&M.mimeType==D.mimeType&&(R=!0);R||I.push(M)}A.imageStreams=I}if(!P&&1==L.length){F=L[0],_.g=F.Fc,_.h=F.dd,_.j=F.textStreams,_.i=F.imageStreams,e.A(2);break}for(j=-1,U=0;U<L.length;U++)B=L[U],_.m.has(B.id)||(_.m.add(B.id),-1==j&&(j=U));if(-1==j)return e.return();for(F=L.map(function(e){return e.Fc}),V=L.map(function(e){return e.dd}),H=L.map(function(e){return e.textStreams}),K=L.map(function(e){return e.imageStreams}),G=Se(H),q=G.next();!q.done;q=G.next())q.value.push($c(O.X));for(W=Se(K),z=W.next();!z.done;z=W.next())z.value.push($c(O.Ub));return ke(e,Lc(_.g,F,j,jc,Bc),3);case 3:return ke(e,Lc(_.h,V,j,jc,Bc),4);case 4:return ke(e,Lc(_.j,H,j,jc,Bc),5);case 5:return ke(e,Lc(_.i,K,j,jc,Bc),2);case 2:if(X=0,Y=[],_.h.length&&_.g.length)for(te=Se(_.g),ne=te.next();!ne.done;ne=te.next())for(ie=ne.value,re=Se(_.h),ae=re.next();!ae.done;ae=re.next())oe=ae.value,se=fr(ie.drmInfos,oe.drmInfos),ie.drmInfos.length&&oe.drmInfos.length&&!se.length||(ue=X++,Y.push({id:ue,language:ie.language,primary:ie.primary,audio:ie,video:oe,bandwidth:(ie.bandwidth||0)+(oe.bandwidth||0),drmInfos:se,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for($=_.h.concat(_.g),Q=Se($),J=Q.next();!J.done;J=Q.next())Z=J.value,ee=X++,Y.push({id:ee,language:Z.language,primary:Z.primary,audio:Z.type==O.cb?Z:null,video:Z.type==O.ra?Z:null,bandwidth:Z.bandwidth||0,drmInfos:Z.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});_.l=Y,Ae(e)}})}function _c(t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,T,w,x,E,S;return Re(function(e){switch(e.g){case 1:if(n=bt,1==t.length)return e.return(t[0]);for(f=t.map(function(e){return e.filter(function(e){return e.type==n.cb})}),i=t.map(function(e){return e.filter(function(e){return e.type==n.ra})}),r=t.map(function(e){return e.filter(function(e){return e.type==n.X})}),a=t.map(function(e){return e.filter(function(e){return e.type==n.Ub})}),o=Se(r),s=o.next();!s.done;s=o.next())s.value.push(Yc(n.X));for(u=Se(a),l=u.next();!l.done;l=u.next())l.value.push(Yc(n.Ub));return ke(e,Lc([],f,0,Uc,Fc),2);case 2:return c=e.h,ke(e,Lc([],i,0,Uc,Fc),3);case 3:return d=e.h,ke(e,Lc([],r,0,Uc,Fc),4);case 4:return h=e.h,ke(e,Lc([],a,0,Uc,Fc),5);case 5:if(f=e.h,p=0,d.length&&c.length)for(y=Se(c),b=y.next();!b.done;b=y.next())for(T=b.value,w=Se(d),x=w.next();!x.done;x=w.next())E=x.value,S=p++,E.variantIds.push(S),T.variantIds.push(S);else for(g=d.concat(c),m=Se(g),v=m.next();!v.done;v=m.next())v.value.variantIds=[p++];return e.return(d.concat(c).concat(h).concat(f))}})}function Lc(o,s,u,l,c){var d,h,f,p,g,m,v,y,b,T,w,x,E,S,k,A,I;return Re(function(e){switch(e.g){case 1:for(d=bt,h=[],f=0;f<s.length;f++)u<=f?h.push(new Set(s[f])):h.push(new Set);p=Se(o),g=p.next();case 2:if(g.done){e.A(4);break}return ke(e,(t=g.value,n=s,i=u,r=c,a=h,Re(function(e){return 1==e.g?(Vc(n,t),t.matchedStreams?t.segmentIndex?ke(e,Pc(t,i),2):e.A(2):e.return(!1)):(Oc(t,i,r,a),e.return(!0))})),5);case 5:if(!e.h)throw new Ne(2,4,4037);g=p.next(),e.A(2);break;case 4:for(m=Se(h),v=m.next();!v.done;v=m.next())for(y=v.value,b=Se(y),T=b.next();!T.done;T=b.next())w=T.value,(w=function(e,t,n,i,r){var a=n(e);return Vc(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return Re(function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new Io,ke(e,Pc(a,0),0))})}),a.matchedStreams?(Oc(a,0,i,r),a):null}(w,s,l,c,h))&&o.push(w);for(x=Se(h),v=x.next();!v.done;v=x.next())for(E=v.value,S={},k=Se(E),T=k.next();!T.done;S={Va:S.Va},T=k.next())if(S.Va=T.value,A=S.Va.type==d.X&&!S.Va.language,I=S.Va.type==d.Ub&&!S.Va.tilesLayout,!A&&!I&&o.some(function(t){return function(e){return e.mimeType==t.Va.mimeType&&tn(e.codecs)==tn(t.Va.codecs)}}(S)))throw new Ne(2,4,4037);return e.return(o)}var t,n,i,r,a})}function Pc(t,n){var i,r,a,o,s,u,l;return Re(function(e){if(1==e.g){for(i=[],r=t.matchedStreams,a=Se(r),o=a.next();!o.done;o=a.next())s=o.value,i.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&i.push(s.trickModeVideo.createSegmentIndex());return ke(e,Promise.all(i),2)}if(t.segmentIndex instanceof Io)for(u=0;u<r.length;u++)(l=r[u]).segmentIndex&&n<=u&&t.segmentIndex.j.push(l.segmentIndex);Ae(e)})}function Oc(e,t,n,i){for(var r,a,o=e.matchedStreams,s=0;s<o.length;s++)t<=s&&(n(e,r=o[s]),a=!0,a=("audio"!=e.type||0!=pn(e.language,r.language))&&a)&&i[s].delete(r)}function jc(e){var n=Object.assign({},e);return n.originalId=null,n.createSegmentIndex=function(){return Promise.resolve()},n.closeSegmentIndex=function(){if(n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null),n.matchedStreams)for(var e=Se(n.matchedStreams),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null)},n.segmentIndex=null,n.emsgSchemeIdUris=[],n.keyIds=new Set,n.closedCaptions=null,n.trickModeVideo=null,n}function Uc(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Bc(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(te(n),te(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n,i,r=fr(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Ne(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(r=Se(t.closedCaptions)).next();!a.done;a=r.next()){var a=(o=Se(a.value)).next().value,o=o.next().value;e.closedCaptions.set(a,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=jc(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Bc(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Bc(e.trickModeVideo,t)}function Fc(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds,n=new Set([].concat(te(e.keyIds),te(n)));if(e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,te(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=Se(t.closedCaptions)).next();!i.done;i=n.next()){var i=(r=Se(i.value)).next().value,r=r.next().value;e.closedCaptions.set(i,r)}}}function Vc(e,t){for(var n=[],i=Se(e),r=i.next();!r.done;r=i.next()){for(var a=t,o={audio:Hc,video:Hc,text:Kc,image:Gc}[a.type],s={audio:qc,video:Wc,text:zc,image:Xc}[a.type],u=null,l=(r=Se(r.value)).next();!l.done;l=r.next())!o(a,l=l.value)||u&&!s(a,u,l)||(u=l);if(!(a=u))return;n.push(a)}t.matchedStreams=n}function Hc(e,t){var n;return!(n=t.mimeType!=e.mimeType||tn(t.codecs)!=tn(e.codecs))&&(n=e.drmInfos)&&(n=e.drmInfos,e=t.drmInfos,n=!(!n.length||!e.length||0<fr(n,e).length)),!n}function Kc(e,t){return!!e.language&&(!t.language||0!=pn(e.language,t.language)&&t.kind==e.kind)}function Gc(e){return!!e.tilesLayout}function qc(t,e,n){var i,r;return t.id==n.id||(i=pn(t.language,e.language))<(r=pn(t.language,n.language))||!(r<i)&&(!(e.primary||!n.primary)||!(e.primary&&!n.primary)&&(t.roles.length?(i=e.roles.filter(function(e){return t.roles.includes(e)}),(r=n.roles.filter(function(e){return t.roles.includes(e)})).length>i.length||!(r.length<i.length)&&n.roles.length<e.roles.length):!(n.roles.length||!e.roles.length)||!(n.roles.length&&!e.roles.length)&&((i=Qc(t.channelsCount,e.channelsCount,n.channelsCount))==Zc||i!=td&&((i=Qc(t.audioSamplingRate,e.audioSamplingRate,n.audioSamplingRate))==Zc||i!=td&&!(!t.bandwidth||Jc(t.bandwidth,e.bandwidth,n.bandwidth)!=Zc)))))}function Wc(e,t,n){if(e.id==n.id)return!0;var i=Qc(e.width*e.height,t.width*t.height,n.width*n.height);if(i==Zc)return!0;if(i==td)return!1;if(e.frameRate){if((i=Qc(e.frameRate,t.frameRate,n.frameRate))==Zc)return!0;if(i==td)return!1}return!(!e.bandwidth||Jc(e.bandwidth,t.bandwidth,n.bandwidth)!=Zc)}function zc(t,e,n){if(t.id==n.id)return!0;var i=pn(t.language,e.language),r=pn(t.language,n.language);if(i<r)return!0;if(r<i)return!1;if(!e.primary&&n.primary)return!0;if(e.primary&&!n.primary)return!1;if(t.roles.length){if(i=e.roles.filter(function(e){return t.roles.includes(e)}),(r=n.roles.filter(function(e){return t.roles.includes(e)})).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&e.roles.length)return!0;if(n.roles.length&&!e.roles.length)return!1}return n.mimeType==t.mimeType&&n.codecs==t.codecs&&(e.mimeType!=t.mimeType||e.codecs!=t.codecs)}function Xc(e,t,n){return e.id==n.id||Qc(e.width*e.height,t.width*t.height,n.width*n.height)==Zc}function Yc(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function $c(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ne([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Qc(e,t,n){if(t==e&&e!=n)return td;if(n==e&&e!=t)return Zc;if(e<t){if(n<=e||n-e<t-e)return Zc;if(t-e<n-e)return td}else{if(e<n)return td;if(e-n<e-t)return Zc;if(e-t<e-n)return td}return ed}function Jc(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Zc:t<e?td:ed}Nc.prototype.release=function(){for(var e=Se(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Zc=1,ed=0,td=-1;function nd(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.M={},this.j=new Nc,this.F=0,this.I=new X(5),this.D=new A(function(){var t,n,i;t=e,Re(function(e){switch(e.g){case 1:return n=0,Ie(e,2),ke(e,id(t),4);case 4:n=e.h,Ce(e,3);break;case 2:i=Me(e),t.h&&(i.severity=1,t.h.onError(i));case 3:if(!t.h)return e.return();od(t,n),Ae(e)}})}),this.o=new Ai,this.s=null,this.L=[],this.u=1/0,this.C=!1}function id(o){var s,u,l,c;return Re(function(e){return 1==e.g?(u=Mi(o.m,o.g.retryParameters),l=o.h.networkingEngine,o.h.modifyManifestRequest(u,{format:"d"}),s=Date.now(),l=l.request(0,u),Ii(o.o,l),ke(e,l.promise,2)):3!=e.g?(u=e.h,o.h?(u.uri&&!o.m.includes(u.uri)&&o.m.unshift(u.uri),ke(e,(t=o,n=u.data,i=u.uri,Re(function(e){if(1!=e.g)return a=e.h,e.return(rd(t,a,i));if(a=sc(n,"MPD"))return t.g.dash.disableXlinkProcessing?e.return(rd(t,a,i)):(r=t.g.dash.xlinkFailGracefully,r=function d(e,t,n,i,r,a){if(a=void 0===a?0:a,Xl(e,"http://www.w3.org/1999/xlink","href"))return o=function(n,i,r,e,a,o){for(var s,u=Xl(n,"http://www.w3.org/1999/xlink","href"),t=Xl(n,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=Se(Array.from(n.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&n.removeAttributeNS(c.namespaceURI,c.localName);return 5<=o?vi(new Ne(2,4,4028)):"onLoad"!=t?vi(new Ne(2,4,4027)):(s=gt([e],[u]),a.request(0,Mi(s,i)).Z(function(e){if(!(e=sc(e.data,n.tagName)))return vi(new Ne(2,4,4001,u));for(;n.childNodes.length;)n.removeChild(n.childNodes[0]);for(;e.childNodes.length;){var t=e.childNodes[0];e.removeChild(t),n.appendChild(t)}for(t=(e=Se(Array.from(e.attributes))).next();!t.done;t=e.next())n.setAttributeNode(t.value.cloneNode(!1));return d(n,i,r,s[0],a,o+1)}))}(e,t,n,i,r,a),n?o.Z(void 0,function(){return d(e,t,n,i,r,a)}):o;for(var o=[],s=Se(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())(u=u.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Xl(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(d(u,t,n,i,r,a)));return wi(o).Z(function(){return e})}(a,t.g.retryParameters,r,i,t.h.networkingEngine),Ii(t.o,r),ke(e,r.promise,2));throw new Ne(2,4,4001,i)})),3)):e.return(0)):(l=Date.now(),c=(l-s)/1e3,o.I.sample(1,c),e.return(c));var t,n,i,r,a})}function rd(c,d,h){var f,p,g,m,v,y,b,T,w,x,E,S,k;return Re(function(e){switch(e.g){case 1:if((f=c.g.dash.manifestPreprocessor)&&f(d),f=[h],0<(S=P(d,"Location").map($l).filter(pt)).length&&(S=gt(f,S),f=c.m=S),S=P(d,"BaseURL"),E=S.map($l),f=gt(f,E),E=0,S&&S.length&&(E=j(S[0],"availabilityTimeOffset",rc)||0),S=c.g.dash.ignoreMinBufferTime,p=0,S||(p=j(d,"minBufferTime",Zl)||0),c.F=j(d,"minimumUpdatePeriod",Zl,-1),S=j(d,"availabilityStartTime",Jl),x=j(d,"timeShiftBufferDepth",Zl),k=c.g.dash.ignoreSuggestedPresentationDelay,T=null,k||(T=j(d,"suggestedPresentationDelay",Zl)),k=c.g.dash.ignoreMaxSegmentDuration,g=null,k||(g=j(d,"maxSegmentDuration",Zl)),k=d.getAttribute("type")||"static",c.i)for(m=c.i.presentationTimeline,v=Se(Object.values(c.l)),y=v.next();!y.done;y=v.next())(b=y.value).segmentIndex&&b.segmentIndex.eb(m.Pa());else w=c.g.defaultPresentationDelay||1.5*p,m=new ye(S,null!=T?T:w,c.g.dash.autoCorrectDrift);return m.wc("static"==k),null==(x=m.V()&&!isNaN(c.g.availabilityWindowOverride)?c.g.availabilityWindowOverride:x)&&(x=1/0),m.ce(x),S=d.getAttribute("profiles")||"",T={Wa:"static"!=k,presentationTimeline:m,aa:null,W:null,ja:null,H:null,bandwidth:0,Ae:!1,xb:E,profiles:S.split(",")},w=function(e,t,n,i){var r=j(i,"mediaPresentationDuration",Zl),a=[],o=0;i=P(i,"Period");for(var s=0;s<i.length;s++){var u,l=i[s],c=i[s+1],d=j(l,"start",Zl,o),h=l.id,f=j(l,"duration",Zl),p=null;if(c?null!=(u=j(c,"start",Zl))&&(p=u-d):null!=r&&(p=r-d),null==p&&(p=f),!(null!==e.s&&null!==h&&null!==d&&d<e.s)||e.L.includes(h)||s+1==i.length){if(null!==d&&(null===e.s||d>e.s)&&(e.s=d),o=function(x,E,e,t){E.aa=sd(t.node,null,e),E.W=t,E.aa.xb=E.xb,E.aa.id||(E.aa.id="__shaka_period_"+t.start);var n=P(t.node,"EventStream");e=E.presentationTimeline.Pa();for(var i=(n=Se(n)).next();!i.done;i=n.next())!function(e,t,n,i,r){for(var a=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",s=j(i,"timescale",ic)||1,u=(i=Se(P(i,"Event"))).next();!u.done;u=i.next()){var l=j(u=u.value,"presentationTime",ic)||0,c=j(u,"duration",ic)||0;c=(l=l/s+t)+c/s,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<r||(u={schemeIdUri:a,value:o,startTime:l,endTime:c,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}(x,t.start,t.duration,i.value,e);if(e=P(t.node,"AdaptationSet").map(function(e){var t=x,n=E;function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.ja=sd(e,n.aa,null);var r,a=!1,o=(d=P(e,"Role")).map(function(e){return e.getAttribute("value")}).filter(pt),s=void 0,u=n.ja.contentType==me;u&&(s="subtitle");for(var l=(d=Se(d)).next();!l.done;l=d.next()){var c=(l=l.value).getAttribute("schemeIdUri");if(null==c||"urn:mpeg:dash:role:2011"==c)switch(l=l.getAttribute("value"),l){case"main":a=!0;break;case"caption":case"subtitle":s=l}}for(var d=null,l=!1,h=(c=Se(c=P(e,"EssentialProperty"))).next();!h.done;h=c.next()){var f=(h=h.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==f?d=h.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==f?r=i(parseInt(h.getAttribute("value"),10)):l=!0}for(h=(c=Se(c=P(e,"SupplementalProperty"))).next();!h.done;h=c.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(h=h.value).getAttribute("schemeIdUri")&&(r=i(parseInt(h.getAttribute("value"),10)));c=P(e,"Accessibility");for(var p=new Map,h=(c=Se(c)).next();!h.done;h=c.next())if(h=(f=h.value).getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==h)if(h=1,null!=f)for(var g=Se(f=f.split(";")),m=g.next();!m.done;m=g.next()){var v=m.value,y=m=void 0,y=v.includes("=")?(m=(v=v.split("="))[0].startsWith("CC")?v[0]:"CC"+v[0],v[1]||"und"):(m="CC"+h,2==f.length?h+=2:h++,v);p.set(m,I(y))}else p.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==h)if(h=1,null!=f)for(m=(f=Se(f.split(";"))).next();!m.done;m=f.next())v=g=void 0,v=(m=m.value).includes("=")?(g="svc"+(m=m.split("="))[0],m[1].split(",")[0].split(":").pop()):(g="svc"+h,h++,m),p.set(g,I(v));else p.set("svc1","und");else"urn:mpeg:dash:role:2011"==h&&null!=f&&(o.push(f),"captions"==f)&&(s="caption");if(l)return null;var b=uc(l=P(e,"ContentProtection"),t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),T=I(e.getAttribute("lang")||"und"),w=e.getAttribute("label");if((l=P(e,"Label"))&&l.length&&(l=l[0]).textContent&&(w=l.textContent),0==(e=(l=P(e,"Representation")).map(function(e){return(e=function(c,i,e,t,n,r,a,o,s,u){if(i.H=sd(u,i.ja,null),c.u=Math.min(c.u,i.H.xb),d=i.H,h=d.uc?1:0,!(0==(h=(h+=d.$a?1:0)+(d.vc?1:0))?d.contentType==me||"application"==d.contentType:(1!=h&&(d.uc&&(d.$a=null),d.vc=null),1)))return null;var l=i.W.start;i.bandwidth=j(u,"bandwidth",nc)||0;var d=(h=i.H.contentType)==me||"application"==h,h="image"==h;try{var f,p,g,m=function(e,t,n){return i=c,r=e,a=t,o=n,Re(function(e){return 1==e.g?(l=Di,s=Bo(r,a,o,i.g.retryParameters),u=i.h.networkingEngine,u=u.request(l,s),Ii(i.o,u),ke(e,u.promise,2)):(l=e.h,e.return(l.data))});var i,r,a,o,s,u,l};g=i.H.uc?function(e,n){var i,t=Number(pc(e,Sc,"presentationTimeOffset"))||0,r=pc(e,Sc,"timescale"),a=1,o=t/(a=r?nc(r)||1:a)||0,s=xc(e,Sc);if(Ac(t=e,s),kc(t))return i=ki(e),{zb:function(){var e=gc(i,Sc,"RepresentationIndex"),t=i.H.wa;return(e=e&&e.getAttribute("sourceURL"))&&(t=gt(i.H.wa,[e])),e=kc(i),Ec(i,n,s,t,e.start,e.end,o)}};throw new Ne(2,4,4002)}(i,m):i.H.$a?function(e,t){var n,i,r,a=xc(e,Cc),o=(r=[(i=n=e).H.$a,i.ja.$a,i.aa.$a].filter(pt).map(function(e){return P(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(e){return e.getAttribute("indexRange")&&!i.Ae&&(i.Ae=!0),{Qf:e.getAttribute("media"),start:(e=j(e,"mediaRange",ec,{start:0,end:null})).start,end:e.end}}),0==(u=(n=fc(n,Cc)).Kb)&&(u=1),o=0,n.ga?o=n.ga*(u-1):n.timeline&&0<n.timeline.length&&(o=n.timeline[0].start),{ga:n.ga,startTime:o,Kb:u,Sa:n.Sa,timeline:n.timeline,Eb:r});if(!o.ga&&!o.timeline&&1<o.Eb.length)throw new Ne(2,4,4002);if(!o.ga&&!e.W.duration&&!o.timeline&&1==o.Eb.length)throw new Ne(2,4,4002);if(o.timeline&&0==o.timeline.length)throw new Ne(2,4,4002);var s=null,u=null,l=(e.aa.id&&e.H.id&&(u=t[e.aa.id+","+e.H.id])&&(s=u.segmentIndex),function(e,t,n,i,r){var a=i.Eb.length;i.timeline&&i.timeline.length!=i.Eb.length&&(a=Math.min(i.timeline.length,i.Eb.length));for(var o=e-i.Sa,s=t?e+t:1/0,u=[],l=i.startTime,c={},d=0;d<a;c={ld:c.ld},d++){var h=i.Eb[d],f=(c.ld=gt(n,[h.Qf]),null!=i.ga?l+i.ga:i.timeline?i.timeline[d].end:l+t);u.push(new L(e+l,e+f,function(e){return function(){return e.ld}}(c),h.start,h.end,r,o,e,s)),l=f}return u}(e.W.start,e.W.duration,e.H.wa,o,a)),a=!s;return s?s.Fb(l,e.presentationTimeline.Pa()):s=new ne(l),e.presentationTimeline.Gb(l),e.Wa&&e.W.Ce||s.Xa(e.W.start,e.W.duration?e.W.start+e.W.duration:1/0,a),u&&(u.segmentIndex=s),{zb:function(){return s&&0!=s.J.length||s.nc(l),Promise.resolve(s)}}}(i,c.l):i.H.vc?Mc(i,m,c.l,!!c.i,c.g.dash.initialSegmentLimit,c.M):(f=i.H.wa,p=i.W.duration||0,{zb:function(){return Promise.resolve(ko(l,p,f))}})}catch(c){if((d||h)&&4002==c.code)return null;throw c}m=function(e,t,n){var i=uc(m,c.g.dash.ignoreDrmInfo,c.g.dash.keySystemsByURI);if(t.ue)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.ue=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(t){return i.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==t.drmInfos.length))throw new Ne(2,4,4008);return i.qe||t.qe}(m=P(u,"ContentProtection"),e);var m=new Set(m?[m]:[]),v=!1;P(u,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")})&&(v=!0);var y,b,T=!1;if(d&&(T=o.includes("forced_subtitle")||o.includes("forced-subtitle")),h&&!(y=(u=P(u,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))}))?u.getAttribute("value"):y))return null;u=i.H.codecs,i.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(u.includes("hvc1.2.4.L153.B0")||u.includes("hev1.2.4.L153.B0"))&&(b="PQ");var w=i.H.id?i.aa.id+","+i.H.id:"",x={id:c.G++,originalId:i.H.id,createSegmentIndex:function(){var t,n;return Re(function(e){if(1==e.g)return(t=w&&i.Wa&&c.l[w]?c.l[w]:x).segmentIndex?e.A(0):(n=t,ke(e,g.zb(),3));n.segmentIndex=e.h,Ae(e)})},closeSegmentIndex:function(){x.segmentIndex&&(x.segmentIndex.release(),x.segmentIndex=null)},segmentIndex:null,mimeType:i.H.mimeType,codecs:i.H.codecs,frameRate:i.H.frameRate,pixelAspectRatio:i.H.pixelAspectRatio,bandwidth:i.bandwidth,width:i.H.width,height:i.H.height,kind:t,encrypted:0<e.drmInfos.length,drmInfos:e.drmInfos,keyIds:m,language:n,label:r,type:i.ja.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:i.H.emsgSchemeIdUris,roles:o,forced:T,channelsCount:i.H.Vc,audioSamplingRate:i.H.audioSamplingRate,spatialAudio:v,closedCaptions:s,hdr:b,tilesLayout:y,matchedStreams:[]};return w&&i.Wa&&!c.l[w]&&(c.l[w]=x),x}(t,n,b,s,T,w,a,o,p,e))&&(e.hdr=e.hdr||r),e}).filter(function(e){return!!e})).length){if(d="image"==n.ja.contentType,t.g.dash.ignoreEmptyAdaptationSet||u||d)return null;throw new Ne(2,4,4003)}if(!n.ja.contentType||"application"==n.ja.contentType)for(n.ja.contentType=ld(e[0].mimeType,e[0].codecs),c=(u=Se(e)).next();!c.done;c=u.next())c.value.type=n.ja.contentType;for(c=(u=Se(e)).next();!c.done;c=u.next())for(c=c.value,f=(h=Se(b.drmInfos)).next();!f.done;f=h.next())(f=f.value).keyIds=f.keyIds&&c.keyIds?new Set([].concat(te(f.keyIds),te(c.keyIds))):f.keyIds||c.keyIds;return u=l.map(function(e){return e.getAttribute("id")}).filter(pt),{id:n.ja.id||"__fake__"+t.G++,contentType:n.ja.contentType,language:T,dh:a,streams:e,drmInfos:b.drmInfos,fe:d,bg:u}}).filter(pt),E.Wa){for(t=[],i=(n=Se(e)).next();!i.done;i=n.next())for(var r=(i=Se(i.value.bg)).next();!r.done;r=i.next())t.push(r.value);if(t.length!=new Set(t).size)throw new Ne(2,4,4018)}for(t=e.filter(function(e){return!e.fe}),n=(e=Se(e=e.filter(function(e){return e.fe}))).next();!n.done;n=e.next()){i=(n=n.value).fe.split(" ");for(var a=(r=Se(t)).next();!a.done;a=r.next()){var o=a.value;if(i.includes(o.id)){a={};for(var s=(o=Se(o.streams)).next();!s.done;a={Dc:a.Dc},s=o.next())a.Dc=s.value,a.Dc.trickModeVideo=n.streams.find(function(t){return function(e){return tn(t.Dc.codecs)==tn(e.codecs)}}(a))}}}if(n=x.g.disableAudio?[]:ad(t,"audio"),r=x.g.disableVideo?[]:ad(t,"video"),i=x.g.disableText?[]:ad(t,me),e=x.g.disableThumbnails?[]:ad(t,"image"),!r.length&&!n.length)throw new Ne(2,4,4004);for(t=[],a=(n=Se(n)).next();!a.done;a=n.next())t.push.apply(t,te(a.value.streams));for(n=[],a=(r=Se(r)).next();!a.done;a=r.next())n.push.apply(n,te(a.value.streams));for(r=[],a=(i=Se(i)).next();!a.done;a=i.next())r.push.apply(r,te(a.value.streams));for(i=[],a=(e=Se(e)).next();!a.done;a=e.next())i.push.apply(i,te(a.value.streams));return{id:E.aa.id,Fc:t,dd:n,textStreams:r,imageStreams:i}}(e,t,n,{start:d,duration:p,node:l,Ce:null==p||!c}),a.push(o),t.aa.id&&p&&(e.M[t.aa.id]=p),null==p){o=null;break}o=d+p}}return e.L=a.map(function(e){return e.id}),null!=r?{periods:a,duration:r,se:!1}:{periods:a,duration:o,se:!0}}(c,T,f,d),x=w.duration,E=w.periods,"static"!=k&&w.se||m.Ia(x||1/0),c.u&&!c.C&&c.h.isAutoLowLatencyMode()&&(c.h.enableLowLatencyMode(),c.C=c.h.isLowLatencyMode()),c.C?m.Ne(c.u):c.u&&J("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),m.Ld(g||1),ke(e,Dc(c.j,E,T.Wa),2);case 2:if(c.i)c.i.variants=c.j.l,c.i.textStreams=c.j.j.slice(),c.i.imageStreams=c.j.i,c.h.filter(c.i),e.A(3);else{if(c.i={presentationTimeline:m,variants:c.j.l,textStreams:c.j.j.slice(),imageStreams:c.j.i,offlineSessionIds:[],minBufferTime:p||0,sequenceMode:!1},m.Se())return S=P(d,"UTCTiming"),ke(e,(t=c,n=f,i=S,Re(function(e){switch(e.g){case 1:a=i.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),r=t.g.dash.clockSyncUri,!a.length&&r&&a.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),r=Se(a),a=r.next();case 2:if(a.done)e.A(4);else{switch(o=a.value,Ie(e,5),s=o.scheme,u=o.value,s){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return e.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return e.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return l=Date.parse(u),e.return(isNaN(l)?0:l-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":J("NTP UTCTiming scheme is not supported");break;default:J("Unrecognized scheme in UTCTiming element",s)}e.A(9)}break;case 7:return ke(e,ud(t,n,u,"HEAD"),10);case 10:return e.return(e.h);case 8:return ke(e,ud(t,n,u,"GET"),11);case 11:return e.return(e.h);case 9:Ce(e,3);break;case 5:Me(e);case 3:a=r.next(),e.A(2);break;case 4:return J("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),e.return(0)}})),5);e.A(4)}break;case 5:if(k=e.h,!c.h)return e.return();m.Oe(k);case 4:m.Gd();case 3:c.h.makeTextStreamsForClosedCaptions(c.i),Ae(e)}var t,n,i,r,a,o,s,u,l})}function ad(e,t){return e.filter(function(e){return e.contentType==t})}function od(e,t){e.F<0||e.D.R(Math.max(3,e.F-t,Y(e.I)))}function sd(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Vc:null,audioSamplingRate:null,xb:0},n=n||t.wa;for(var i=(m=P(e,"BaseURL")).map($l),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,s=j(e,"frameRate",ac)||t.frameRate,u=e.getAttribute("sar")||t.pixelAspectRatio,l=P(e,"InbandEventStream"),c=t.emsgSchemeIdUris.slice(),d=(l=Se(l)).next();!d.done;d=l.next())d=d.value.getAttribute("schemeIdUri"),c.includes(d)||c.push(d);var l=function(e){for(var t=(e=Se(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10))return t;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(l=P(e,"AudioChannelConfiguration"))||t.Vc,d=j(e,"audioSamplingRate",ic)||t.audioSamplingRate,r=r||ld(a,o),h=ql(e,"SegmentBase"),f=ql(e,"SegmentTemplate"),p=h&&j(h,"availabilityTimeOffset",rc)||0,g=f&&j(f,"availabilityTimeOffset",rc)||0,m=m&&m.length&&j(m[0],"availabilityTimeOffset",rc)||0;return m=t.xb+m+p+g,{wa:gt(n,i),uc:h||t.uc,$a:ql(e,"SegmentList")||t.$a,vc:f||t.vc,width:j(e,"width",ic)||t.width,height:j(e,"height",ic)||t.height,contentType:r,mimeType:a,codecs:o,frameRate:s,pixelAspectRatio:u,emsgSchemeIdUris:c,id:e.getAttribute("id"),Vc:l,audioSamplingRate:d,xb:m}}function ud(t,n,i,r){var a,o,s;return Re(function(e){if(1==e.g)return a=gt(n,[i]),(a=Mi(a,t.g.retryParameters)).method=r,a=t.h.networkingEngine.request(4,a),Ii(t.o,a),ke(e,a.promise,2);if(a=e.h,"HEAD"==r){if(!a.headers||!a.headers.date)return e.return(0);o=a.headers.date}else o=Pt(a.data);return s=Date.parse(o),isNaN(s)?e.return(0):e.return(s-Date.now())})}function ld(e,t){return on(Zt(e,t))?me:e.split("/")[0]}function cd(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function dd(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function be(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function hd(e,t){e=e.getAttribute(t);if(e)return e.value;throw new Ne(2,4,4023,t)}function fd(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function pd(e,t){this.name=e,this.value=t}function gd(e,t){return e.filter(function(e){return e.name==t})}function md(e,t){return e.filter(function(e){return hd(e,"TYPE")==t})}function vd(e,t){e=gd(e,t);return e.length?e[0]:null}function yd(e){return(e=vd(e,"EXT-X-MEDIA-SEQUENCE"))?Number(e.value):0}function bd(e,t){return gt([e],[t])[0]}function Td(e){this.h=e,this.g=0}function wd(e){xd(e,/[ \t]+/gm)}function xd(e,t){t.lastIndex=e.g;t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t};return e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Ed(e){return e.g!=e.h.length&&(e=xd(e,/[^ \t\n]*/gm))?e[0]:null}function Sd(){this.g=0}function kd(e,t,n){var i=(t=(t=Pt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Ne(2,4,4015);for(var r=!(t=0),a=Se(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Ad(e,o),--e.g,Id.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(a=[],r=!0,o=0;o<i.length;o++){var s=i[o],u=i[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=Ad(e,s),Cd.includes(s.name)){if(1!=t)throw new Ne(2,4,4017);for(var l=i.splice(o,i.length-o),i=n,r=[],o=[],u=[],s=null,c=(l=Se(l)).next();!c.done;c=l.next())c=c.value,/^(#EXT)/.test(c)?(c=Ad(e,c),Id.includes(c.name)?a.push(c):"EXT-X-MAP"==c.name?s=c:"EXT-X-PART"==c.name?u.push(c):"EXT-X-PRELOAD-HINT"==c.name?"PART"==be(c,"TYPE")?u.push(c):"MAP"==be(c,"TYPE")&&(c.name="EXT-X-MAP",s=c):o.push(c)):/^#(?!EXT)/m.test(c)||(c=bd(i,c.trim()),s&&o.push(s),r.push(new fd(c,o,u)),o=[],u=[]);return u.length&&(s&&o.push(s),r.push(new fd("",o,u))),new cd(n,t,a,r)}a.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new pd("URI",u)),r=!0)}}return new cd(n,t,a)}function Ad(e,t){e=e.g++;if(!(a=t.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new Ne(2,4,4016,t);var n,i,t=a[1],r=a[2],a=[];if(r){(i=xd(r=new Td(r),/^([^,=]+)(?:,|$)/g))&&(n=i[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=xd(r,o);)a.push(new pd(i[1],i[2]||i[3])),wd(r)}return new dd(e,t,a,n)}(n=nd.prototype).configure=function(e){this.g=e},n.start=function(t,n){var i,r=this;return Re(function(e){if(1==e.g)return r.C=n.isLowLatencyMode(),r.m=[t],r.h=n,ke(e,id(r),2);if(i=e.h,r.h&&od(r,i),r.h)return e.return(r.i);throw new Ne(2,7,7001)})},n.stop=function(){for(var e=Se(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},(this.j=null)!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},n.update=function(){var t,n=this;return Re(function(e){return 1==e.g?(Ie(e,2),ke(e,id(n),4)):2!=e.g?Ce(e,0):(t=Me(e),n.h&&t?(n.h.onError(t),void Ae(e)):e.return())})},n.onExpirationUpdated=function(){},t("shaka.dash.DashParser",nd),Ar.mpd=function(){return new nd},kr["application/dash+xml"]=function(){return new nd},kr["video/vnd.mpeg.dash.mpd"]=function(){return new nd},dd.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},dd.prototype.getAttribute=function(t){var e=this.g.filter(function(e){return e.name==t});return e.length?e[0]:null};var Id="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Cd="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Md(){}function Rd(e){try{var t=Nd(e);return bi({uri:e,Fe:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return vi(e)}}function Nd(e){var t=e.split(":");if(t.length<2||"data"!=t[0])throw new Ne(2,1,1004,e);if((t=t.slice(1).join(":").split(",")).length<2)throw new Ne(2,1,1004,e);var n=t[0],i=(e=N.decodeURIComponent(t.slice(1).join(",")),n=(t=n.split(";"))[0],!1);return 1<t.length&&"base64"==t[t.length-1]&&(i=!0,t.pop()),{data:(i?Gt:Ut)(e),contentType:n}}function Dd(){var e=this;this.h=this.i=null,this.La=1,this.o=new Map,this.u=new Map,this.va=new Set,this.g=new Map,this.j=null,this.M="",this.ca=new Sd,this.ia=0,this.T=!1,this.O=null,this.C=new A(function(){var t,n;t=e,Re(function(e){return 1==e.g?t.i?(Ie(e,2),ke(e,t.update(),4)):e.return():2!=e.g?(t.l!=$d&&(n=t.ia,t.C.R(n)),Ce(e,0)):(n=Me(e),t.i?(n.severity=1,t.i.onError(n),t.C.R(.1),void Ae(e)):e.return())})}),this.l=$d,this.I=null,this.ea=0,this.F=1/0,this.Y=this.ha=0,this.D=new Ai,this.G=[],this.L=new Map,this.s=new Map,this.da=new Map,this.m=!1}function _d(t,n){var i,r,a,o,s;return Re(function(e){if(1==e.g)return i=n.We,i=new Je(i),t.m&&n.af&&tt(i,new ct("_HLS_skip=YES")),ke(e,qd(t,i.toString()),2);if(i=e.h,1!=(r=kd(t.ca,i.data,i.uri)).type)throw new Ne(2,4,4017);a=gd(r.g,"EXT-X-DEFINE"),a=Pd(t,a),s=n.stream,a=Kd(t,r,s.type,n.mc,a),t.G.push(a),s.segmentIndex.Fb(a,t.j.Pa()),a.length&&(o=yd(r.g),o=n.mc.get(o),s.segmentIndex.eb(o)),s=a[a.length-1],vd(r.g,"EXT-X-ENDLIST")&&(n.ye=!0,n.lc=s.endTime),Ae(e)})}function Ld(e,t){e.stream.segmentIndex.offset(t),e.lc+=t;for(var n=Se(e.mc),i=n.next();!i.done;i=n.next()){var i=(r=Se(i.value)).next().value,r=r.next().value;e.mc.set(i,r+t)}}function Pd(e,t){for(var n=new Map,i=Se(t),r=i.next();!r.done;r=i.next()){var r=be(o=r.value,"NAME"),a=be(o,"VALUE"),o=be(o,"IMPORT");r&&a&&n.set(r,a),o&&(r=e.o.get(o))&&n.set(o,r)}return n}function Od(e,t){for(var n=[],i=(e.h.disableVideo||n.push(e.h.hls.defaultVideoCodec),e.h.disableAudio||n.push(e.h.hls.defaultAudioCodec),be(t,"CODECS",n.join(",")).split(/\s*,\s*/)),n=new Set,r=[],a=(i=Se(i)).next();!a.done;a=i.next()){var o=rn(a=a.value)[0];n.has(o)||(r.push(a),n.add(o))}return r}function jd(e){return I(e=be(e,"LANGUAGE")||"und")}function Ud(n,i){var r,a,o,s,u,l,c,d,h,f,p;return Re(function(e){var t;return 1==e.g?(r=hd(i,"GROUP-ID"),p="",t=hd(i,"TYPE").toLowerCase(),(a=t="subtitles"==t?me:t)!=me&&r&&n.s.has(r)&&(p=n.s.get(r)),o=Gd(hd(i,"URI"),n.o),n.g.has(o)?e.return(n.g.get(o)):(s=jd(i),u=be(i,"NAME"),l=be(i,"DEFAULT"),l="YES"==l,t="audio"==a&&(t=be(i,"CHANNELS"))?parseInt(t.split("/")[0],10):null,c=t,t="audio"==a&&!!(t=be(i,"CHANNELS"))&&t.includes("/JOC"),d=t,h=be(i,"CHARACTERISTICS"),f=be(i,"FORCED"),ke(e,Bd(n,o,p,a,s,l,u,c,null,h,"YES"==f,d),2))):(p=e.h,n.u.has(r)?n.u.get(r).push(p):n.u.set(r,[p]),n.g.has(o)?e.return(n.g.get(o)):(n.g.set(o,p),e.return(p)))})}function Bd(t,n,i,r,a,o,s,u,l,c,d,h){var f,p;return Re(function(e){return 1==e.g?(f=bd(t.M,n),ke(e,qd(t,f),2)):(p=e.h,f=p.uri,p=kd(t.ca,p.data,f),e.return(Fd(t,p,n,f,i,r,a,o,s,u,l,c,d,h)))})}function Fd(g,m,v,y,b,T,w,x,E,Q,J,S,Z,ee,k){var A,I,C,M,R,N,D,_,L,P,O,j,U,B,F,V,H,K,G,q,W,z,X,Y,$;return Re(function(e){if(1==e.g){if(1!=m.type)throw new Ne(2,4,4017);A=gd(m.g,"EXT-X-DEFINE"),A=Pd(g,A);var t=g,n=m,i=vd(n.g,"EXT-X-PLAYLIST-TYPE"),r=vd(n.g,"EXT-X-ENDLIST"),r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r;if(i=!r&&!i,r)Wd(t,$d);else{if(Wd(t,i?Jd:Qd),!(r=vd(n.g,"EXT-X-TARGETDURATION")))throw new Ne(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),i=vd(n.g,"EXT-X-PART-INF"),t.m&&i?(t.ha=Number(hd(i,"PART-TARGET")),t.F=Math.min(t.ha,t.F),i=vd(n.g,"EXT-X-SERVER-CONTROL"),t.Y=i?Number(hd(i,"PART-HOLD-BACK")):0):t.F=Math.min(r,t.F),t.ea=Math.max(r,t.ea)}return k?e.A(2):ke(e,(a=g,o=T,s=b,u=m,l=A,Re(function(e){if(1!=e.g)return p=e.h,(p=p.headers["content-type"])?e.return(p.split(";")[0]):o==c.X?e.return("text/vtt"):(p=h.mp4,e.return(p));if(c=bt,p=Di,d=Math.trunc((u.segments.length-1)/2),d=Gd(u.segments[d].i,l),f=new Je(d),f=f.ua.split(".").pop(),h=Xd[o],f=h[f])return e.return(f);if(o==c.X){if("vtt"==s||"wvtt"==s)return e.return("text/vtt");if(s&&""!==s)return e.return("application/mp4")}return o!=c.Ub||s&&"jpeg"!=s?((f=Mi([d],a.h.retryParameters)).method="HEAD",ke(e,zd(a,f,p),2)):e.return("image/jpeg")})),3)}var a,o,s,u,l,c,d,h,f,p;if(2!=e.g&&(k=e.h),I=[],m.segments)for(C=Se(m.segments),M=C.next();!M.done;M=C.next())R=M.value,R=gd(R.g,"EXT-X-KEY"),I.push.apply(I,te(R));for(D=N=!1,_=[],L=new Set,P=Se(I),O=P.next();!O.done;O=P.next())if(j=O.value,"NONE"!=(U=hd(j,"METHOD")))if(N=!0,"AES-128"==U)D=!0;else if(U=hd(j,"KEYFORMAT"),U=(U=Yd[U])?U(j,k):null){if(U.keyIds)for(B=Se(U.keyIds),F=B.next();!F.done;F=B.next())V=F.value,L.add(V);_.push(U)}if(N&&!_.length&&!D)throw new Ne(2,4,4026);if(ro.includes(k)&&(b=""),H=new Map,$=Kd(g,m,T,H,A),K=$[$.length-1].endTime,$=new ne($),G=T==me?"subtitle":void 0,q=[],S)for(W=Se(S.split(",")),z=W.next();!z.done;z=W.next())X=z.value,q.push(X);return Y=!!(Y=vd(m.g,"EXT-X-SERVER-CONTROL"))&&null!=Y.getAttribute("CAN-SKIP-UNTIL"),$={id:g.La++,originalId:E,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:$,mimeType:k,codecs:b,kind:G,encrypted:N,drmInfos:_,keyIds:L,language:w,label:E,type:T,primary:x,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:q,forced:Z,channelsCount:Q,audioSamplingRate:null,spatialAudio:ee,closedCaptions:J,hdr:void 0,tilesLayout:void 0},e.return({stream:$,cd:v,We:y,lc:K,mc:H,af:Y,ye:!1})})}function Vd(e,t){var n=0,i=null;return t&&(n=t.split("@"),i=Number(n[0]),i=(n=n[1]?Number(n[1]):e.la+1)+i-1),[n,i]}function Hd(e){if(e.j){for(var t=Se(e.G),n=t.next();!n.done;n=t.next())e.j.Gb(n.value);e.G=[]}}function Kd(e,t,n,i,r){var a=t.segments,o=void 0,s=yd(t.g),u=vd(t.g,"EXT-X-SKIP"),l=s+(u=u?Number(be(u,"SKIPPED-SEGMENTS")):0),c=0;e.l!=$d&&i.has(l)&&(c=i.get(l));for(var d=[],h=null,f=0;f<a.length;f++){for(var p=a[f],g=0==f?c:h.endTime,l=s+u+f,m=Se(p.g),v=m.next();!v.done;v=m.next())"EXT-X-KEY"==(v=v.value).name&&"AES-128"==hd(v,"METHOD")&&(o=function(i,e,t){if(!N.crypto||!N.crypto.subtle)throw J("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ne(2,4,4042);var n=0,r=be(e,"IV","");if(r){var a=qt(r.substr(2));if(16!=a.byteLength)throw new Ne(2,4,4043)}else n=yd(t.g);var o=Mi([e=bd(t.h,hd(e,"URI"))],i.h.retryParameters),s={method:"AES-128",iv:a,firstMediaSequenceNumber:n,fetchKey:function(){var t,n;return Re(function(e){if(1==e.g)return ke(e,zd(i,o,6),2);if(3!=e.g){if((t=e.h).data&&16==t.data.byteLength)return n=s,ke(e,N.crypto.subtle.importKey("raw",t.data,"AES-CBC",!0,["decrypt"]),3);throw new Ne(2,4,4044)}n.cryptoKey=e.h,s.fetchKey=void 0,Ae(e)})}};return s}(e,v,t));i.set(l,g),m=function(e,t,n,i){return(n=vd(n,"EXT-X-MAP"))?(t=[i=Gd(bd(t,hd(n,"URI")),i),be(n,"BYTERANGE","")].join("-"),e.da.has(t)||(r=i,i=0,a=null,(o=be(n,"BYTERANGE"))&&(i=o.split("@"),a=Number(i[0]),a=(i=Number(i[1]))+a-1),n=new _a(function(){return[r]},i,a),e.da.set(t,n)),e.da.get(t)):null;var r,a,o}(e,t.h,p.g,r),!e.m&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.m=e.i.isLowLatencyMode()),!(h=p=function(e,t,n,i,r,a,o,s,u){var l,c=i.g,d=Gd(i.i,a),h=vd(c,"EXTINF"),f=a=0,p=null,g=(i.h.length&&!e.m&&J("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),null);if(e.h.hls.ignoreManifestProgramDateTime||(l=vd(c,"EXT-X-PROGRAM-DATE-TIME"))&&l.value&&(g=Jl(l.value)),l=La,vd(c,"EXT-X-GAP")&&(l=2),!h){if(0==i.h.length)throw new Ne(2,4,4024,"EXTINF");if(!e.m)return null}var m=[];if(e.m)for(var v={},y=0;y<i.h.length;v={md:v.md},y++){var b,T,w=i.h[y],x=0==y?n:m[m.length-1],E=0==y?r:x.endTime,S=Number(be(w,"DURATION"))||e.ha;S&&(S=E+S,b=0,T=null,"EXT-X-PRELOAD-HINT"==w.name?b=(b=be(w,"BYTERANGE-START"))?Number(b):0:(b=(T=Se(Vd(x,b=be(w,"BYTERANGE")))).next().value,T=T.next().value),x=be(w,"URI"))&&(v.md=bd(o,x),x=La,"YES"==be(w,"GAP")&&(x=2),m.push(new L(E,S,function(e){return function(){return[e.md]}}(v),b,T,t,0,0,1/0,[],"",null,null,x)))}return a=h?r+Number(h.value.split(",")[0]):m[m.length-1].endTime,(e=vd(c,"EXT-X-BYTERANGE"))?(f=(p=Se(Vd(n,e.value))).next().value,p=p.next().value):m.length&&(f=m[0].Ca,p=m[m.length-1].la),n="",e=null,"image"==s&&(n="1x1",s=vd(c,"EXT-X-TILES"))&&(n=hd(s,"LAYOUT"),(s=be(s,"DURATION"))&&(e=Number(s))),new L(r,a,function(){return d.length?[d]:[]},f,p,t,0,0,1/0,m,n,e,g,l,u)}(e,m,h,p,g,r,t.h,n,o))||e.h.hls.ignoreManifestProgramDateTime&&null!=e.O&&l<e.O||d.push(p)}if(e=d.some(function(e){return null!=e.g}))for(t={},n=0;n<d.length;t={Pb:t.Pb,Ob:t.Ob,yc:t.yc,Ta:t.Ta,Nb:t.Nb},n++)if(t.Ta=d[n],null==t.Ta.g)for(t.Ob=0,t.Pb=n,i=function(t){return function(){var e=d[t.Pb];if(e){if(null!=e.g)return e.g+t.Ob;t.Ob-=e.endTime-e.startTime,t.Pb+=1}return null}}(t),t.Nb=0,t.yc=n,r=function(t){return function(){var e=d[t.yc];if(e){if(e!=t.Ta&&(t.Nb+=e.endTime-e.startTime),null!=e.g)return e.g+t.Nb;--t.yc}return null}}(t);null==t.Ta.g;)t.Ta.g=r(),null==t.Ta.g&&(t.Ta.g=i());if(e)for(t=(e=Se(d)).next();!t.done;t=e.next())for(t=(n=t.value).g,i=(n=Se(n.h)).next();!i.done;i=n.next())(i=i.value).g=t,t+=i.endTime-i.startTime;return d}function Gd(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=Se(i)).next();!r.done;r=i.next()){var a=(r=r.value).slice(2,r.length-1),o=t.get(a);if(!o)throw new Ne(2,4,4039,a);n=n.replace(r,o)}return n}function qd(e,t){t=Mi([t],e.h.retryParameters);return e.i.modifyManifestRequest(t,{format:"h"}),zd(e,t,0)}function Wd(e,t){e.l=t,e.j&&e.j.wc(e.l==$d),e.l==$d&&e.C.stop()}function zd(e,t,n){if(e.D)return t=e.i.networkingEngine.request(n,t),Ii(e.D,t),t.promise;throw new Ne(2,7,7001)}t("shaka.net.DataUriPlugin",Md),Ci("data",Md.parse=Rd),(n=Dd.prototype).configure=function(e){this.h=e},n.start=function(t,n){var i,r=this;return Re(function(e){return 1==e.g?(r.i=n,r.m=n.isLowLatencyMode(),ke(e,qd(r,t),2)):3!=e.g?(i=e.h,r.M=i.uri,ke(e,(U=r,B=i.data,F=t,Re(function(e){switch(e.g){case 1:ee=kd(U.ca,B,U.M),V=gd(ee.g,"EXT-X-DEFINE");for(var t=U,n=Se(V),i=n.next();!i.done;i=n.next()){var i=be(r=i.value,"NAME"),r=be(r,"VALUE");i&&r&&(t.o.has(i)||t.o.set(i,r))}if(V=[],H=[],K=[],1==ee.type)return J=U.h.hls.mediaPlaylistFullMimeType,$=J.split(";")[0],Q=$.split("/")[0],J=nn(J),Z=new Map,ke(e,Fd(U,ee,F,F,J,Q,"",!0,"Media Playlist",null,Z,null,!1,!1,$),8);J=gd(ee.g,"EXT-X-MEDIA"),Z=gd(ee.g,"EXT-X-STREAM-INF"),$=gd(ee.g,"EXT-X-IMAGE-STREAM-INF");for(var a=U,o=Se(Z),s=o.next();!s.done;s=o.next()){var u,l=be(d=s.value,"AUDIO"),s=be(d,"VIDEO"),c=be(d,"SUBTITLES"),d=Od(a,d);c&&(u=yt(me,d),a.s.set(c,u),Le(d,u)),l&&(c=vt("audio",d),a.s.set(l,c)),s&&(l=vt("video",d),a.s.set(s,l))}for(ee=gd(ee.g,"EXT-X-SESSION-DATA"),G=Se(ee),q=G.next();!q.done;q=G.next())z=q.value,X=be(z,"DATA-ID"),Y=be(z,"URI"),W=be(z,"LANGUAGE"),z=be(z,"VALUE"),X=(new Map).set("id",X),Y&&X.set("uri",bd(U.M,Y)),W&&X.set("language",W),z&&X.set("value",z),Y=new ve("sessiondata",X),U.i&&U.i.onEvent(Y);return ke(e,(O=U,P=J,Re(function(e){return P=P.filter(function(e){var t=be(e,"URI")||"";return"SUBTITLES"!=be(e,"TYPE")&&""!=t}),j=P.map(function(e){return Ud(O,e)}),ke(e,Promise.all(j),0)})),4);case 4:for(var h=U,f=md(J,"CLOSED-CAPTIONS"),p=(f=Se(f)).next();!p.done;p=f.next()){var p=jd(m=p.value),g=hd(m,"GROUP-ID"),m=hd(m,"INSTREAM-ID");h.L.get(g)||h.L.set(g,new Map),h.L.get(g).set(m,p)}return ke(e,(N=U,D=Z,Re(function(e){return 1==e.g?(_=D.map(function(S){var k,A,I,C,M,R;return Re(function(e){if(1==e.g)return k=be(S,"FRAME-RATE"),A=Number(be(S,"AVERAGE-BANDWIDTH"))||Number(hd(S,"BANDWIDTH")),R=be(S,"RESOLUTION"),R=Se(R?R.split("x"):[null,null]),I=R.next().value,C=R.next().value,M=be(S,"VIDEO-RANGE"),ke(e,(d=N,h=S,Re(function(e){{if(1==e.g)return f=bt,p=Od(d,h),g=be(h,"AUDIO"),v=be(h,"VIDEO"),x=(x=g||v)&&d.u.has(x)?d.u.get(x):[],v=!(g={audio:g?x:[],video:v?x:[]}),y=hd(h,"URI"),b=g.audio.find(function(e){return e&&e.cd==y}),T=yt(f.ra,p),(w=yt(f.cb,p))&&!T?m=f.cb:!x.length&&w&&T?(m=f.ra,p=[[T,w].join()]):g.audio.length&&b?(m=f.cb,v=!0):m=g.video.length?f.cb:f.ra,v?e.A(2):ke(e,(r=d,a=h,o=p,s=m,Re(function(e){var t;return 1==e.g?(u=Gd(hd(a,"URI"),r.o),r.g.has(u)?e.return(r.g.get(u)):(t=be(a,"CLOSED-CAPTIONS"),l="video"==s&&t&&"NONE"!=t?r.L.get(t):null,c=vt(s,o),ke(e,Bd(r,u,c,s,"und",!1,null,null,l,null,!1,!1),2))):(c=e.h,r.g.has(u)?e.return(r.g.get(u)):(r.g.set(u,c),e.return(c)))})),3);2!=e.g&&(x=e.h,g[x.stream.type]=[x]);for(var t=g,n,i=(t=Se(t.audio.concat(t.video))).next();!i.done;i=t.next())(i=i.value)&&(n=(n=i.stream.codecs.split(",")).filter(function(e){return"mp4a.40.34"!=e}),i.stream.codecs=n.join(","));return e.return(g)}var r,a,o,s,u,l,c})),2);var d,h,f,p,g,m,v,y,b,T,w,x;R=e.h;for(var t=e.return,n=R.audio,i=R.video,r=Se(i),a=r.next();!a.done;a=r.next())(a=a.value.stream)&&(a.width=Number(I)||void 0,a.height=Number(C)||void 0,a.frameRate=Number(k)||void 0,a.hdr=M||void 0);for(r=N.h.disableAudio,n.length&&!r||(n=[null]),r=N.h.disableVideo,i.length&&!r||(i=[null]),r=[],a=(n=Se(n)).next();!a.done;a=n.next())for(var a=a.value,o=Se(i),s=o.next();!s.done;s=o.next()){var u=s.value,s=a?a.stream:null,l=u?u.stream:null,c=a?a.stream.drmInfos:null,E=u?u.stream.drmInfos:null,u=(u?u.cd:"")+" - "+(a?a.cd:"");s&&l&&c.length&&E.length&&!(0<fr(c,E).length)||N.va.has(u)||(s={id:N.La++,language:s?s.language:"und",primary:!!s&&s.primary||!!l&&l.primary,audio:s,video:l,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(s),N.va.add(u))}return t.call(e,r)})}),ke(e,Promise.all(_),2)):(_=e.h,L=(L=_.reduce(ht,[])).filter(function(e){return null!=e}),e.return(L))})),5);case 5:return V=e.h,ke(e,(T=U,w=J,Re(function(e){if(1==e.g)return x=md(w,"SUBTITLES"),E=x.map(function(t){var n;return Re(function(e){if(1==e.g)return T.h.disableText?e.return(null):(Ie(e,2),ke(e,Ud(T,t),4));if(2!=e.g)return n=e.h,e.return(n.stream);if(n=Me(e),T.h.hls.ignoreTextStreamFailures)return e.return(null);throw n})}),ke(e,Promise.all(E),2);for(E=e.h,S=Se(x),k=S.next();!k.done;k=S.next())if(A=k.value,A=hd(A,"GROUP-ID"),(I=T.s.get(A))&&(C=T.u.get(A)))for(M=Se(C),R=M.next();!R.done;R=M.next())R.value.stream.codecs=I;return e.return(E.filter(function(e){return e}))})),6);case 6:return H=e.h,ke(e,(v=U,y=$,Re(function(e){return 1==e.g?(b=y.map(function(l){var c;return Re(function(e){if(1==e.g)return v.h.disableThumbnails?e.return(null):(Ie(e,2),ke(e,(t=v,n=l,Re(function(e){return 1==e.g?(i=Gd(hd(n,"URI"),t.o),r=be(n,"CODECS","jpeg")||"",t.g.has(i)?e.return(t.g.get(i)):(a=jd(n),o=be(n,"NAME"),s=be(n,"CHARACTERISTICS"),ke(e,Bd(t,i,r,"image",a,!1,o,null,null,s,!1,!1),2))):(r=e.h,t.g.has(i)?e.return(t.g.get(i)):((a=be(n,"RESOLUTION"))&&(o=r.stream.segmentIndex.get(0),s=o.tilesLayout)&&(r.stream.width=Number(a.split("x")[0])*Number(s.split("x")[0]),r.stream.height=Number(a.split("x")[1])*Number(s.split("x")[1])),(u=be(n,"BANDWIDTH"))&&(r.stream.bandwidth=Number(u)),t.g.set(i,r),e.return(r)))})),4));var t,n,i,r,a,o,s,u;if(2!=e.g)return c=e.h,e.return(c.stream);if(c=Me(e),v.h.hls.ignoreImageStreamFailures)return e.return(null);throw c})}),ke(e,Promise.all(b),2)):(b=e.h,e.return(b.filter(function(e){return e})))})),7);case 7:K=e.h,e.A(3);break;case 8:ee=e.h,U.g.set(F,ee),V.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==Q?ee.stream:null,video:"video"==Q?ee.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!U.i)throw new Ne(2,7,7001);for((U.h.hls.ignoreManifestProgramDateTime?function(e){if(!e.T){for(var t=-1,n=new Map,i=Se(e.g.values()),r=i.next();!r.done;r=i.next()){var a=(r=r.value).stream.segmentIndex;if(a=a&&(a.J[0]||null))for(var o=Se(r.mc),s=o.next();!s.done;s=o.next()){var u=(s=Se(s.value)).next().value;if(s.next().value==a.startTime){n.set(r,u),t=Math.max(t,u);break}}}if(!(t<0)){for(e.O=t,r=(t=Se(e.g.values())).next();!r.done;r=t.next())(r=(i=r.value).stream.segmentIndex)&&(a=e.O-n.get(i),r.J.splice(0,a),r=r.J[0]||null)&&Ld(i,-r.startTime);e.T=!0}}}:function(e){if(!e.T){for(var t=1/0,n=Se(e.g.values()),i=n.next();!i.done;i=n.next())(i=i.value.stream.segmentIndex)&&null!=(i=i.J[0]||null)&&null!=i.g&&(t=Math.min(t,i.g));if(1/0!=t){for(i=(n=Se(e.g.values())).next();!i.done;i=n.next()){var r=(i=i.value).stream.segmentIndex;null!=r&&(null==(r=r.J[0]||null).g?Te("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.cd,"Expect AV sync issues!"):Ld(i,r.g-t-r.startTime))}e.T=!0}}})(U),te=1/0,ne=Se(U.g.values()),ie=ne.next();!ie.done;ie=ne.next())"text"!=(re=ie.value).stream.type&&(te=Math.min(te,re.lc));if(U.l!=$d?(U.j=new ye(0,U.h.defaultPresentationDelay||U.Y||3*U.ea),U.j.wc(!1)):(U.j=new ye(null,0),U.j.wc(!0)),U.l!=$d)U.ia=U.F,U.l==Zd.Ue&&(ae=U.j.$c,isNaN(U.h.availabilityWindowOverride)||(ae=U.h.availabilityWindowOverride),U.j.ce(ae));else for(U.j.Ia(te),oe=Se(U.g.values()),ie=oe.next();!ie.done;ie=oe.next())ie.value.stream.segmentIndex.Xa(0,te);for(U.G=[],se=[],ue=Se(V),le=ue.next();!le.done;le=ue.next())for(ce=le.value,de=Se([ce.video,ce.audio]),he=de.next();!he.done;he=de.next())(fe=he.value)&&se.push(fe);return ke(e,Promise.all(se.map(function(t){return Re(function(e){return ke(e,t.createSegmentIndex(),0)})})),9);case 9:for(pe=Se(se),he=pe.next();!he.done;he=pe.next())ge=he.value,U.G.push(ge.segmentIndex.J);Hd(U),U.j.Gd(),U.I={presentationTimeline:U.j,variants:V,textStreams:H,imageStreams:K,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},U.i.makeTextStreamsForClosedCaptions(U.I),Ae(e)}var v,y,b,T,w,x,E,S,k,A,I,C,M,R,N,D,_,L,O,P,j})),3)):(0<(i=r.ia)&&r.C.R(i),e.return(r.I));var U,B,F,V,H,K,G,q,W,z,X,Y,$,Q,J,Z,ee,te,ne,ie,re,ae,oe,se,ue,le,ce,de,he,fe,pe,ge})},n.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.D&&(e.push(this.D.destroy()),this.D=null),this.h=this.i=null,this.va.clear(),this.I=null,this.g.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},n.update=function(){var t,n,i,r,a=this;return Re(function(e){if(1==e.g)return a.l==$d?e.return():(t=[],(n=Array.from(a.g.values())).length?ke(e,_d(a,n[0]),2):e.A(2));if(4!=e.g){for(i=1;i<n.length;i++)t.push(_d(a,n[i]));return ke(e,Promise.all(t),4)}Hd(a),n.some(function(e){return 0==e.ye})||(Wd(a,Zd.Ve),r=n.map(function(e){return e.lc}),a.j.Ia(Math.min.apply(Math,te(r))),a.i.updateDuration()),Ae(e)})},n.onExpirationUpdated=function(){},t("shaka.hls.HlsParser",Dd);var Xd={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Yd={"com.apple.streamingkeydelivery":function(e,t){if("video/mp2t"==t)throw new Ne(2,4,4040);if(N.shakaMediaKeysPolyfill)throw new Ne(2,4,4041);return mt("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0)}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=hd(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=mt("com.widevine.alpha",[{initDataType:"cenc",initData:t=D((t=Nd(t=hd(e,"URI"))).data)}]),(e=be(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=hd(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?mt("com.microsoft.playready",[{initDataType:"cenc",initData:e=Ji(e=D((e=Nd(e=hd(e,"URI"))).data),new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null}},$d="VOD",Qd="EVENT",Jd="LIVE",Zd={Ve:$d,Bg:Qd,Ue:Jd};function eh(e,t,n,i,r,a){if(200<=n&&n<=299&&202!=n)return{uri:r||i,Fe:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=jt(t)}catch(e){}throw new Ne(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function th(){}function nh(e,t,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,T,w,x,E=new uh,S=(Bi(t.headers).forEach(function(e,t){E.append(t,e)}),new oh),k={ne:!1,Re:!1};return o=e,s=n,u={body:t.body||void 0,headers:E,method:t.method,signal:S.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},l=k,c=i,d=r,h=t.streamDataCallback,e=new C(e=Re(function(e){switch(e.g){case 1:return T=ah,f=sh,v=m=0,y=Date.now(),Ie(e,2),ke(e,T(o,u),4);case 4:return p=e.h,d(ih(p.headers)),b=p.clone().body.getReader(),w=(T=p.headers.get("Content-Length"))?parseInt(T,10):0,new f({start:function(r){!function t(){var n,i;Re(function(e){switch(e.g){case 1:return Ie(e,2),ke(e,b.read(),4);case 4:n=e.h,Ce(e,3);break;case 2:return Me(e),e.return();case 3:if(!n.done&&(m+=n.value.byteLength,h))return ke(e,h(n.value),5);e.A(5);break;case 5:(100<(i=Date.now())-y||n.done)&&(c(i-y,m-v,w-m),v=m,y=i),n.done?r.close():(r.enqueue(n.value),t()),Ae(e)}})}()}}),ke(e,p.arrayBuffer(),5);case 5:g=e.h,Ce(e,3);break;case 2:if(x=Me(e),l.ne)throw new Ne(1,1,7001,o,s);if(l.Re)throw new Ne(1,1,1003,o,s);throw new Ne(1,1,1002,o,x,s);case 3:return x=ih(p.headers),e.return(eh(x,g,p.status,o,p.url,s))}}),function(){return k.ne=!0,S.abort(),Promise.resolve()}),(t=t.retryParameters.timeout)&&((a=new A(function(){k.Re=!0,S.abort()})).R(t/1e3),e.finally(function(){a.stop()})),e}function ih(e){var n={};return e.forEach(function(e,t){n[t.trim()]=e}),n}function rh(){if(!N.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!N.fetch||!N.AbortController)}m("Tizen 3")||m("Tizen 2")||It()||(Ar.m3u8=function(){return new Dd},kr["application/x-mpegurl"]=function(){return new Dd},kr["application/vnd.apple.mpegurl"]=function(){return new Dd}),t("shaka.net.HttpFetchPlugin",th),th.isSupported=rh,th.parse=nh;var ah=N.fetch,oh=N.AbortController,sh=N.ReadableStream,uh=N.Headers;function lh(){}function ch(a,n,o,s,u){var l=new hh,c=Date.now(),d=0;return new C(new Promise(function(i,r){l.open(n.method,a,!0),l.responseType="arraybuffer",l.timeout=n.retryParameters.timeout,l.withCredentials=n.allowCrossSiteCredentials;var e,t=!(l.onabort=function(){r(new Ne(1,1,7001,a,o))});for(e in l.onreadystatechange=function(){var e;2!=l.readyState||t||(e=dh(l),u(e),t=!0)},l.onload=function(){var e=dh(l),t=l.response;try{var n=eh(e,t,l.status,a,l.responseURL,o);i(n)}catch(e){r(e)}},l.onerror=function(e){r(new Ne(1,1,1002,a,e,o))},l.ontimeout=function(){r(new Ne(1,1,1003,a,o))},l.onprogress=function(e){var t=Date.now();(100<t-c||e.lengthComputable&&e.loaded==e.total)&&(s(t-c,e.loaded-d,e.total-e.loaded),d=e.loaded,c=t)},n.headers)l.setRequestHeader(e.toLowerCase(),n.headers[e]);l.send(n.body)}),function(){return l.abort(),Promise.resolve()})}function dh(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=Se(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}rh()&&(Ci("http",nh,2,!0),Ci("https",nh,2,!0),Ci("blob",nh,2,!0)),t("shaka.net.HttpXHRPlugin",lh);var hh=N.XMLHttpRequest;function fh(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function ph(e){return e.ya().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Ca+":"+e.la}function gh(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function mh(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function vh(e){var t=this;this.o=e,this.j=new Map,this.i=new Pi(function(){return yh(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new gh}function yh(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function bh(f,e,p,g,m,v){O(f.i);var t=(f.j.get(e)||Promise.resolve()).then(function(){var s,u,l,c,d,h;return Re(function(e){if(1==e.g)return ke(e,(t=f,n=p,Re(function(e){return 1==e.g?(i=t.o.request(Di,n),r=function(){return i.abort()},t.h.push(r),ke(e,i.promise,2)):(a=e.h,Le(t.h,r),e.return(a.data))})),2);var t,n,i,r,a;if(s=e.h,f.i.g)throw new Ne(2,9,7001);if(m)for(c in u=D(s),(l=new Qi(u)).data)h=Number(c),d=l.data[h],h=l.g[h],f.l(d,h);f.g.close(g,s.byteLength);var o=f.g;return f.m(0==o.i?0:o.j/o.i,f.g.h),e.return(v(s))})});f.j.set(e,t)}function Th(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new R,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function wh(t,r){return new Promise(function(n,e){var i=t.h.openCursor();i.onerror=e,i.onsuccess=function(){var t;return Re(function(e){if(1==e.g)return null==i.result?(n(),e.return()):(t=i.result,ke(e,r(t.key,t.value,t),2));t.continue(),Ae(e)})}})}function xh(e){this.h=e,this.g=[]}function Eh(e,t){return Sh(e,t,"readwrite")}function Sh(e,t,n){var i=new Th(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then(function(){Le(e.g,i)},function(){Le(e.g,i)}),i}function kh(e,t,n){this.h=new xh(e),this.i=t,this.g=n}function Ah(e){return Promise.reject(new Ne(2,9,9011,"Cannot add new value to "+e))}function Ih(e,t,n,i){t=(e=Eh(e.h,t)).store();for(var r={},a=(n=Se(n)).next();!a.done;r={Bc:r.Bc},a=n.next())r.Bc=a.value,t.delete(r.Bc).onsuccess=function(e){return function(){return i(e.Bc)}}(r);return e.promise()}function Ch(t,n,i){var r,a,o,s,u,l,c;return Re(function(e){if(1==e.g){for(r=Sh(t.h,n,"readonly"),a=r.store(),o={},s=[],u={},l=Se(i),c=l.next();!c.done;u={Tb:u.Tb,Rb:u.Rb},c=l.next())u.Rb=c.value,u.Tb=a.get(u.Rb),u.Tb.onsuccess=function(e){return function(){null==e.Tb.result&&s.push(e.Rb),o[e.Rb]=e.Tb.result}}(u);return ke(e,r.promise(),2)}if(s.length)throw new Ne(2,9,9012,"Could not find values for "+s);return e.return(i.map(function(e){return o[e]}))})}function Mh(e){this.g=new xh(e)}function Rh(){this.g=new Map}function Nh(e){var i=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,t){e.hasFixedKeySpace()||(i=i||{path:{Aa:n,ka:t},ka:e})})}),i)return i;throw new Ne(2,9,9013,"Could not find a cell that supports add-operations")}function Dh(e,t,n){if(!(e=e.g.get(t)))throw new Ne(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n))return t;throw new Ne(2,9,9013,"Could not find cell with name "+n)}function _h(e,t){Lh.set(e,t)}Ci("http",lh.parse=ch,1,!0),Ci("https",ch,1,!0),Ci("blob",ch,1,!0),gh.prototype.close=function(e,t){var n;this.g.has(e)&&(n=this.g.get(e),this.g.delete(e),this.j+=n,this.h+=t)},vh.prototype.destroy=function(){return this.i.destroy()},Th.prototype.abort=function(){var t=this;return Re(function(e){if(1==e.g){try{t.i.abort()}catch(e){}return Ie(e,2),ke(e,t.g,4)}if(2!=e.g)return Ce(e,0);Me(e),Ae(e)})},Th.prototype.store=function(){return this.h},Th.prototype.promise=function(){return this.g},xh.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(n=kh.prototype).destroy=function(){return this.h.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return Ah(this.i)},n.removeSegments=function(e,t){return Ih(this,this.i,e,t)},n.getSegments=function(t){var n,i=this;return Re(function(e){return 1==e.g?ke(e,Ch(i,i.i,t),2):(n=e.h,e.return(n.map(function(e){return i.oe(e)})))})},n.addManifests=function(){return Ah(this.g)},n.updateManifest=function(){return Promise.reject(new Ne(2,9,9016,"Cannot modify values in "+this.g))},n.updateManifestExpiration=function(t,n){var e=Eh(this.h,this.g),i=e.store();return i.get(t).onsuccess=function(e){(e=e.target.result)&&(e.expiration=n,i.put(e,t))},e.promise()},n.removeManifests=function(e,t){return Ih(this,this.g,e,t)},n.getManifests=function(t){var n,i=this;return Re(function(e){return 1==e.g?ke(e,Ch(i,i.g,t),2):(n=e.h,e.return(Promise.all(n.map(function(e){return i.bc(e)}))))})},n.getAllManifests=function(){var t,r,a=this;return Re(function(e){return 1==e.g?(t=Sh(a.h,a.g,"readonly"),r=new Map,ke(e,wh(t,function(t,n){var i;return Re(function(e){if(1==e.g)return ke(e,a.bc(n),2);i=e.h,r.set(t,i),Ae(e)})}),2)):3!=e.g?ke(e,t.promise(),3):e.return(r)})},n.oe=function(e){return e},n.bc=function(e){return Promise.resolve(e)},n.add=function(t,n){var i,r,a,o,s,u,l,c=this;return Re(function(e){if(1!=e.g)return e.return(a);for(i=Eh(c.h,t),r=i.store(),a=[],o={},s=Se(n),u=s.next();!u.done;o={Cc:o.Cc},u=s.next())l=u.value,o.Cc=r.add(l),o.Cc.onsuccess=function(e){return function(){a.push(e.Cc.result)}}(o);return ke(e,i.promise(),2)})},Mh.prototype.destroy=function(){return this.g.destroy()},Mh.prototype.getAll=function(){var t,n,i=this;return Re(function(e){return 1==e.g?(t=Sh(i.g,"session-ids","readonly"),n=[],ke(e,wh(t,function(e,t){n.push(t)}),2)):3!=e.g?ke(e,t.promise(),3):e.return(n)})},Mh.prototype.add=function(e){for(var t=Eh(this.g,"session-ids"),n=t.store(),i=(e=Se(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Mh.prototype.remove=function(i){var t,n=this;return Re(function(e){return 1==e.g?ke(e,wh(t=Eh(n.g,"session-ids"),function(e,t,n){i.includes(t.sessionId)&&n.delete()}),2):ke(e,t.promise(),0)})},Rh.prototype.destroy=function(){for(var e=[],t=Se(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Rh.prototype.init=function(){var n=this;Lh.forEach(function(e,t){e=e();e&&n.g.set(t,e)});for(var e=[],t=Se(this.g.values()),i=t.next();!i.done;i=t.next())e.push(i.value.init());return Promise.all(e)},t("shaka.offline.StorageMuxer",Rh),Rh.unregister=function(e){Lh.delete(e)},Rh.register=_h;var Lh=new Map;function Ph(){kh.apply(this,arguments)}function Oh(o,s){var e=o,t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=Se(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=Se(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length)for(var r=n++,i=(a=Se(e)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(!e.length&&t.length)for(r=n++,i=(a=Se(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=Se(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=Se(e)).next();!a.done;a=r.next()){var a=a.value,u=n++;i.variantIds.push(u),a.variantIds.push(u)}}for(var l=Se(o.streams),c=l.next();!c.done;c=l.next());return o.streams.map(function(e){return e=e,n=o.startTime,t=s,i=e.initSegmentUri?jh(e.initSegmentUri):null,r=n+e.presentationTimeOffset,a=n+t,{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var t=jh(e.uri);return{startTime:n+e.startTime,endTime:n+e.endTime,dataKey:t,initSegmentKey:i,appendWindowStart:n,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0};var n,t,i,r,a})}function jh(e){var t;if(t=(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||/^offline:segment\/([0-9]+)$/.exec(e))return Number(t[1]);throw new Ne(2,9,9004,"Could not parse uri "+e)}function Uh(){kh.apply(this,arguments)}function Bh(){kh.apply(this,arguments)}function Fh(){this.m=this.j=this.i=this.h=this.g=this.l=null}function Vh(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function Hh(e){var t,n,i;return null!=(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e))&&("manifest"==(t=e[1])||"segment"==t)&&(n=e[2])&&(i=e[3])&&null!=t?new Vh(t,n,i,Number(e[4])):null}function Kh(e,t){this.h=e,this.g=t}function Gh(t,e){var n=new ye(null,0),i=(n.Ia(e.duration),e.streams.filter(function(e){return"audio"==e.type})),r=e.streams.filter(function(e){return"video"==e.type}),i=function(e,t,n,i){for(var r=new Set,a=Se(t),o=a.next();!o.done;o=a.next())for(var s=Se(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(o=(a=Se(n)).next();!o.done;o=a.next())for(o=(s=Se(o.value.variantIds)).next();!o.done;o=s.next())r.add(o.value);for(a=new Map,o=(r=Se(r)).next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(r=(t=Se(t)).next();!r.done;r=t.next())for(o=qh(e,r=r.value,i),r=(s=Se(r.variantIds)).next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(t=(n=Se(n)).next();!t.done;t=n.next())for(t=qh(e,r=t.value,i),r=(o=Se(r.variantIds)).next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(t,i,r,n),r=e.streams.filter(function(e){return e.type==me}).map(function(e){return qh(t,e,n)}),a=e.streams.filter(function(e){return"image"==e.type}).map(function(e){return qh(t,e,n)}),o=e.drmInfo?[e.drmInfo]:[];if(e.drmInfo)for(var s=Se(i.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:e.sequenceMode||!1}}function qh(a,e,t){var n=e.segments.map(function(e){return e=e,r=new Vh("segment",(t=a).h,t.g,e.dataKey),new L(e.startTime,e.endTime,function(){return[r.toString()]},0,null,null!=e.initSegmentKey?(n=e.initSegmentKey,i=new Vh("segment",t.h,t.g,n),new _a(function(){return[i.toString()]},0,null)):null,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,[],e.tilesLayout||"");var t,n,i,r});return t.Gb(n),{id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ne(n),mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:e.hdr,kind:e.kind,encrypted:e.encrypted,drmInfos:[],keyIds:e.keyIds,language:e.language,label:e.label,type:e.type,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:e.roles,forced:e.forced,channelsCount:e.channelsCount,audioSamplingRate:e.audioSamplingRate,spatialAudio:e.spatialAudio,closedCaptions:e.closedCaptions,tilesLayout:e.tilesLayout}}function Wh(){this.g=null}function zh(){}function Xh(e){var t,n,i=Hh(e);return e=i&&"manifest"==i.g?bi(e={uri:e,Fe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):i&&"segment"==i.g?(i.key(),t=i,n=new Rh,bi(void 0).Z(function(){return n.init()}).Z(function(){return Dh(n,t.Aa(),t.ka())}).Z(function(e){return e.getSegments([t.key()])}).Z(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})):vi(new Ne(2,1,9004,e))}function Yh(g,m,v){var y,b,T,w;return Re(function(e){switch(e.g){case 1:y=[];for(var t=[],n=Se(v),i=n.next();!i.done;i=n.next()){for(var i=i.value,r=!1,a=Se(t),o=a.next();!o.done;o=a.next())if(s=(o=o.value).info,f=i,p=function(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType},s.keySystem==f.keySystem&&s.licenseUri==f.licenseUri&&le(s.audioCapabilities,f.audioCapabilities,p)&&le(s.videoCapabilities,f.videoCapabilities,p)){o.sessionIds.push(i.sessionId),r=!0;break}r||t.push({info:i,sessionIds:[i.sessionId]})}b=Se(t),T=b.next();case 2:if(T.done){e.A(4);break}return w=T.value,u=g,l=m,c=w,w=Re(function(e){switch(e.g){case 1:return d=new Zi({kb:l,onError:function(){},Xc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Ie(e,2),d.configure(u),ke(e,(t=d,n=c.info.keySystem,i=c.info.licenseUri,r=c.info.serverCertificate,a=c.info.audioCapabilities,o=c.info.videoCapabilities,s=new Map,(a={audioCapabilities:a,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:n}).drmInfos=[{keySystem:n,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],s.set(n,a),ur(t,s,[])),4);case 4:Ce(e,3);break;case 2:return Me(e),ke(e,d.destroy(),5);case 5:case 9:return e.return([]);case 3:return Ie(e,6),ke(e,ir(d),8);case 8:Ce(e,7);break;case 6:return Me(e),ke(e,d.destroy(),9);case 7:return h=[],ke(e,Promise.all(c.sessionIds.map(function(o){return Re(function(e){return 1==e.g?(Ie(e,2),ke(e,(t=d,n=o,Re(function(e){return 1==e.g?ke(e,lr(t,n),2):3!=e.g?(i=e.h)?(r=[],(a=t.i.get(i))&&(a.Ja=new R,r.push(a.Ja)),r.push(i.remove()),ke(e,Promise.all(r),3)):e.return():(t.i.delete(i),void Ae(e))})),4)):2!=e.g?(h.push(o),Ce(e,0)):(Me(e),void Ae(e));var t,n,i,r,a})})),10);case 10:return ke(e,d.destroy(),11);case 11:return e.return(h)}var t,n,i,r,a,o,s}),ke(e,w,5);case 5:w=e.h,y=y.concat(w),T=b.next(),e.A(2);break;case 4:return e.return(y)}var u,l,c,d,h,s,f,p})}function $h(e,t){var n=Gh(new Kh(e.Aa(),e.ka()),t),i=t.appMetadata||{},n=Qh(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Qh(e){for(var t=[],n=e.variants.filter(Bn),i=(n=Se(n)).next();!i.done;i=n.next())t.push(Dn(i.value));for(n=(e=Se(e.textStreams)).next();!n.done;n=e.next())t.push(_n(n.value));return t}function Jh(){this.g={}}function Zh(e,t){e=e.g[t];return e=null==e?0:e}function ef(e){var o=this;if(e&&e.constructor!=i)throw new Ne(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.fc()):(this.h=Ns(),this.g=new a),this.i=[],this.j=[];var s=!e;this.l=new Pi(function(){var t,n,i,r,a;return Re(function(e){switch(e.g){case 1:return ke(e,Promise.all(o.j.map(yh)),2);case 2:for(t=function(){},n=[],i=Se(o.i),r=i.next();!r.done;r=i.next())a=r.value,n.push(a.then(t,t));return ke(e,Promise.all(n),3);case 3:if(s)return ke(e,o.g.destroy(),4);e.A(4);break;case 4:o.h=null,o.g=null,Ae(e)}})})}function tf(){if(Et())e:{for(var e=Se(Lh.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function nf(t){var n,i;return Re(function(e){switch(e.g){case 1:return ke(e,(n=new Rh).init(),2);case 2:return ke(e,Nh(n),3);case 3:return i=e.h,i=new Vh("manifest",i.path.Aa,i.path.ka,t),ke(e,n.destroy(),4);case 4:return ke(e,(new ef).remove(i.toString()),0)}})}function rf(t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v;return Re(function(e){switch(e.g){case 1:for(s=!1,Ie(e,2),u=!0,l=Se(i.streams),c=l.next();!c.done;c=l.next())for(d=c.value,h=Se(d.segments),f=h.next();!f.done;f=h.next())p=f.value,null!=(g=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null)&&(p.dataKey=g,p.pendingSegmentRefId=void 0),null!=(g=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(u=!1),p.pendingInitSegmentRefId&&(u=!1);return i.size+=a,u&&(i.isIncomplete=!1),ke(e,t.updateManifest(n,i),4);case 4:s=!0,o(),Ce(e,0);break;case 2:return m=Me(e),ke(e,nf(n),5);case 5:if(s){e.A(6);break}return v=Object.values(r),ke(e,t.removeSegments(v,function(){}),6);case 6:throw m}})}function af(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function of(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function sf(e,t){for(var n=[],i=Se(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Zt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Zt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function uf(u,l,c){return Re(function(e){return ke(e,(t=u.g,n=u.h.drm,i=c,r=l,Re(function(e){return 1==e.g?r.drmInfo?(a=function(e){var t=Array.from(e.g.keys());if(t.length)return e.g.get(t[0]).getEmeSessionCell();throw new Ne(2,9,9e3,"No supported storage mechanisms found")}(i),o=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:sf(r,!1),videoCapabilities:sf(r,!0)}}),ke(e,Yh(n,t,o),2)):e.return():3!=e.g?(s=e.h,ke(e,a.remove(s),3)):ke(e,a.add(o.filter(function(e){return!s.includes(e.sessionId)})),0)})),0);var t,n,i,r,a,o,s})}function lf(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout},s=r.offline.numberOfParallelDownloads,u=0,l=i,c=n.presentationTimeline.Pa();if(null!=(c=l.segmentIndex.find(c)))for(var d=l.segmentIndex.get(c);d;){{f=void 0;p=void 0;g=void 0;var h=d;var f=ph(h),p=void 0;if(!a.has(f)){var g=h.endTime-h.startTime;g=Zh(t,i.id)*g,g=mh(e.g,g),a.set(f,new fh(h,g,u,!1))}h.i&&(p=ph(h.i),a.has(p)||(g=.5*Zh(t,i.id),g=mh(e.g,g),a.set(p,new fh(h.i,g,u,!0)))),o.segments.push({pendingInitSegmentRefId:p,initSegmentKey:p?0:null,startTime:h.startTime,endTime:h.endTime,appendWindowStart:h.appendWindowStart,appendWindowEnd:h.appendWindowEnd,timestampOffset:h.timestampOffset,tilesLayout:h.tilesLayout,pendingSegmentRefId:f,dataKey:0}),u=(u+1)%s}d=l.segmentIndex.get(++c)}return o}function cf(e){if(e.l.g)throw new Ne(2,9,7001)}function df(){if(!tf())throw new Ne(2,9,9e3)}function hf(t,n){return Re(function(e){return 1==e.g?(t.i.push(n),S(e),ke(e,n,4)):2!=e.g?e.return(e.h):(De(e),Le(t.i,n),_e(e,0))})}function ff(e){for(var t=new Set,n=Se(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=Se(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=Se(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}T(Ph,kh),Ph.prototype.updateManifestExpiration=function(t,n){var i,r,a,o=this;return Re(function(e){return i=Eh(o.h,o.g),r=i.store(),a=new R,r.get(t).onsuccess=function(e){(e=e.target.result)?(e.expiration=n,r.put(e),a.resolve()):a.reject(new Ne(2,9,9012,"Could not find values for "+t))},ke(e,Promise.all([i.promise(),a]),0)})},Ph.prototype.bc=function(t){var n,i,r,a;return Re(function(e){if(1!=e.g)return a=e.h,e.return({creationTime:0,originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:null==t.expiration?1/0:t.expiration,streams:a,sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata,sequenceMode:!1});for(n=[],i=0;i<t.periods.length;++i)r=i==t.periods.length-1?t.duration:t.periods[i+1].startTime,r=r-t.periods[i].startTime,r=Oh(t.periods[i],r),n.push(r);return ke(e,_c(n),2)})},Ph.prototype.oe=function(e){return{data:e.data}},T(Uh,kh),Uh.prototype.bc=function(a){var o,s,u,l,c;return Re(function(e){if(1!=e.g)return c=e.h,e.return({appMetadata:a.appMetadata,creationTime:0,drmInfo:a.drmInfo,duration:a.duration,expiration:null==a.expiration?1/0:a.expiration,originalManifestUri:a.originalManifestUri,sessionIds:a.sessionIds,size:a.size,streams:c,sequenceMode:!1});for(o=[],s=0;s<a.periods.length;++s){u=s==a.periods.length-1?a.duration:a.periods[s+1].startTime,l=u-a.periods[s].startTime;for(var t=a.periods[s],n=[],i=Se(t.streams),r=i.next();!r.done;r=i.next())0!=(r=r.value).variantIds.length&&n.push(function(t,n,i){return{id:t.id,originalId:t.originalId,primary:t.primary,type:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:void 0,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,encrypted:t.encrypted,keyIds:new Set([t.keyId]),segments:t.segments.map(function(e){return{startTime:n+e.startTime,endTime:n+e.endTime,initSegmentKey:t.initSegmentKey,appendWindowStart:n,appendWindowEnd:i,timestampOffset:n-t.presentationTimeOffset,dataKey:e.dataKey,tilesLayout:""}}),variantIds:t.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(r,t.startTime,t.startTime+l));o.push(n)}return ke(e,_c(o),2)})},T(Bh,kh),(n=Bh.prototype).hasFixedKeySpace=function(){return!1},n.addSegments=function(e){return this.add(this.i,e)},n.addManifests=function(e){return this.add(this.g,e)},n.updateManifest=function(e,t){return n=e,i=t,(r=(e=Eh((e=this).h,e.g)).store()).get(n).onsuccess=function(){r.put(i,n)},e.promise();var n,i,r},n.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(n=Fh.prototype).init=function(){var n=this,i=new R,r=N.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){var e=r.result,t=(t=(n.l=e).objectStoreNames).contains("manifest")&&t.contains("segment")?new Ph(e,"segment","manifest"):null;n.g=t,t=(t=e.objectStoreNames).contains("manifest-v2")&&t.contains("segment-v2")?new Uh(e,"segment-v2","manifest-v2"):null,n.h=t,t=(t=e.objectStoreNames).contains("manifest-v3")&&t.contains("segment-v3")?new Uh(e,"segment-v3","manifest-v3"):null,n.i=t,t=(t=e.objectStoreNames).contains("manifest-v5")&&t.contains("segment-v5")?new Bh(e,"segment-v5","manifest-v5"):null,n.j=t,e=e.objectStoreNames.contains("session-ids")?new Mh(e):null,n.m=e,i.resolve()},r.onupgradeneeded=function(){for(var e=r.result,t=Se(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){i.reject(new Ne(2,9,9001,r.error)),e.preventDefault()},i},n.destroy=function(){var t=this;return Re(function(e){switch(e.g){case 1:if(t.g)return ke(e,t.g.destroy(),2);e.A(2);break;case 2:if(t.h)return ke(e,t.h.destroy(),4);e.A(4);break;case 4:if(t.i)return ke(e,t.i.destroy(),6);e.A(6);break;case 6:if(t.j)return ke(e,t.j.destroy(),8);e.A(8);break;case 8:if(t.m)return ke(e,t.m.destroy(),10);e.A(10);break;case 10:t.l&&t.l.close(),Ae(e)}})},n.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},n.getEmeSessionCell=function(){return this.m},n.erase=function(){var i=this;return Re(function(e){switch(e.g){case 1:if(i.g)return ke(e,i.g.destroy(),2);e.A(2);break;case 2:if(i.h)return ke(e,i.h.destroy(),4);e.A(4);break;case 4:if(i.i)return ke(e,i.i.destroy(),6);e.A(6);break;case 6:if(i.j)return ke(e,i.j.destroy(),8);e.A(8);break;case 8:return i.l&&i.l.close(),ke(e,(t=new R,(n=N.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ne(2,9,9001,n.error)),e.preventDefault()},t),10);case 10:return i.l=null,i.g=null,i.h=null,i.i=null,i.j=null,ke(e,i.init(),0)}var t,n})},_h("idb",function(){return m("CrKey")||kt()||!N.indexedDB?null:new Fh}),Vh.prototype.Aa=function(){return this.i},Vh.prototype.ka=function(){return this.h},Vh.prototype.key=function(){return this.l},Vh.prototype.toString=function(){return this.j},(n=Wh.prototype).configure=function(){},n.start=function(t,n){var i,r,a,o,s=this;return Re(function(e){switch(e.g){case 1:if(i=Hh(t),null==(s.g=i)||"manifest"!=i.g)throw new Ne(2,1,9004,t);return r=new Rh,S(e),ke(e,r.init(),4);case 4:return ke(e,Dh(r,i.Aa(),i.ka()),5);case 5:return ke(e,e.h.getManifests([i.key()]),6);case 6:return a=e.h,a=a[0],o=new Kh(i.Aa(),i.ka()),o=Gh(o,a),n.makeTextStreamsForClosedCaptions(o),e.return(o);case 2:return De(e),ke(e,r.destroy(),7);case 7:_e(e,0)}})},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(t,n){var i,r,a,o,s,u=this;return Re(function(e){switch(e.g){case 1:return i=u.g,r=new Rh,Ie(e,2,3),ke(e,r.init(),5);case 5:return ke(e,Dh(r,i.Aa(),i.ka()),6);case 6:return ke(e,(a=e.h).getManifests([i.key()]),7);case 7:if(s=e.h,s=s[0],o=s.sessionIds.includes(t),s=null==s.expiration||s.expiration>n,o&&s)return ke(e,a.updateManifestExpiration(i.key(),n),3);e.A(3);break;case 3:return De(e),ke(e,r.destroy(),10);case 10:_e(e,0);break;case 2:Me(e),e.A(3)}})},kr["application/x-offline-manifest"]=function(){return new Wh},t("shaka.offline.OfflineScheme",zh),Ci("offline",zh.plugin=Xh),(n=ef.prototype).destroy=function(){return this.l.destroy()},n.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ms(e,t)),Ds(this.h,e)},n.getConfiguration=function(){var e=Ns();return Ds(e,this.h,Ns()),e},n.fc=function(){return this.g},n.store=function(re,e,ae){var t,n,oe,se,ue,le,ce,de,he,fe,pe,ge,me,ve,ye,be,Te,we,xe=this,Ee=this.getConfiguration(),i=new vh(this.g);return this.j.push(i),oe=this,se=re,ue=e||{},le=Ee,ce=i,(e=new C(e=Re(function(e){switch(e.g){case 1:return df(),he=de=null,fe=new Rh,me=ge=pe=null,Ie(e,2,3),ke(e,Re(function(e){return 1==e.g?ke(e,xr(re,xe.g,Ee.manifest.retryParameters,ae||null),2):(ie=e.h,e.return(ie()))}),5);case 5:return de=e.h,ke(e,(s=oe,Z=se,ee=de,te=le,Re(function(e){if(1==e.g)return u=null,P=s.g,P={networkingEngine:P,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){u=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){}},ee.configure(te.manifest),cf(s),ke(e,ee.start(Z,P),2);if(3!=e.g)return ne=e.h,cf(s),P=ff(ne),ke(e,Promise.all(Ui(P,function(e){return e.createSegmentIndex()})),3);if(cf(s),u)throw u;return e.return(ne)})),6);case 6:if(ve=e.h,cf(oe),ve.presentationTimeline.V()||ve.presentationTimeline.jb())throw new Ne(2,9,9005,se);return ke(e,(Y=oe,$=ve,Q=function(e){me=me||e},J=le,Re(function(e){switch(e.g){case 1:return(o=new Zi({kb:Y.g,onError:Q,Xc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(J.drm),ke(e,(t=o,n=$.variants,i=J.offline.usePersistentLicense,t.ha=!0,t.C=[],t.M=i,tr(t,n)),2);case 2:return ke(e,ir(o),3);case 3:return ke(e,rr(o),4);case 4:return e.return(o)}var t,n,i})),7);case 7:if(he=e.h,cf(oe),me)throw me;return ke(e,(l=ve,c=le,Re(function(e){switch(e.g){case 1:return h={width:1/0,height:1/0},o=l,s=c.restrictions,u=h,o.variants=o.variants.filter(function(e){return En(e,s,u)}),ke(e,An(l,c.offline.usePersistentLicense),2);case 2:for(d=[],h=c.preferredAudioChannelCount,B=c.preferredDecodingAttributes,_=c.preferredVideoCodecs,F=c.preferredAudioCodecs,wn(l,_,F,h,B),f=Se(l.variants),p=f.next();!p.done;p=f.next())V=p.value,d.push(Dn(V));for(g=Se(l.textStreams),m=g.next();!m.done;m=g.next())H=m.value,d.push(_n(H));for(A=Se(l.imageStreams),I=A.next();!I.done;I=A.next())K=I.value,d.push(Ln(K));return ke(e,c.offline.trackSelectionCallback(d),3);case 3:for(C=e.h,G=l.presentationTimeline.getDuration(),M=0,R=Se(C),N=R.next();!N.done;N=R.next())D=N.value,D=D.bandwidth*G/8,M+=D;return Ie(e,4),ke(e,c.offline.downloadSizeCallback(M),6);case 6:if(!e.h)throw new Ne(2,9,9014);Ce(e,5);break;case 4:if((_=Me(e))instanceof Ne)throw _;throw new Ne(2,9,9015);case 5:for(q=new Set,W=new Set,z=new Set,X=Se(C),N=X.next();!N.done;N=X.next())"variant"==(L=N.value).type&&q.add(L.id),"text"==L.type&&W.add(L.id),"image"==L.type&&z.add(L.id);l.variants=l.variants.filter(function(e){return q.has(e.id)}),l.textStreams=l.textStreams.filter(function(e){return W.has(e.id)}),l.imageStreams=l.imageStreams.filter(function(e){return z.has(e.id)});var t=l,n=(t.variants.map(function(e){return e.video}),new Set(t.variants.map(function(e){return e.audio})));t=t.textStreams;for(var i=Se(n),r=i.next();!r.done;r=i.next())for(var a=(r=Se(n)).next();!a.done;a=r.next());for(i=(n=Se(t)).next();!i.done;i=n.next())for(r=(i=Se(t)).next();!r.done;r=i.next());return void Ae(e)}var o,s,u})),8);case 8:return ke(e,fe.init(),9);case 9:return cf(oe),ke(e,Nh(fe),10);case 10:return pe=e.h,cf(oe),be=function(n,e,t,i,r,a){o=i;var o,s,u={offlineUri:null,originalManifestUri:t,duration:(s=e).presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:s=Qh(s),appMetadata:o,isIncomplete:!1},l=r.offline.progressCallback,c=((s=a).m=function(e,t){u.size=t,l(u,e)},s.l=function(e,t){c&&r.offline.usePersistentLicense&&d==t&&ar(n,"cenc",e)},af(e)&&!of(e)),d=null;c&&(d=pf.get(n.g.keySystem));for(var h,f,p,g,m,v,y,b,T=new Jh,w=Se(e.textStreams),x=w.next();!x.done;x=w.next())T.g[x.value.id]=52;for(x=(w=Se(e.imageStreams)).next();!x.done;x=w.next())h=T,f=x.value,h.g[f.id]=f.bandwidth||2048;for(w=(x=Se(e.variants)).next();!w.done;w=x.next())p=T,g=w.value,b=y=v=m=void 0,y=g.audio,b=g.video,y&&!b&&(p.g[y.id]=y.bandwidth||g.bandwidth),!y&&b&&(p.g[b.id]=b.bandwidth||g.bandwidth),y&&b&&(m=y.bandwidth||393216,(v=b.bandwidth||g.bandwidth-m)<=0&&(v=g.bandwidth),p.g[y.id]=m,p.g[b.id]=v);return a=(T=function(e,t,n,i){for(var r=new Map,a=ff(n),o=new Map,s=(a=Se(a)).next();!s.done;s=a.next()){var u=lf(e,t,n,s=s.value,i,r);o.set(s.id,u)}for(t=(e=Se(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),ee:Array.from(r.values())}}(a,T,e,r)).streams,T=T.ee,x=n.g,w=r.offline.usePersistentLicense,x&&w&&(x.initData=[]),{Nf:{creationTime:Date.now(),originalManifestUri:t,duration:e.presentationTimeline.getDuration(),size:0,expiration:n.ec(),streams:a,sessionIds:w?sr(n):[],drmInfo:x,appMetadata:i,isIncomplete:!0,sequenceMode:e.sequenceMode},ee:T}}(he,ve,se,ue,le,ce),ye=be.Nf,be=be.ee,ke(e,pe.ka.addManifests([ye]),11);case 11:if(Te=e.h,cf(oe),ge=Te[0],cf(oe),me)throw me;return ke(e,(v=oe,t=be,y=ge,b=ye,T=ce,w=le,x=pe.ka,E=ve,O=he,Re(function(e){switch(e.g){case 1:if(S={},k=0,i=!(n=function(u,l){var c,d,h,f,p,g,m;return Re(function(e){if(1==e.g){for(c={},d=Se(u),h=d.next();!h.done;c={bb:c.bb},h=d.next())c.bb=h.value,n=c.bb,i=w,f=Bo(n.g.ya(),n.g.Ca,n.g.la,i.streaming.retryParameters),p=c.bb.i,g=c.bb.h,m=function(r){return function(t){var n,i;return Re(function(e){if(1==e.g)return ke(e,x.addSegments([{data:t}]),2);n=e.h,cf(v),i=r.bb.g,i=ph(i),S[i]=n[0],k+=t.byteLength,Ae(e)})}}(c),bh(T,c.bb.groupId,f,p,g,m);return ke(e,(t=T,Re(function(e){return 1==e.g?ke(e,Promise.all(t.j.values()),2):e.return(t.g.h)})),2)}var t,n,i;{if(l){cf(v);var r=E,a=b,o=O,s=w;if(a.expiration=o.ec(),o=sr(o),a.sessionIds=s.offline.usePersistentLicense?o:[],af(r)&&s.offline.usePersistentLicense&&!o.length)throw new Ne(2,9,9007);return ke(e,x.updateManifest(y,b),0)}return e.A(0)}})}),Ie(e,2),af(E)&&i&&!of(E))return ke(e,n(t.filter(function(e){return e.h}),!0),5);e.A(4);break;case 5:return cf(v),t=t.filter(function(e){return!e.h}),r=S,a=k,S={},k=0,ke(e,rf(x,y,b,r,a,function(){cf(v)}),6);case 6:cf(v);case 4:if(i){e.A(7);break}return ke(e,n(t,!1),8);case 8:return cf(v),r=S,a=k,S={},k=0,ke(e,rf(x,y,b,r,a,function(){cf(v)}),9);case 9:cf(v);case 7:Ce(e,0);break;case 2:return j=Me(e),U=Object.values(S),ke(e,x.removeSegments(U,function(){}),10);case 10:throw j}})),12);case 12:return cf(oe),Te=new Vh("manifest",pe.path.Aa,pe.path.ka,ge),e.return($h(Te,ye));case 3:return De(e),ke(e,fe.destroy(),13);case 13:if(de)return ke(e,de.stop(),14);e.A(14);break;case 14:if(he)return ke(e,he.destroy(),16);e.A(16);break;case 16:_e(e,0);break;case 2:if(we=Me(e),null!=ge)return ke(e,nf(ge),18);e.A(18);break;case 18:throw me||we}var v,t,y,b,T,w,x,E,O,S,k,n,i,r,a,j,U,l,c,d,h,B,F,f,p,V,g,m,H,A,I,K,C,G,M,R,N,D,_,q,W,z,X,L,Y,$,Q,J,o,s,Z,ee,te,u,ne,P,ie}),function(){return yh(i)})).finally(function(){Le(xe.j,i)}),t=this,n=(e=e).promise,t.i.push(n),e.finally(function(){Le(t.i,n)})},n.remove=function(e){return hf(this,(o=this,s=e,Re(function(e){switch(e.g){case 1:if(df(),null==(u=Hh(s))||"manifest"!=u.g)throw new Ne(2,9,9004,s);return u=u,l=new Rh,S(e),ke(e,l.init(),4);case 4:return ke(e,Dh(l,u.Aa(),u.ka()),5);case 5:return ke(e,(c=e.h).getManifests([u.key()]),6);case 6:return d=e.h,d=d[0],ke(e,Promise.all([uf(o,d,l),(n=c,i=u,a=function(e){for(var t=new Set,n=(e=Se(e.streams)).next();!n.done;n=e.next())for(var i=(n=Se(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(r=d),$h(i,r),Promise.all([n.removeSegments(a,t),n.removeManifests([i.key()],t)]))]),2);case 2:return De(e),ke(e,l.destroy(),8);case 8:_e(e,0)}function t(){}var n,i,r,a})));var o,s,u,l,c,d},n.ag=function(){return hf(this,(t=this,Re(function(e){switch(e.g){case 1:return df(),n=t.g,i=t.h.drm,r=new Rh,a=!1,S(e),ke(e,r.init(),4);case 4:o=[],r.g.forEach(function(e){e=e.getEmeSessionCell(),o.push(e)}),s=Se(o),u=s.next();case 5:if(u.done){e.A(2);break}return ke(e,(l=u.value).getAll(),8);case 8:return c=e.h,ke(e,Yh(i,n,c),9);case 9:return d=e.h,ke(e,l.remove(d),10);case 10:d.length!=c.length&&(a=!0),u=s.next(),e.A(5);break;case 2:return De(e),ke(e,r.destroy(),11);case 11:_e(e,3);break;case 3:return e.return(!a)}})));var t,n,i,r,a,o,s,u,l,c,d},n.list=function(){return hf(this,Re(function(e){switch(e.g){case 1:return df(),a=[],t=new Rh,S(e),ke(e,t.init(),4);case 4:return o=Promise.resolve(),t.g.forEach(function(e,r){e.getCells().forEach(function(e,t){var n,i;n={Aa:r,ka:t},i=e,o=o.then(function(){return Re(function(e){if(1==e.g)return ke(e,i.getAllManifests(),2);e.h.forEach(function(e,t){t=$h(new Vh("manifest",n.Aa,n.ka,t),e);a.push(t)}),Ae(e)})})})}),ke(e,o,2);case 2:return De(e),ke(e,t.destroy(),6);case 6:_e(e,3);break;case 3:return e.return(a)}}));var a,t,o},t("shaka.offline.Storage",ef),ef.deleteAll=function(){var r;return Re(function(e){return 1==e.g?(r=new Rh,S(e),ke(e,(t=r,Re(function(e){return 1==e.g?(n=Array.from(t.g.values()),(i=0<n.length)||Lh.forEach(function(e){(e=e())&&n.push(e)}),ke(e,Promise.all(n.map(function(e){return e.erase()})),2)):i?e.A(0):ke(e,Promise.all(n.map(function(e){return e.destroy()})),0)})),2)):5!=e.g?(De(e),ke(e,r.destroy(),5)):_e(e,0);var t,n,i})},ef.prototype.removeEmeSessions=ef.prototype.ag,ef.prototype.getNetworkingEngine=ef.prototype.fc,ef.support=tf;var pf=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function gf(){}function mf(e,t){for(var n={priority:t||0,Ze:e},i=0;i<vf.length;i++)if(vf[i].priority<n.priority)return void vf.splice(i,0,n);vf.push(n)}ju.offline=tf,t("shaka.polyfill",gf),gf.register=mf,gf.installAll=function(){for(var e=Se(vf),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Ze()}catch(e){J("Error installing polyfill!",e)}}};var vf=[];function yf(){}function bf(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=Se(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())!function(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}(t.value)}function Tf(){}function wf(){$g()}function xf(){}function Ef(){var e;N.Document&&((e=Element.prototype).requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Sf),document.addEventListener("webkitfullscreenerror",Sf),document.addEventListener("mozfullscreenchange",Sf),document.addEventListener("mozfullscreenerror",Sf),document.addEventListener("MSFullscreenChange",Sf),document.addEventListener("MSFullscreenError",Sf))}function Sf(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function kf(){}function Af(){var e=!0;(Ct()||m("PlayStation 5")||Mt()||m("Web0S")||At()||m("CrKey"))&&(e=!1),(e=m("CrKey")&&m("Android")?!0:e)&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Cf=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=If)}function If(t){var n,i,r,a,o,s,u,l;return Re(function(e){switch(e.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return e.return(n);if("media-source"==t.type){if(!Et()||t.video&&(i=t.video.contentType,!MediaSource.isTypeSupported(i))||t.audio&&(i=t.audio.contentType,!MediaSource.isTypeSupported(i)))return e.return(n)}else{if("file"!=t.type)return e.return(n);if(t.video&&!St(t.video.contentType)||t.audio&&!St(t.audio.contentType))return e.return(n)}return t.keySystemConfiguration?(r=t.keySystemConfiguration,a=[],o=[],r.audio&&(s={robustness:r.audio.robustness||"",contentType:t.audio.contentType},a.push(s)),r.video&&(s={robustness:r.video.robustness||"",contentType:t.video.contentType},o.push(s)),u={initDataTypes:[r.initDataType],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(u.audioCapabilities=a),o.length&&(u.videoCapabilities=o),Ie(e,3),ke(e,navigator.requestMediaKeySystemAccess(r.keySystem,[u]),5)):(n.supported=!0,e.return(Promise.resolve(n)));case 5:l=e.h,Ce(e,4);break;case 3:Me(e);case 4:l&&(n.supported=!0,n.keySystemAccess=l);case 2:return e.return(n)}})}mf((gf.Aria=yf).install=bf),mf((gf.EncryptionScheme=Tf).install=wf,-2),mf((gf.Fullscreen=xf).install=Ef),(gf.MediaCapabilities=kf).install=Af;var Cf=null;function Mf(){}function Rf(){var a,t,n,i,e=Rt();N.MediaSource&&(N.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(i=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){var t=e.split(/ *; */);return t.shift(),t.some(function(e){return e.startsWith("codecs=")})?cast.__platform__.canDisplayType(e):i(e)}):e?e<=12?(Nf(),n=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(e,t){return n.call(this,e,t-.001)}):Nf():(m("Tizen 2")||m("Tizen 3")||m("Tizen 4"))&&(t=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"opus"!=rn(e)[0]&&t(e)})),N.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(a=MediaSource.isTypeSupported,m("Web0S")||(MediaSource.isTypeSupported=function(e){var t,n,i=e.split(/ *; */),r=i.findIndex(function(e){return e.startsWith("codecs=")});return r<0||0<=(n=(t=i[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/)).findIndex(function(e){return e.startsWith("vp09")}))&&(t[n]="vp9",i[r]='codecs="'+t.join(",")+'"',e=i.join("; ")),a(e)}))}function Nf(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,V.apply(0,arguments));return e.abort=function(){},e}}function Df(){}function _f(){function t(){switch(N.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n;screen.orientation||null!=N.orientation&&(n=new Lf,screen.orientation=n,t(),N.addEventListener("orientationchange",function(){t();var e=new ve("change");n.dispatchEvent(e)}))}function Lf(){h.call(this),this.type="",this.angle=0}function Pf(){}function Of(e,t){try{var n=new Bf(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function jf(e){var t=this.mediaKeys;return t&&t!=e&&Vf(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Vf(e,this):Promise.resolve()}function Uf(e){if(We(e=D(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ut(e=Ot(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=qe(e),this.dispatchEvent(t)}function Bf(e,t){if((this.keySystem=e).startsWith("com.apple.fps"))for(var n=Se(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{var i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1,o=!1;if(r.audioCapabilities)for(var s=Se(r.audioCapabilities),u=s.next();!u.done;u=s.next())(u=u.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0]))&&(i.audioCapabilities.push(u),o=!0);if(r.videoCapabilities)for(u=(r=Se(r.videoCapabilities)).next();!u.done;u=r.next())(s=u.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0]))&&(i.videoCapabilities.push(s),o=!0);i=(o=a?o:WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"))?i:null}if(i)return void(this.g=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ff(e){this.h=new WebKitMediaKeys(e),this.g=new f}function Vf(e,t){if(e.g.mb(),!t)return Promise.resolve();e.g.B(t,"webkitneedkey",Uf);try{return co(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function Hf(e){h.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new f,this.sessionId="",this.expiration=NaN,this.closed=new R,this.keyStatuses=new Gf}function Kf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ve("keystatuseschange"),e.dispatchEvent(n)}function Gf(){this.size=0,this.g=void 0}function qf(){}function Wf(){!N.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=zf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Xf,N.MediaKeys=Yf,N.MediaKeySystemAccess=$f,N.shakaMediaKeysPolyfill=!0)}function zf(){return Promise.reject(Error("The key system specified is not supported."))}function Xf(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Yf(){throw new TypeError("Illegal constructor.")}function $f(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Qf(){}function Jf(){if(!(!N.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)cp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=ep,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tp,N.MediaKeys=ip,N.MediaKeySystemAccess=np,N.shakaMediaKeysPolyfill=!0}}function Zf(e){return cp?cp+e.charAt(0).toUpperCase()+e.slice(1):e}function ep(e,t){try{var n=new np(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function tp(e){var t=this.mediaKeys;return t&&t!=e&&rp(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&rp(e,this),Promise.resolve()}function np(e,t){for(var n=!1,i=("org.w3.clearkey"==(this.g=this.keySystem=e)&&(n=!(this.g="webkit-org.w3.clearkey")),!1),r=(r=document.getElementsByTagName("video")).length?r[0]:document.createElement("video"),a=Se(t),o=a.next();!o.done;o=a.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var l=Se(o.audioCapabilities),c=l.next();!c.done;c=l.next())(c=c.value).contentType&&(u=!0,r.canPlayType(c.contentType.split(";")[0],this.g))&&(s.audioCapabilities.push(c),i=!0);if(o.videoCapabilities)for(c=(l=Se(o.videoCapabilities)).next();!c.done;c=l.next())(c=c.value).contentType&&(u=!0,r.canPlayType(c.contentType,this.g))&&(s.videoCapabilities.push(c),i=!0);if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=s)}throw n="org.w3.clearkey"!=e&&"com.widevine.alpha"!=e?"Unsupported keySystem":"None of the requested configurations were supported.",(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ip(e){this.l=e,this.h=null,this.g=new f,this.i=[],this.j=new Map}function rp(n,e){n.h=e,n.g.mb();var t=cp;e&&(n.g.B(e,t+"needkey",function(e){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=qe(e.initData),n.h.dispatchEvent(t)}),n.g.B(e,t+"keymessage",function(e){var t=ap(n,e.sessionId);t&&(e=new ve("message",e=(new Map).set("messageType",null==t.keyStatuses.Cb()?"licenserequest":"licenserenewal").set("message",e.message)),t.h&&(t.h.resolve(),t.h=null),t.dispatchEvent(e))}),n.g.B(e,t+"keyadded",function(e){(e=ap(n,e.sessionId))&&(up(e,"usable"),e.g&&e.g.resolve(),e.g=null)}),n.g.B(e,t+"keyerror",function(e){var t=ap(n,e.sessionId);t&&t.handleError(e)}))}function ap(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function op(e,t,n){h.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new R,this.keyStatuses=new lp}function sp(t,e,n){if(t.m)return Promise.reject(Error("The session is already initialized."));t.m=!0;try{var i;i="persistent-license"==t.l?n?D(Ut("LOAD_SESSION|"+n)):zt(Ut("PERSISTENT|"),e):D(e)}catch(t){return Promise.reject(t)}t.h=new R;var r=Zf("generateKeyRequest");try{t.j[r](t.i,i)}catch(e){if("InvalidStateError"!=e.name)return t.h=null,Promise.reject(e);new A(function(){try{t.j[r](t.i,i)}catch(e){t.h.reject(e),t.h=null}}).R(.01)}return t.h}function up(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ve("keystatuseschange"),e.dispatchEvent(n)}function lp(){this.size=0,this.g=void 0}kf.originalMcap=Cf,mf(Af,-1),mf((gf.MediaSource=Mf).install=Rf),(gf.Orientation=Df).install=_f,T(Lf,h),Lf.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Lf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},mf(_f),(gf.PatchedMediaKeysApple=Pf).install=function(){N.HTMLVideoElement&&N.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jf,N.MediaKeys=Ff,N.MediaKeySystemAccess=Bf,navigator.requestMediaKeySystemAccess=Of,N.shakaMediaKeysPolyfill=!0)},Bf.prototype.createMediaKeys=function(){var e=new Ff(this.keySystem);return Promise.resolve(e)},Bf.prototype.getConfiguration=function(){return this.g},Ff.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Hf(this.h)},Ff.prototype.setServerCertificate=function(){return Promise.resolve(!1)},T(Hf,h),(n=Hf.prototype).generateRequest=function(e,t){var n=this;this.h=new R;try{var i=this.l.createSession("video/mp4",D(t));this.i=i,this.sessionId=i.sessionId||"",this.j.B(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new ve("message",e=(new Map).set("messageType",null==n.keyStatuses.Cb()?"license-request":"license-renewal").set("message",qe(e.message))),n.dispatchEvent(e)}),this.j.B(i,"webkitkeyadded",function(){n.g&&(Kf(n,"usable"),n.g.resolve(),n.g=null)}),this.j.B(i,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Kf(n,"output-not-allowed");break;default:Kf(n,"internal-error")}}),Kf(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.g=new R;try{this.i.update(D(e))}catch(e){this.g.reject(e)}return this.g},n.close=function(){try{this.i.close(),this.closed.resolve(),this.j.mb()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(n=Gf.prototype).Cb=function(){return this.g},n.forEach=function(e){this.g&&e(this.g,Tr.value())},n.get=function(e){if(this.has(e))return this.g},n.has=function(e){var t=Tr.value();return!(!this.g||!Ke(e,t))},n.entries=function(){},n.keys=function(){},n.values=function(){},(gf.PatchedMediaKeysNop=qf).install=Wf,Yf.prototype.createSession=function(){},Yf.prototype.setServerCertificate=function(){},$f.prototype.getConfiguration=function(){},$f.prototype.createMediaKeys=function(){},mf(Wf,-10),(gf.PatchedMediaKeysWebkit=Qf).install=Jf,np.prototype.createMediaKeys=function(){var e=new ip(this.g);return Promise.resolve(e)},np.prototype.getConfiguration=function(){return this.h},ip.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new op(t,this.l,e),this.i.push(e),e},ip.prototype.setServerCertificate=function(){return Promise.resolve(!1)},T(op,h),(n=op.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?up(this,"output-restricted"):up(this,1==t?"expired":"internal-error"))},n.generateRequest=function(e,t){return sp(this,t,null)},n.load=function(e){return"persistent-license"==this.l?sp(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new R;return function e(t,n,i){if(t.g)t.g.then(function(){return e(t,n,i)}).catch(function(){return e(t,n,i)});else{t.g=n,a="webkit-org.w3.clearkey"==t.i?(r=Pt(i),"oct"!=(a=JSON.parse(r)).keys[0].kty&&(t.g.reject(Error("Response is not a valid JSON Web Key Set.")),t.g=null),r=Gt(a.keys[0].k),Gt(a.keys[0].kid)):(r=D(i),null);var r,a,o=Zf("addKey");try{t.j[o](t.i,r,a,t.sessionId)}catch(n){t.g.reject(n),t.g=null}}}(this,t,e),t},n.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Zf("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(n=lp.prototype).Cb=function(){return this.g},n.forEach=function(e){this.g&&e(this.g,Tr.value())},n.get=function(e){if(this.has(e))return this.g},n.has=function(e){var t=Tr.value();return!(!this.g||!Ke(e,t))},n.entries=function(){},n.keys=function(){},n.values=function(){};var cp="";function dp(){}function hp(){var e;!N.HTMLVideoElement||(e=HTMLVideoElement.prototype).requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=pp,Object.defineProperty(e,"disablePictureInPicture",{get:mp,set:vp,enumerable:!0,configurable:!0}),document.exitPictureInPicture=gp,document.addEventListener("webkitpresentationmodechanged",fp,!0))}function fp(e){var t="picture-in-picture"==(e=e.target).webkitPresentationMode?(document.pictureInPictureElement=e,new Event("enterpictureinpicture")):(document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),new Event("leavepictureinpicture"));e.dispatchEvent(t)}function pp(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function gp(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function mp(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function vp(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function yp(){}function bp(){!N.crypto||"randomUUID"in N.crypto||(N.crypto.randomUUID=Tp)}function Tp(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function wp(){}function xp(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Ep)}function Ep(){return new Promise(function(n,e){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,t){n({usage:e,quota:t})},e)})}function Sp(){}function kp(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Ap})}function Ap(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Ip(){}function Cp(){var t;N.HTMLMediaElement&&(t=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e})}function Mp(){}function Rp(){var e;N.HTMLVideoElement&&!(e=HTMLVideoElement.prototype).getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||It())&&(e.getVideoPlaybackQuality=Np)}function Np(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Dp(){}function _p(){if(!N.VTTCue&&N.TextTrackCue){var i=null,e=TextTrackCue.length;if(3==e)i=Lp;else if(6==e)i=Pp;else{try{var t=!!Lp(1,2,"")}catch(e){t=!1}t&&(i=Lp)}i&&(N.VTTCue=function(e,t,n){return i(e,t,n)})}}function Lp(e,t,n){return new N.TextTrackCue(e,t,n)}function Pp(e,t,n){return new N.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}function Op(){}mf(Jf),mf((gf.PiPWebkit=dp).install=hp),mf((gf.RandomUUID=yp).install=bp),mf((gf.StorageEstimate=wp).install=xp),mf((gf.Symbol=Sp).install=kp),mf((gf.VideoPlayPromise=Ip).install=Cp),mf((gf.VideoPlaybackQuality=Mp).install=Rp),mf((gf.VTTCue=Dp).install=_p),Op.prototype.parseInit=function(){},Op.prototype.setSequenceMode=function(){},Op.prototype.parseMedia=function(e,t){for(var n,i=null,r=[],a=Pt(e).split(/\r?\n/),o=(a=Se(a)).next();!o.done;o=a.next())(o=o.value)&&!/^\s+$/.test(o)&&(o=jp.exec(o))&&(n=Up.exec(o[1]),o=new M(n=60*parseInt(n[1],10)+parseFloat(n[2].replace(",",".")),t.segmentEnd||n+2,o[2]),i&&(i.endTime=n,r.push(i)),i=o);return i&&r.push(i),r},t("shaka.text.LrcTextParser",Op);var jp=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Up=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Bp(){}function Fp(e,t,n,i,r,a,o,s,u,l,c){var d=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!c)return null;var h=document.createElement("span");h.textContent=e.textContent}else h=e;for(var f=null,p=Se(dg),g=p.next();!g.done&&!(f=Wp(h,"backgroundImage",i,"#",g.value)[0]);g=p.next());if(p=c,"p"!=e.nodeName&&!f||(c=!0),s="default"==(h.getAttribute("xml:space")||(s?"default":"preserve")),e=[],!(g=Array.from(h.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE})))for(var m=(I=Se(h.childNodes)).next();!m.done;m=I.next())(m=Fp(m.value,t,n,i,r,a,o,s,u,h,c))&&e.push(m);i=null!=l;var v,y,b,T,w,x,E,S,k,A,I=/\S/.test(h.textContent),C=h.hasAttribute("begin")||h.hasAttribute("end")||h.hasAttribute("dur");if(!(C||I||"br"==h.tagName||0!=e.length||i&&!s))return null;for(I=(m=zp(h,n)).start,m=m.end;d&&d.nodeType==Node.ELEMENT_NODE&&"tt"!=d.tagName;)y=I,b=m,v=zp(v=d,n),null==y?y=v.start:null!=v.start&&(y+=v.start),null==b?b=v.end:null!=v.start&&(b+=v.start),I=(m={start:y,end:b}).start,m=m.end,d=d.parentNode;if(null==I&&(I=0),I+=t,m=null==m?1/0:m+t,!C&&0<e.length)for(I=1/0,m=0,n=(t=Se(e)).next();!n.done;n=t.next())n=n.value,I=Math.min(I,n.startTime),m=Math.max(m,n.endTime);return"br"==h.tagName?((r=new M(I,m,"")).lineBreak=!0,r):(t="",(t=new M(I,m,t=g&&(t=h.textContent,s)?(t=t.trim()).replace(/\s+/g," "):t)).nestedCues=e,c||(t.isContainer=!0),u&&(t.cellResolution=u),u=Wp(h,"region",a,"")[0],h.hasAttribute("region")&&u&&u.getAttribute("xml:id")&&(T=u.getAttribute("xml:id"),t.region=o.filter(function(e){return e.id==T})[0]),o=u,l&&i&&!h.getAttribute("region")&&!h.getAttribute("style")&&(o=Wp(l,"region",a,"")[0]),C=t,l=h,w=o,x=f,E=r,S=p,k=0==e.length,"rtl"==Hp(l,w,E,"direction",S=S||k)&&(C.direction="rtl"),"tb"==(k=Hp(l,w,E,"writingMode",S))||"tblr"==k?C.writingMode="vertical-lr":"tbrl"==k?C.writingMode="vertical-rl":"rltb"==k||"rl"==k?C.direction="rtl":k&&(C.direction=fe),(k=Hp(l,w,E,"textAlign",!0))?(C.positionAlign=ug[k],C.lineAlign=sg[k],C.textAlign=ce[k.toUpperCase()]):C.textAlign=ue,(k=Hp(l,w,E,"displayAlign",!0))&&(C.displayAlign=he[k.toUpperCase()]),(k=Hp(l,w,E,"color",S))&&(C.color=k),(k=Hp(l,w,E,"backgroundColor",S))&&(C.backgroundColor=k),(k=Hp(l,w,E,"border",S))&&(C.border=k),(k=Hp(l,w,E,"fontFamily",S))&&(C.fontFamily=k),(k=Hp(l,w,E,"fontWeight",S))&&"bold"==k&&(C.fontWeight=700),k=Hp(l,w,E,"wrapOption",S),C.wrapLine=!k||"noWrap"!=k,(k=Hp(l,w,E,"lineHeight",S))&&k.match(Zp)&&(C.lineHeight=k),(k=Hp(l,w,E,"fontSize",S))&&(k.match(Zp)||k.match(Jp))&&(C.fontSize=k),(k=Hp(l,w,E,"fontStyle",S))&&(C.fontStyle=Ue[k.toUpperCase()]),x&&(k=x.getAttribute("imageType")||x.getAttribute("imagetype"),A=x.getAttribute("encoding"),x=x.textContent.trim(),"PNG"==k)&&"Base64"==A&&x&&(C.backgroundImage="data:image/png;base64,"+x),(x=Hp(l,w,E,"textOutline",S))&&((x=x.split(" "))[0].match(Zp)?C.textStrokeColor=C.color:(C.textStrokeColor=x[0],x.shift()),x[0]&&x[0].match(Zp)?C.textStrokeWidth=x[0]:C.textStrokeColor=""),(x=Hp(l,w,E,"letterSpacing",S))&&x.match(Zp)&&(C.letterSpacing=x),(x=Hp(l,w,E,"linePadding",S))&&x.match(Zp)&&(C.linePadding=x),(S=Hp(l,w,E,"opacity",S))&&(C.opacity=parseFloat(S)),(w=Kp(w,E,"textDecoration"))&&Vp(C,w),(l=Gp(l,E,"textDecoration"))&&Vp(C,l),t)}function Vp(e,t){for(var n=Se(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Le(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Le(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Le(e.textDecoration,"overline")}}function Hp(e,t,n,i,r){return r=void 0===r||r,(e=Gp(e,n,i))||(r?Kp(t,n,i):null)}function Kp(e,t,n){return e?Yl(e,cg,n)||qp(e,t,n):null}function Gp(e,t,n){return Yl(e,cg,n)||qp(e,t,n)}function qp(e,t,n){e=Wp(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=Xl(e[r],"urn:ebu:tt:style",n);(a=(a=a||Yl(e[r],cg,n))||Gp(e[r],t,n))&&(i=a)}return i}function Wp(e,t,n,i,r){var a=[];if(e&&!(n.length<1)){var o=e;for(e=null;o&&!(e=r?Xl(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=Se(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=Se(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}}return a}function zp(e,t){var n=Xp(e.getAttribute("begin"),t),i=Xp(e.getAttribute("end"),t),e=Xp(e.getAttribute("dur"),t);return{start:n,end:i=null==i&&null!=e?n+e:i}}function Xp(e,t){var n=null;if(tg.test(e)){var n=tg.exec(e),i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.h)/t.frameRate)+60*r+3600*i}else if(ng.test(e))n=Yp(ng,e);else if(ig.test(e))n=Yp(ig,e);else if(rg.test(e))n=rg.exec(e),n=Number(n[1])/t.frameRate;else if(ag.test(e))n=ag.exec(e),n=Number(n[1])/t.g;else if(og.test(e))n=Yp(og,e);else if(e)throw new Ne(2,2,2001,"Could not parse cue time range in TTML");return n}function Yp(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function $p(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}ln["application/x-subtitle-lrc"]=function(){return new Op},Bp.prototype.parseInit=function(){},Bp.prototype.setSequenceMode=function(){},Bp.prototype.parseMedia=function(e,t){var n=Pt(e),i=[],r=new DOMParser,a=null;if(""!=n){try{a=r.parseFromString(n,"text/xml")}catch(e){throw new Ne(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new Ne(2,2,2005,n.textContent);var o=a.getElementsByTagName("tt")[0];if(!o)throw new Ne(2,2,2005,"TTML does not contain <tt> tag.");if(!(a=o.getElementsByTagName("body")[0]))return[];var s=Yl(o,lg,"frameRate"),u=Yl(o,lg,"subFrameRate"),l=Yl(o,lg,"frameRateMultiplier"),c=Yl(o,lg,"tickRate"),d=Yl(o,lg,"cellResolution"),n=o.getAttribute("xml:space")||"default",r=Yl(o,cg,"extent");if("default"!=n&&"preserve"!=n)throw new Ne(2,2,2005,"Invalid xml:space value: "+n);n="default"==n;for(var s=new $p(s,u,l,c),d=(d=d&&/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,u=(u=o.getElementsByTagName("metadata")[0])?Array.from(u.childNodes).filter(function(e){return e instanceof Element}):[],l=Array.from(o.getElementsByTagName("style")),c=[],h=Se(o=Array.from(o.getElementsByTagName("region"))),f=h.next();!f.done;f=h.next()){var p,g,m,v=f.value,f=new Be,y=v.getAttribute("xml:id");y?(f.id=y,m=null,y=(m=r?Qp.exec(r)||eg.exec(r):m)?Number(m[1]):null,m=m?Number(m[2]):null,(p=Kp(v,l,"extent"))&&null!=(p=(g=Qp.exec(p))||eg.exec(p))&&(f.width=Number(p[1]),f.height=Number(p[2]),g||(null!=y&&(f.width=100*f.width/y),null!=m&&(f.height=100*f.height/m)),f.widthUnits=g||null!=y?Fe:0,f.heightUnits=g||null!=m?Fe:0),(v=Kp(v,l,"origin"))&&null!=(p=(g=Qp.exec(v))||eg.exec(v))&&(f.viewportAnchorX=Number(p[1]),f.viewportAnchorY=Number(p[2]),g||(null!=m&&(f.viewportAnchorY=100*f.viewportAnchorY/m),null!=y&&(f.viewportAnchorX=100*f.viewportAnchorX/y)),f.viewportAnchorUnits=g||null!=y?Fe:0)):f=null,f&&c.push(f)}if(P(a,"p").length)throw new Ne(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(r=Se(P(a,"div"))).next();!h.done;h=r.next())if(P(h.value,"span").length)throw new Ne(2,2,2001,"<span> can only be inside <p> in TTML");(a=Fp(a,t.periodStart,s,u,l,o,c,n,d,null,!1))&&(a.backgroundColor||(a.backgroundColor="transparent"),i.push(a))}}return i},t("shaka.text.TtmlTextParser",Bp);var Qp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Jp=/^(\d{1,2}(?:\.\d+)?|100)%$/,Zp=/^(\d+px|\d+em|\d*\.?\d+c)$/,eg=/^(\d+)px (\d+)px$/,tg=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ng=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,ig=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,rg=/^(\d*(?:\.\d*)?)f$/,ag=/^(\d*(?:\.\d*)?)t$/,og=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),sg={left:we,center:"center",right:"end",start:we,end:"end"},ug={left:"line-left",center:"center",right:"line-right"},lg=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],cg=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],dg=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function hg(){this.g=new Bp}function fg(){this.g=!1}function pg(e){for(var t=Se(Object.entries(Ee)),n=t.next();!n.done;n=t.next()){var n=(i=Se(n.value)).next().value,i=i.next().value,r=new M(0,0,"");r.color=i,e.set(n,r)}for(n=(t=Se(Object.entries(Pe))).next();!n.done;n=t.next())n=(i=Se(n.value)).next().value,i=i.next().value,(r=new M(0,0,"")).backgroundColor=i,e.set(n,r)}function gg(e,t,n){0===n.size&&pg(n),e=function(e){for(var t=[],n=-1,i="",r=0;r<e.length;r++)if("/"===e[r]){if((a=e.indexOf(">",r))<=r)return e;var a=e.substring(r+1,a),o=t.pop();if(!a||!o)return e;if(o===a)i+="/"+a+">";else{if(!o.startsWith("c.")||"c"!==a)return e;i+="/"+o+">"}r+=a.length+1}else"<"===e[r]?n=r+1:">"===e[r]&&0<n&&(t.push(e.substr(n,r-n)),n=-1),i+=e[r];return i}(e);for(var i=[],r=-1,a=0;a<e.length;a++)"<"===e[a]?r=a+1:">"===e[a]&&0<r&&((r=e.substr(r,a-r)).match(bg)&&i.push(r),r=-1);for(a=(i=Se(i)).next();!a.done;a=i.next())a=a.value,e=e.replace("<"+a+">",'<div time="'+a+'">'),e+="</div>";if(a=oc("<span>"+e+"</span>","span")){if(i=[],1==(a=a.childNodes).length&&((r=a[0]).nodeType==Node.TEXT_NODE||r.nodeType==Node.CDATA_SECTION_NODE))return t.payload=e;for(a=(e=Se(a)).next();!a.done;a=e.next())!function e(t,n,i,r){var a=n.clone();if(t.nodeType===Node.ELEMENT_NODE&&t.nodeName)for(var o=Se(t.nodeName.split(/[ .]+/)),s=o.next();!s.done;s=o.next()){var u;switch(s=s.value,r.has(s)&&(u=r.get(s))&&(a.backgroundColor=mg(u.backgroundColor,a.backgroundColor),a.color=mg(u.color,a.color),a.fontFamily=mg(u.fontFamily,a.fontFamily),a.fontSize=mg(u.fontSize,a.fontSize),a.fontWeight=u.fontWeight,a.fontStyle=u.fontStyle,a.opacity=u.opacity,a.wrapLine=u.wrapLine),s){case"b":a.fontWeight=700;break;case"i":a.fontStyle="italic";break;case"u":a.textDecoration.push("underline");break;case"div":(s=(s=t.getAttribute("time"))&&yg(new Td(s)))&&(a.startTime=s)}}if(Ql(t))for(o=!0,r=Se(t.textContent.split("\n")),t=r.next();!t.done;t=r.next())t=t.value,o||((o=n.clone()).lineBreak=!0,i.push(o)),0<t.length&&((o=a.clone()).payload=t,i.push(o)),o=!1;else for(t=(n=Se(t.childNodes)).next();!t.done;t=n.next())e(t.value,a,i,r)}(a.value,t,i,n);t.nestedCues=i}else t.payload=e}function mg(e,t){return e&&0<e.length?e:t}function vg(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?ue:ce[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){e=e.filter(function(e){return e.id==t});return e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=xe[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ge,e.line=Number(n[1]),n[2])&&(e.lineAlign=xe[n[2].toUpperCase()])}function yg(e){var t,n;return null==(e=xd(e,bg))||(t=Number(e[2]),n=Number(e[3]),59<t)||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ln["application/ttml+xml"]=function(){return new Bp},hg.prototype.parseInit=function(e){var t=!1;if((new _).box("moov",Ki).box("trak",Ki).box("mdia",Ki).box("minf",Ki).box("stbl",Ki).U("stsd",Gi).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Ne(2,2,2007)},hg.prototype.setSequenceMode=function(){},hg.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new _).box("mdat",qi(function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))})).parse(e,!1),i)return r;throw new Ne(2,2,2007)},t("shaka.text.Mp4TtmlParser",hg),ln['application/mp4; codecs="stpp"']=function(){return new hg},ln['application/mp4; codecs="stpp.ttml"']=function(){return new hg},ln['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new hg},ln['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new hg},fg.prototype.parseInit=function(){},fg.prototype.setSequenceMode=function(e){this.g=e},fg.prototype.parseMedia=function(e,t){var n=Pt(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Ne(2,2,2e3);if(n=t.vttOffset,i[0].includes("X-TIMESTAMP-MAP")&&this.g){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(n=yg(new Td(r[1]))))throw new Ne(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}for(var a=[],o=(r=Se(i[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){var o=new Td(o),s=new Be;Ed(o),wd(o);for(var u=Ed(o);u;){var l=s,c=u;(u=/^id=(.*)$/.exec(c))?l.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(c))?l.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(c))?(l.height=Number(u[1]),l.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.regionAnchorX=Number(u[1]),l.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.viewportAnchorX=Number(u[1]),l.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(c)&&(l.scroll="up"),wd(o),u=Ed(o)}a.push(s)}for(pg(r=new Map),o=[],s=(i=Se(i.slice(1))).next();!s.done;s=i.next()){if((1!=(s=s.value.split("\n")).length||s[0])&&!/^NOTE($|[ \t])/.test(s[0])&&"STYLE"==s[0]&&s[1].includes("::cue")){l="global",(u=s[1].match(/\((.*)\)/))&&(l=u.pop()),u=s.slice(2,-1),s[1].includes("}")&&(c=/\{(.*?)\}/.exec(s[1]))&&(u=c[1].split(";"));for(var c=new M(0,0,""),d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":d=!0,c.backgroundColor=p;break;case"color":d=!0,c.color=p;break;case"font-family":d=!0,c.fontFamily=p;break;case"font-size":d=!0,c.fontSize=p;break;case"font-weight":700<=parseInt(p,10)&&(d=!0,c.fontWeight=700);break;case"font-style":switch(p){case"normal":d=!0,c.fontStyle=je;break;case"italic":d=!0,c.fontStyle="italic";break;case"oblique":d=!0,c.fontStyle="oblique"}break;case"opacity":d=!0,c.opacity=parseFloat(p);break;case"text-shadow":d=!0,c.textShadow=p;break;case"white-space":d=!0,c.wrapLine="noWrap"!=p}}}d&&r.set(l,c)}if(h=n,1==s.length&&!s[0]||/^NOTE($|[ \t])/.test(s[0])||"STYLE"==s[0])s=null;else{if(l=null,s[0].includes("--\x3e")||(l=s[0],s.splice(0,1)),c=yg(u=new Td(s[0])),f=xd(u,/[ \t]+--\x3e[ \t]+/g),d=yg(u),null==c||null==f||null==d)throw new Ne(2,2,2001,"Could not parse cue time range in WebVTT");for(c+=h,d+=h,h=s.slice(1).join("\n").trim(),r.has("global")?((s=r.get("global").clone()).startTime=c,s.endTime=d,s.payload=""):s=new M(c,d,""),gg(h,s,r),wd(u),c=Ed(u);c;)vg(s,c,a),wd(u),c=Ed(u);null!=l&&(s.id=l)}s&&o.push(s)}return o},t("shaka.text.VttTextParser",fg);var bg=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Tg(){this.g=null}function wg(){}function xg(e){var t,n;return null==(e=xd(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g))||(t=Number(e[2]),n=Number(e[3]),59<t)||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Eg(){this.g=new fg}function Sg(e){var t="WEBVTT\n\n";if(""!=e)for(var n=(e=Se((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function kg(){}function Ag(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Ig(e){return 3600*((e=_g.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ln["text/vtt"]=function(){return new fg},ln['text/vtt; codecs="vtt"']=function(){return new fg},ln['text/vtt; codecs="wvtt"']=function(){return new fg},Tg.prototype.parseInit=function(e){var t=this,n=!1;if((new _).box("moov",Ki).box("trak",Ki).box("mdia",Ki).U("mdhd",function(e){e=Ca(e.reader,e.version),t.g=e.timescale}).box("minf",Ki).box("stbl",Ki).U("stsd",Gi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Ne(2,2,2008);if(!n)throw new Ne(2,2,2008)},Tg.prototype.setSequenceMode=function(){},Tg.prototype.parseMedia=function(e,t){if(!this.g)throw new Ne(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,u=!1,l=null;if((new _).box("moof",Ki).box("traf",Ki).U("tfdt",function(e){o=!0,i=Ia(e.reader,e.version).le}).U("tfhd",function(e){l=Aa(e.reader,e.flags).re}).U("trun",function(e){s=!0,r=Ma(e.reader,e.version,e.flags).Ke}).box("mdat",qi(function(e){u=!0,n=e})).parse(e,!1),!u&&!o&&!s)throw new Ne(2,2,2008);for(var c=i,d=new b(n,0),h=Se(r),f=h.next();!f.done;f=h.next()){var p=(f=f.value).Vd||l,g=f.ad?i+f.ad:c,c=g+(p||0),m=0;do{var v=d.N(),y=(m+=v,null);"vttc"==zi(d.N())?8<v&&(y=d.Za(v-8)):d.skip(v-8),p&&y&&(v=function(e,t,n){var i,r,a;if((new _).box("payl",qi(function(e){i=Pt(e)})).box("iden",qi(function(e){r=Pt(e)})).box("sttg",qi(function(e){a=Pt(e)})).parse(e),i){var o=0,s=r,e=a,u=t;if(gg(i,u=new M(u,n,""),new Map),s&&(u.id=s),e)for(s=Ed(o=new Td(e));s;)vg(u,s,[]),wd(o),s=Ed(o);return u}return null}(y,t.periodStart+g/this.g,t.periodStart+c/this.g),a.push(v))}while(f.sampleSize&&m<f.sampleSize)}return a.filter(pt)},t("shaka.text.Mp4VttParser",Tg),ln['application/mp4; codecs="wvtt"']=function(){return new Tg},wg.prototype.parseInit=function(){},wg.prototype.setSequenceMode=function(){},wg.prototype.parseMedia=function(e){var t=Pt(e).replace(/\r+/g,"");if(e=[],""!=(t=t.trim()))for(var n=(t=Se(t.split("\n\n"))).next();!n.done;n=t.next()){var i=xg(a=new Td((n=n.value.split("\n"))[0])),r=xd(a,/,/g),a=xg(a);if(null==i||null==r||null==a)throw new Ne(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new M(i,a,n.slice(1).join("\n").trim()))}return e},t("shaka.text.SbvTextParser",wg),ln["text/x-subviewer"]=function(){return new wg},Eg.prototype.parseInit=function(){},Eg.prototype.setSequenceMode=function(){},Eg.prototype.parseMedia=function(e,t){e=D(Ut(Sg(Pt(e))));return this.g.parseMedia(e,t)},t("shaka.text.SrtTextParser",Eg),Eg.srt2webvtt=Sg,ln["text/srt"]=function(){return new Eg},kg.prototype.parseInit=function(){},kg.prototype.setSequenceMode=function(){},kg.prototype.parseMedia=function(e){for(var t="",n="",i=(e=Se(e=Pt(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=Rg.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[];for(var i=null,a=(t=Se(t.split(/\r?\n/))).next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=Ng.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(Dg);else if("Style"==r){for(var r=a.split(Dg),a={},o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}for(i=[],t=null,r={},a=(n=Se(n.split(/\r?\n/))).next();!a.done;r={sd:r.sd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Ng.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Dg);else if("Dialogue"==a){o=o.split(Dg),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];if(o=new M(s=Ig(a.Start),Ig(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.sd=a.Style,a=e.find(function(t){return function(e){return e.Name==t.sd}}(r))){u=void 0;l=void 0;c=void 0;var u=o;var l=a;var c=l.Fontname;if(c&&(u.fontFamily=c),(c=l.Fontsize)&&(u.fontSize=c+"px"),(c=(c=l.PrimaryColour)&&Ag(c))&&(u.color=c),(c=(c=l.BackColour)&&Ag(c))&&(u.backgroundColor=c),l.Bold&&(u.fontWeight=700),l.Italic&&(u.fontStyle="italic"),l.Underline&&u.textDecoration.push("underline"),(c=l.Spacing)&&(u.letterSpacing=c+"px"),c=l.Alignment)switch(parseInt(c,10)){case 1:u.displayAlign=de,u.textAlign="start";break;case 2:u.displayAlign=de,u.textAlign=ue;break;case 3:u.displayAlign=de,u.textAlign="end";break;case 5:u.displayAlign="before",u.textAlign="start";break;case 6:u.displayAlign="before",u.textAlign=ue;break;case 7:u.displayAlign="before",u.textAlign="end";break;case 9:u.displayAlign="center",u.textAlign="start";break;case 10:u.displayAlign="center",u.textAlign=ue;break;case 11:u.displayAlign="center",u.textAlign="end"}(c=l.AlphaLevel)&&(u.opacity=parseFloat(c))}i.push(o)}return i},t("shaka.text.SsaTextParser",kg);var Cg,Mg,Rg=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Ng=/^\s*([^:]+):\s*(.*)/,Dg=/\s*,\s*/,_g=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Lg(){}function Pg(e,t,n){function i(e){We(r).setUint32(a,e.byteLength,!0),a+=4,r.set(D(e),a),a+=e.byteLength}var r,a;if(n&&n.byteLength)return t="string"==typeof t?Bt(t,!0):t,e=Bt(e=jt(e),!0),r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0,i(e),i(t),i(n),r;throw new Ne(2,6,6015)}function Og(){}function jg(){Cg?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Cg=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Ug):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Ug(t,n){var i,r=this;return Re(function(e){return 1==e.g?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),ke(e,Cg.call(r,t,n),2)):Xg(i=e.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Cg,e.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Bg,e.return(Bg.call(r,t,n)))})}function Bg(t,n){var i,r,a,o,s,u,l,c,d=this;return Re(function(e){if(1!=e.g)return c=e.h,e.return(new Wg(c,i));for(console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),i=zg(t),r=[],a=Se(n),o=a.next();!o.done;o=a.next())l=o.value,s=Fg(l.videoCapabilities,i),u=Fg(l.audioCapabilities,i),l.videoCapabilities&&l.videoCapabilities.length&&!s.length||l.audioCapabilities&&l.audioCapabilities.length&&!u.length||((l=Object.assign({},l)).videoCapabilities=s,l.audioCapabilities=u,r.push(l));if(r.length)return ke(e,Cg.call(d,t,r),2);throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c})}function Fg(e,t){return e&&e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t})}function Vg(){}function Hg(){Mg?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Mg=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Kg):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Kg(t){var n,i,r=this;return Re(function(e){switch(e.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),ke(e,Mg.call(r,t),2);case 2:if(n=e.h,!t.keySystemConfiguration)return e.return(n);if((i=n.keySystemAccess)&&Xg(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Mg,e.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Gg,i){e.A(3);break}return i=n,ke(e,qg(t),4);case 4:return i.keySystemAccess=e.h,e.return(n);case 3:return e.return(Gg.call(r,t))}})}function Gg(t){var n,i,r,a,o,s,u=this;return Re(function(e){switch(e.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,t.keySystemConfiguration&&(r=t.keySystemConfiguration,a=r.keySystem,i=r.audio&&r.audio.encryptionScheme,r=r.video&&r.video.encryptionScheme,n=zg(a),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:t},i&&i!=n||r&&r!=n)?e.return(a):ke(e,Mg.call(u,t),2);case 2:if((o=e.h).keySystemAccess)o.keySystemAccess=new Wg(o.keySystemAccess,n);else if(t.keySystemConfiguration)return s=o,ke(e,qg(t),5);e.A(3);break;case 5:s.keySystemAccess=e.h;case 3:return e.return(o)}})}function qg(r){var a;return Re(function(e){var t,n,i;return 1==e.g?(n=[],i=[],(t=r.keySystemConfiguration).audio&&n.push({robustness:t.audio.robustness||"",contentType:r.audio.contentType}),t.video&&i.push({robustness:t.video.robustness||"",contentType:r.video.contentType}),t={initDataTypes:t.initDataType?[t.initDataType]:[],distinctiveIdentifier:t.distinctiveIdentifier,persistentState:t.persistentState,sessionTypes:t.sessionTypes},n.length&&(t.audioCapabilities=n),i.length&&(t.videoCapabilities=i),a=t,ke(e,navigator.requestMediaKeySystemAccess(r.keySystemConfiguration.keySystem,[a]),2)):(a=e.h,e.return(a))})}function Wg(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function zg(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Xg(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return(e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&void 0!==e.encryptionScheme}function Yg(){}function $g(){jg(),Hg()}ln["text/x-ssa"]=function(){return new kg},t("shaka.util.FairPlayUtils",Lg),Lg.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Pt(t.data)}catch(e){return}var i=!1;"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),i=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,i=!0),r.CkcMessage&&(n=r.CkcMessage,i=!0),r.License&&(n=r.License,i=!0)}catch(e){}i&&(t.data=qe(Gt(n)))}},Lg.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Lg.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Lg.verimatrixFairPlayRequest=function(e,t){2===e&&(e=Kt(e=D(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ut("spc="+e))},Lg.conaxInitDataTransform=function(e,t,n){if("skd"!==t)return e;t=n.serverCertificate,n=jt(e).split("skd://").pop().split("?").shift(),n=N.atob(n);for(var i=new ArrayBuffer(2*n.length),i=new Uint16Array(i),r=0,a=n.length;r<a;r++)i[r]=n.charCodeAt(r);return Pg(e,i,t)},Lg.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Pg(e,n=jt(e).split(";").pop(),t))},Lg.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Pg(e,n=jt(e).split("skd://").pop(),t))},Lg.initDataTransform=Pg,Lg.defaultGetContentId=function(e){return new Je(e=jt(e)).Ga},Lg.isFairPlaySupported=function(){var t;return Re(function(e){return 1==e.g?(t={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Ie(e,2),ke(e,navigator.requestMediaKeySystemAccess("com.apple.fps",[t]),4)):2!=e.g?e.return(!0):(Me(e),e.return(!1))})},t("EmeEncryptionSchemePolyfill",Og),Og.install=jg,t("McEncryptionSchemePolyfill",Vg),Vg.install=Hg,Wg.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=Se(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=Se(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Wg.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},t("EncryptionSchemePolyfills",Yg),Yg.install=$g,void 0!==s&&s.exports&&(s.exports=Yg)}.call(i,n,n,void 0),void 0!==t)for(var r in i.shaka)t[r]=i.shaka[r];else"function"==typeof define&&define.amd?define(function(){return i.shaka}):n.shaka=i.shaka}}]);