"use strict";(self.webpackChunkjwplayer=self.webpackChunkjwplayer||[]).push([[347],{2776:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var u=r(1776),c=r(7477);function s(){return{decode(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}function n(e,t,r){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new s,this.syncCueParsing=r,this.regionList=[],this.maxCueBatch=1e3}function f(r,s,n){const a=r,e=()=>{t=(e,t,r,s)=>3600*(0|e)+60*(0|t)+(0|r)+(0|s)/1e3;var e,t=(e=r.match(d))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null;if(null===t)throw new Error("Malformed timestamp: "+a);return r=r.replace(p,""),t},t=()=>{r=r.replace(T,"")};if(t(),s.startTime=e(),t(),"--\x3e"!==r.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);r=r.substr(3),t(),s.endTime=e(),t();{var i=r;const h=new I;var l=b,o=E,u=o?i.split(o):[i];for(let e=0;e<=u.length;e+=1)if("string"==typeof u[e]){const o=u[e].split(l);if(2===o.length){var c=o[0];var f=o[1];switch(c){case"region":for(let e=n.length-1;e>=0;e--)if(n[e].id===f){h.set(c,n[e].region);break}break;case"vertical":h.alt(c,f,["rl","lr"]);break;case"line":{const n=f.split(","),g=n[0];h.integer(c,g),h.percent(c,g)&&h.set("snapToLines",!1),h.alt(c,g,["auto"]),2===n.length&&h.alt("lineAlign",n[1],["start",v,"end"]);break}case"position":{const n=f.split(",");h.percent(c,n[0]),2===n.length&&h.alt("positionAlign",n[1],["start",v,"end","line-left","line-right","auto"]);break}case"size":h.percent(c,f);break;case"align":h.alt(c,f,["start",v,"end","left","right"])}}}s.region=h.get("region",null),s.vertical=h.get("vertical","");let e=h.get("line","auto"),t=("auto"===e&&-1===k.line&&(e=-1),s.line=e,s.lineAlign=h.get("lineAlign","start"),s.snapToLines=h.get("snapToLines",!0),s.size=h.get("size",100),s.align=h.get("align",v),h.get("position","auto"));"auto"===t&&50===k.position&&(t="start"===s.align||"left"===s.align?0:"end"===s.align||"right"===s.align?100:50),s.position=t}}const d=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,a=/^-?\d+$/,h=/\r\n|\n/,g=/^NOTE($|[ \t])/,p=/^[^\sa-zA-Z-]+/,b=/:/,E=/\s/,T=/^\s+/,m=/-->/,w=/^WEBVTT([ \t].*)?$/,I=function(){this.values=Object.create(null)},k=(I.prototype={set(e,t){this.get(e)||""===t||(this.values[e]=t)},get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has(e){return e in this.values},alt(t,r,s){for(let e=0;e<s.length;++e)if(r===s[e]){this.set(t,r);break}},integer(e,t){a.test(t)&&this.set(e,parseInt(t,10))},percent(e,t){return 0<=(t=parseFloat(t))&&t<=100&&(this.set(e,t),!0)}},new c.Z(0,0,0)),v="middle"===k.align?"middle":"center",i=(n.prototype={parse(e,t){const s=this,r=(e&&(s.buffer+=s.decoder.decode(e,{stream:!0})),function(){var e=s.buffer;let t=0;for(;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,s.buffer=e.substr(t),r}),n=function(){"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"};let a;try{if("INITIAL"===s.state){if(!h.test(s.buffer))return this;const e=(a=r()).match(w);if(!e||!e[0])throw new Error("Malformed WebVTT signature.");s.state="HEADER"}}catch(e){return n(),this}let i=!1,l=0;const o=function(){try{for(;s.buffer&&(l<=s.maxCueBatch||s.syncCueParsing);){if(!h.test(s.buffer))return s.flush(),this;switch(i?i=!1:a=r(),s.state){case"HEADER":b.test(a)||a||(s.state="ID");break;case"NOTE":a||(s.state="ID");break;case"ID":if(g.test(a)){s.state="NOTE";break}if(!a)break;if(s.cue=new c.Z(0,0,""),s.state="CUE",!m.test(a)){s.cue.id=a;break}case"CUE":try{f(a,s.cue,s.regionList)}catch(e){s.cue=null,s.state="BADCUE";break}s.state="CUETEXT";break;case"CUETEXT":var e=m.test(a);a&&!e||!(i=!0)?(s.cue.text&&(s.cue.text+="\n"),s.cue.text+=a):(s.oncue&&(l+=1,s.oncue(s.cue)),s.cue=null,s.state="ID");break;case"BADCUE":a||(s.state="ID")}}if(l=0,s.buffer)(0,u.U)(o);else if(!t)return s.flush(),this}catch(e){return n(),this}};o()},flush(){var e=this;if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse(void 0,!0)),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.");return e.onflush&&e.onflush(),this}},n)}}]);